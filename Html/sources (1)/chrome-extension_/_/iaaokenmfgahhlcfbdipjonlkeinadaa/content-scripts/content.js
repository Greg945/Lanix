(function(){try{var Ct=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},he=new Ct.Error().stack;he&&(Ct._sentryDebugIds=Ct._sentryDebugIds||{},Ct._sentryDebugIds[he]="682376d7-4321-43a9-a161-2439673854b6",Ct._sentryDebugIdIdentifier="sentry-dbid-682376d7-4321-43a9-a161-2439673854b6")}catch{}})();var content=(function(){"use strict";function Ct(t){return t}const he=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,ct="8.55.0",de=globalThis;function fr(t,e,r){const n=r||de,i=n.__SENTRY__=n.__SENTRY__||{},o=i[ct]=i[ct]||{};return o[t]||(o[t]=e())}const yt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Ju="Sentry Logger ",gn=["debug","info","warn","error","log","assert","trace"],hr={};function Ht(t){if(!("console"in de))return t();const e=de.console,r={},n=Object.keys(hr);n.forEach(i=>{const o=hr[i];r[i]=e[i],e[i]=o});try{return t()}finally{n.forEach(i=>{e[i]=r[i]})}}function Qu(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return yt?gn.forEach(r=>{e[r]=(...n)=>{t&&Ht(()=>{de.console[r](`${Ju}[${r}]:`,...n)})}}):gn.forEach(r=>{e[r]=()=>{}}),e}const oe=fr("logger",Qu),Xi=50,_t="?",Ji=/\(error: (.*)\)/,Qi=/captureMessage|captureException/;function ec(...t){const e=t.sort((r,n)=>r[0]-n[0]).map(r=>r[1]);return(r,n=0,i=0)=>{const o=[],s=r.split(`
`);for(let a=n;a<s.length;a++){const u=s[a];if(u.length>1024)continue;const c=Ji.test(u)?u.replace(Ji,"$1"):u;if(!c.match(/\S*Error: /)){for(const l of e){const d=l(c);if(d){o.push(d);break}}if(o.length>=Xi+i)break}}return tc(o.slice(i))}}function tc(t){if(!t.length)return[];const e=Array.from(t);return/sentryWrapped/.test(pr(e).function||"")&&e.pop(),e.reverse(),Qi.test(pr(e).function||"")&&(e.pop(),Qi.test(pr(e).function||"")&&e.pop()),e.slice(0,Xi).map(r=>({...r,filename:r.filename||pr(e).filename,function:r.function||_t}))}function pr(t){return t[t.length-1]||{}}const vn="<anonymous>";function lt(t){try{return!t||typeof t!="function"?vn:t.name||vn}catch{return vn}}function eo(t){const e=t.exception;if(e){const r=[];try{return e.values.forEach(n=>{n.stacktrace.frames&&r.push(...n.stacktrace.frames)}),r}catch{return}}}const gr={},to={};function bt(t,e){gr[t]=gr[t]||[],gr[t].push(e)}function Et(t,e){if(!to[t]){to[t]=!0;try{e()}catch(r){yt&&oe.error(`Error while instrumenting ${t}`,r)}}}function Ve(t,e){const r=t&&gr[t];if(r)for(const n of r)try{n(e)}catch(i){yt&&oe.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${lt(n)}
Error:`,i)}}let mn=null;function rc(t){const e="error";bt(e,t),Et(e,nc)}function nc(){mn=de.onerror,de.onerror=function(t,e,r,n,i){return Ve("error",{column:n,error:i,line:r,msg:t,url:e}),mn?mn.apply(this,arguments):!1},de.onerror.__SENTRY_INSTRUMENTED__=!0}let yn=null;function ic(t){const e="unhandledrejection";bt(e,t),Et(e,oc)}function oc(){yn=de.onunhandledrejection,de.onunhandledrejection=function(t){return Ve("unhandledrejection",t),yn?yn.apply(this,arguments):!0},de.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function vr(){return _n(de),de}function _n(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||ct,e[ct]=e[ct]||{}}const ro=Object.prototype.toString;function bn(t){switch(ro.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return wt(t,Error)}}function Rt(t,e){return ro.call(t)===`[object ${e}]`}function no(t){return Rt(t,"ErrorEvent")}function io(t){return Rt(t,"DOMError")}function sc(t){return Rt(t,"DOMException")}function nt(t){return Rt(t,"String")}function En(t){return typeof t=="object"&&t!==null&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function wn(t){return t===null||En(t)||typeof t!="object"&&typeof t!="function"}function Pt(t){return Rt(t,"Object")}function mr(t){return typeof Event<"u"&&wt(t,Event)}function ac(t){return typeof Element<"u"&&wt(t,Element)}function uc(t){return Rt(t,"RegExp")}function yr(t){return!!(t&&t.then&&typeof t.then=="function")}function cc(t){return Pt(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function wt(t,e){try{return t instanceof e}catch{return!1}}function oo(t){return!!(typeof t=="object"&&t!==null&&(t.__isVue||t._isVue))}const Sn=de,lc=80;function so(t,e={}){if(!t)return"<unknown>";try{let r=t;const n=5,i=[];let o=0,s=0;const a=" > ",u=a.length;let c;const l=Array.isArray(e)?e:e.keyAttrs,d=!Array.isArray(e)&&e.maxStringLength||lc;for(;r&&o++<n&&(c=dc(r,l),!(c==="html"||o>1&&s+i.length*u+c.length>=d));)i.push(c),s+=c.length,r=r.parentNode;return i.reverse().join(a)}catch{return"<unknown>"}}function dc(t,e){const r=t,n=[];if(!r||!r.tagName)return"";if(Sn.HTMLElement&&r instanceof HTMLElement&&r.dataset){if(r.dataset.sentryComponent)return r.dataset.sentryComponent;if(r.dataset.sentryElement)return r.dataset.sentryElement}n.push(r.tagName.toLowerCase());const i=e&&e.length?e.filter(s=>r.getAttribute(s)).map(s=>[s,r.getAttribute(s)]):null;if(i&&i.length)i.forEach(s=>{n.push(`[${s[0]}="${s[1]}"]`)});else{r.id&&n.push(`#${r.id}`);const s=r.className;if(s&&nt(s)){const a=s.split(/\s+/);for(const u of a)n.push(`.${u}`)}}const o=["aria-label","type","name","title","alt"];for(const s of o){const a=r.getAttribute(s);a&&n.push(`[${s}="${a}"]`)}return n.join("")}function fc(){try{return Sn.document.location.href}catch{return""}}function hc(t){if(!Sn.HTMLElement)return null;let e=t;const r=5;for(let n=0;n<r;n++){if(!e)return null;if(e instanceof HTMLElement){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}e=e.parentNode}return null}function Ot(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function ao(t,e){if(!Array.isArray(t))return"";const r=[];for(let n=0;n<t.length;n++){const i=t[n];try{oo(i)?r.push("[VueViewModel]"):r.push(String(i))}catch{r.push("[value cannot be serialized]")}}return r.join(e)}function pc(t,e,r=!1){return nt(t)?uc(e)?e.test(t):nt(e)?r?t===e:t.includes(e):!1:!1}function _r(t,e=[],r=!1){return e.some(n=>pc(t,n,r))}function Be(t,e,r){if(!(e in t))return;const n=t[e],i=r(n);typeof i=="function"&&uo(i,n);try{t[e]=i}catch{yt&&oe.log(`Failed to replace method "${e}" in object`,t)}}function St(t,e,r){try{Object.defineProperty(t,e,{value:r,writable:!0,configurable:!0})}catch{yt&&oe.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function uo(t,e){try{const r=e.prototype||{};t.prototype=e.prototype=r,St(t,"__sentry_original__",e)}catch{}}function Tn(t){return t.__sentry_original__}function co(t){if(bn(t))return{message:t.message,name:t.name,stack:t.stack,...fo(t)};if(mr(t)){const e={type:t.type,target:lo(t.target),currentTarget:lo(t.currentTarget),...fo(t)};return typeof CustomEvent<"u"&&wt(t,CustomEvent)&&(e.detail=t.detail),e}else return t}function lo(t){try{return ac(t)?so(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}}function fo(t){if(typeof t=="object"&&t!==null){const e={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}else return{}}function gc(t,e=40){const r=Object.keys(co(t));r.sort();const n=r[0];if(!n)return"[object has no keys]";if(n.length>=e)return Ot(n,e);for(let i=r.length;i>0;i--){const o=r.slice(0,i).join(", ");if(!(o.length>e))return i===r.length?o:Ot(o,e)}return""}function qe(t){return An(t,new Map)}function An(t,e){if(vc(t)){const r=e.get(t);if(r!==void 0)return r;const n={};e.set(t,n);for(const i of Object.getOwnPropertyNames(t))typeof t[i]<"u"&&(n[i]=An(t[i],e));return n}if(Array.isArray(t)){const r=e.get(t);if(r!==void 0)return r;const n=[];return e.set(t,n),t.forEach(i=>{n.push(An(i,e))}),n}return t}function vc(t){if(!Pt(t))return!1;try{const e=Object.getPrototypeOf(t).constructor.name;return!e||e==="Object"}catch{return!0}}const ho=1e3;function Gt(){return Date.now()/ho}function mc(){const{performance:t}=de;if(!t||!t.now)return Gt;const e=Date.now()-t.now(),r=t.timeOrigin==null?e:t.timeOrigin;return()=>(r+t.now())/ho}const it=mc();(()=>{const{performance:t}=de;if(!t||!t.now)return;const e=3600*1e3,r=t.now(),n=Date.now(),i=t.timeOrigin?Math.abs(t.timeOrigin+r-n):e,o=i<e,s=t.timing&&t.timing.navigationStart,u=typeof s=="number"?Math.abs(s+r-n):e,c=u<e;return o||c?i<=u?t.timeOrigin:s:n})();function We(){const t=de,e=t.crypto||t.msCrypto;let r=()=>Math.random()*16;try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(r=()=>{const n=new Uint8Array(1);return e.getRandomValues(n),n[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,n=>(n^(r()&15)>>n/4).toString(16))}function po(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function dt(t){const{message:e,event_id:r}=t;if(e)return e;const n=po(t);return n?n.type&&n.value?`${n.type}: ${n.value}`:n.type||n.value||r||"<unknown>":r||"<unknown>"}function kn(t,e,r){const n=t.exception=t.exception||{},i=n.values=n.values||[],o=i[0]=i[0]||{};o.value||(o.value=e||""),o.type||(o.type="Error")}function Dt(t,e){const r=po(t);if(!r)return;const n={type:"generic",handled:!0},i=r.mechanism;if(r.mechanism={...n,...i,...e},e&&"data"in e){const o={...i&&i.data,...e.data};r.mechanism.data=o}}function go(t){if(yc(t))return!0;try{St(t,"__sentry_captured__",!0)}catch{}return!1}function yc(t){try{return t.__sentry_captured__}catch{}}var ot;(function(t){t[t.PENDING=0]="PENDING";const r=1;t[t.RESOLVED=r]="RESOLVED";const n=2;t[t.REJECTED=n]="REJECTED"})(ot||(ot={}));function Tt(t){return new He(e=>{e(t)})}function br(t){return new He((e,r)=>{r(t)})}class He{constructor(e){He.prototype.__init.call(this),He.prototype.__init2.call(this),He.prototype.__init3.call(this),He.prototype.__init4.call(this),this._state=ot.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(r){this._reject(r)}}then(e,r){return new He((n,i)=>{this._handlers.push([!1,o=>{if(!e)n(o);else try{n(e(o))}catch(s){i(s)}},o=>{if(!r)i(o);else try{n(r(o))}catch(s){i(s)}}]),this._executeHandlers()})}catch(e){return this.then(r=>r,e)}finally(e){return new He((r,n)=>{let i,o;return this.then(s=>{o=!1,i=s,e&&e()},s=>{o=!0,i=s,e&&e()}).then(()=>{if(o){n(i);return}r(i)})})}__init(){this._resolve=e=>{this._setResult(ot.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(ot.REJECTED,e)}}__init3(){this._setResult=(e,r)=>{if(this._state===ot.PENDING){if(yr(r)){r.then(this._resolve,this._reject);return}this._state=e,this._value=r,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===ot.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(r=>{r[0]||(this._state===ot.RESOLVED&&r[1](this._value),this._state===ot.REJECTED&&r[2](this._value),r[0]=!0)})}}}function _c(t){const e=it(),r={sid:We(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Ec(r)};return t&&Lt(r,t),r}function Lt(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||it(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:We()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const r=t.timestamp-t.started;t.duration=r>=0?r:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function bc(t,e){let r={};t.status==="ok"&&(r={status:"exited"}),Lt(t,r)}function Ec(t){return qe({sid:`${t.sid}`,init:t.init,started:new Date(t.started*1e3).toISOString(),timestamp:new Date(t.timestamp*1e3).toISOString(),status:t.status,errors:t.errors,did:typeof t.did=="number"||typeof t.did=="string"?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}})}function vo(){return We()}function xn(){return We().substring(16)}function Er(t,e,r=2){if(!e||typeof e!="object"||r<=0)return e;if(t&&e&&Object.keys(e).length===0)return t;const n={...t};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=Er(n[i],e[i],r-1));return n}const In="_sentrySpan";function mo(t,e){e?St(t,In,e):delete t[In]}function yo(t){return t[In]}const wc=100;class Cn{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:vo(),spanId:xn()}}clone(){const e=new Cn;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,mo(e,yo(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Lt(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,r){return this._tags={...this._tags,[e]:r},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,r){return this._extra={...this._extra,[e]:r},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,r){return r===null?delete this._contexts[e]:this._contexts[e]=r,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const r=typeof e=="function"?e(this):e,[n,i]=r instanceof ft?[r.getScopeData(),r.getRequestSession()]:Pt(r)?[e,e.requestSession]:[],{tags:o,extra:s,user:a,contexts:u,level:c,fingerprint:l=[],propagationContext:d}=n||{};return this._tags={...this._tags,...o},this._extra={...this._extra,...s},this._contexts={...this._contexts,...u},a&&Object.keys(a).length&&(this._user=a),c&&(this._level=c),l.length&&(this._fingerprint=l),d&&(this._propagationContext=d),i&&(this._requestSession=i),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,mo(this,void 0),this._attachments=[],this.setPropagationContext({traceId:vo()}),this._notifyScopeListeners(),this}addBreadcrumb(e,r){const n=typeof r=="number"?r:wc;if(n<=0)return this;const i={timestamp:Gt(),...e};return this._breadcrumbs.push(i),this._breadcrumbs.length>n&&(this._breadcrumbs=this._breadcrumbs.slice(-n),this._client&&this._client.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:yo(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=Er(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext={spanId:xn(),...e},this}getPropagationContext(){return this._propagationContext}captureException(e,r){const n=r&&r.event_id?r.event_id:We();if(!this._client)return oe.warn("No client configured on scope - will not capture exception!"),n;const i=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:i,...r,event_id:n},this),n}captureMessage(e,r,n){const i=n&&n.event_id?n.event_id:We();if(!this._client)return oe.warn("No client configured on scope - will not capture message!"),i;const o=new Error(e);return this._client.captureMessage(e,r,{originalException:e,syntheticException:o,...n,event_id:i},this),i}captureEvent(e,r){const n=r&&r.event_id?r.event_id:We();return this._client?(this._client.captureEvent(e,{...r,event_id:n},this),n):(oe.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}const ft=Cn;function Sc(){return fr("defaultCurrentScope",()=>new ft)}function Tc(){return fr("defaultIsolationScope",()=>new ft)}class Ac{constructor(e,r){let n;e?n=e:n=new ft;let i;r?i=r:i=new ft,this._stack=[{scope:n}],this._isolationScope=i}withScope(e){const r=this._pushScope();let n;try{n=e(r)}catch(i){throw this._popScope(),i}return yr(n)?n.then(i=>(this._popScope(),i),i=>{throw this._popScope(),i}):(this._popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function Nt(){const t=vr(),e=_n(t);return e.stack=e.stack||new Ac(Sc(),Tc())}function kc(t){return Nt().withScope(t)}function xc(t,e){const r=Nt();return r.withScope(()=>(r.getStackTop().scope=t,e(t)))}function _o(t){return Nt().withScope(()=>t(Nt().getIsolationScope()))}function Ic(){return{withIsolationScope:_o,withScope:kc,withSetScope:xc,withSetIsolationScope:(t,e)=>_o(e),getCurrentScope:()=>Nt().getScope(),getIsolationScope:()=>Nt().getIsolationScope()}}function Rn(t){const e=_n(t);return e.acs?e.acs:Ic()}function At(){const t=vr();return Rn(t).getCurrentScope()}function Vt(){const t=vr();return Rn(t).getIsolationScope()}function Cc(){return fr("globalScope",()=>new ft)}function Rc(...t){const e=vr(),r=Rn(e);if(t.length===2){const[n,i]=t;return n?r.withSetScope(n,i):r.withScope(i)}return r.withScope(t[0])}function Re(){return At().getClient()}function Pc(t){const e=t.getPropagationContext(),{traceId:r,spanId:n,parentSpanId:i}=e;return qe({trace_id:r,span_id:n,parent_span_id:i})}const Oc="_sentryMetrics";function Dc(t){const e=t[Oc];if(!e)return;const r={};for(const[,[n,i]]of e)(r[n]||(r[n]=[])).push(qe(i));return r}const Lc="sentry.source",Nc="sentry.sample_rate",Mc="sentry.op",Uc="sentry.origin",Fc=0,Bc=1,zc="sentry-",jc=/^sentry-/;function $c(t){const e=qc(t);if(!e)return;const r=Object.entries(e).reduce((n,[i,o])=>{if(i.match(jc)){const s=i.slice(zc.length);n[s]=o}return n},{});if(Object.keys(r).length>0)return r}function qc(t){if(!(!t||!nt(t)&&!Array.isArray(t)))return Array.isArray(t)?t.reduce((e,r)=>{const n=bo(r);return Object.entries(n).forEach(([i,o])=>{e[i]=o}),e},{}):bo(t)}function bo(t){return t.split(",").map(e=>e.split("=").map(r=>decodeURIComponent(r.trim()))).reduce((e,[r,n])=>(r&&n&&(e[r]=n),e),{})}const Wc=1;let Eo=!1;function Hc(t){const{spanId:e,traceId:r,isRemote:n}=t.spanContext(),i=n?e:Pn(t).parent_span_id,o=n?xn():e;return qe({parent_span_id:i,span_id:o,trace_id:r})}function wo(t){return typeof t=="number"?So(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?So(t.getTime()):it()}function So(t){return t>9999999999?t/1e3:t}function Pn(t){if(Vc(t))return t.getSpanJSON();try{const{spanId:e,traceId:r}=t.spanContext();if(Gc(t)){const{attributes:n,startTime:i,name:o,endTime:s,parentSpanId:a,status:u}=t;return qe({span_id:e,trace_id:r,data:n,description:o,parent_span_id:a,start_timestamp:wo(i),timestamp:wo(s)||void 0,status:Yc(u),op:n[Mc],origin:n[Uc],_metrics_summary:Dc(t)})}return{span_id:e,trace_id:r}}catch{return{}}}function Gc(t){const e=t;return!!e.attributes&&!!e.startTime&&!!e.name&&!!e.endTime&&!!e.status}function Vc(t){return typeof t.getSpanJSON=="function"}function Kc(t){const{traceFlags:e}=t.spanContext();return e===Wc}function Yc(t){if(!(!t||t.code===Fc))return t.code===Bc?"ok":t.message||"unknown_error"}const Zc="_sentryRootSpan";function To(t){return t[Zc]||t}function Xc(){Eo||(Ht(()=>{console.warn("[Sentry] Deprecation warning: Returning null from `beforeSendSpan` will be disallowed from SDK version 9.0.0 onwards. The callback will only support mutating spans. To drop certain spans, configure the respective integrations directly.")}),Eo=!0)}function Jc(t){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=Re(),r=e&&e.getOptions();return!!r&&(r.enableTracing||"tracesSampleRate"in r||"tracesSampler"in r)}const On="production",Qc="_frozenDsc";function Ao(t,e){const r=e.getOptions(),{publicKey:n}=e.getDsn()||{},i=qe({environment:r.environment||On,release:r.release,public_key:n,trace_id:t});return e.emit("createDsc",i),i}function el(t,e){const r=e.getPropagationContext();return r.dsc||Ao(r.traceId,t)}function tl(t){const e=Re();if(!e)return{};const r=To(t),n=r[Qc];if(n)return n;const i=r.spanContext().traceState,o=i&&i.get("sentry.dsc"),s=o&&$c(o);if(s)return s;const a=Ao(t.spanContext().traceId,e),u=Pn(r),c=u.data||{},l=c[Nc];l!=null&&(a.sample_rate=`${l}`);const d=c[Lc],h=u.description;return d!=="url"&&h&&(a.transaction=h),Jc()&&(a.sampled=String(Kc(r))),e.emit("createDsc",a,r),a}function rl(t){if(typeof t=="boolean")return Number(t);const e=typeof t=="string"?parseFloat(t):t;if(typeof e!="number"||isNaN(e)||e<0||e>1){he&&oe.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(t)} of type ${JSON.stringify(typeof t)}.`);return}return e}const nl=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function il(t){return t==="http"||t==="https"}function wr(t,e=!1){const{host:r,path:n,pass:i,port:o,projectId:s,protocol:a,publicKey:u}=t;return`${a}://${u}${e&&i?`:${i}`:""}@${r}${o?`:${o}`:""}/${n&&`${n}/`}${s}`}function ol(t){const e=nl.exec(t);if(!e){Ht(()=>{console.error(`Invalid Sentry Dsn: ${t}`)});return}const[r,n,i="",o="",s="",a=""]=e.slice(1);let u="",c=a;const l=c.split("/");if(l.length>1&&(u=l.slice(0,-1).join("/"),c=l.pop()),c){const d=c.match(/^\d+/);d&&(c=d[0])}return ko({host:o,pass:i,path:u,projectId:c,port:s,protocol:r,publicKey:n})}function ko(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function sl(t){if(!yt)return!0;const{port:e,projectId:r,protocol:n}=t;return["protocol","publicKey","host","projectId"].find(s=>t[s]?!1:(oe.error(`Invalid Sentry Dsn: ${s} missing`),!0))?!1:r.match(/^\d+$/)?il(n)?e&&isNaN(parseInt(e,10))?(oe.error(`Invalid Sentry Dsn: Invalid port ${e}`),!1):!0:(oe.error(`Invalid Sentry Dsn: Invalid protocol ${n}`),!1):(oe.error(`Invalid Sentry Dsn: Invalid projectId ${r}`),!1)}function al(t){const e=typeof t=="string"?ol(t):ko(t);if(!(!e||!sl(e)))return e}function ul(){const t=typeof WeakSet=="function",e=t?new WeakSet:[];function r(i){if(t)return e.has(i)?!0:(e.add(i),!1);for(let o=0;o<e.length;o++)if(e[o]===i)return!0;return e.push(i),!1}function n(i){if(t)e.delete(i);else for(let o=0;o<e.length;o++)if(e[o]===i){e.splice(o,1);break}}return[r,n]}function st(t,e=100,r=1/0){try{return Dn("",t,e,r)}catch(n){return{ERROR:`**non-serializable** (${n})`}}}function xo(t,e=3,r=100*1024){const n=st(t,e);return fl(n)>r?xo(t,e-1,r):n}function Dn(t,e,r=1/0,n=1/0,i=ul()){const[o,s]=i;if(e==null||["boolean","string"].includes(typeof e)||typeof e=="number"&&Number.isFinite(e))return e;const a=cl(t,e);if(!a.startsWith("[object "))return a;if(e.__sentry_skip_normalization__)return e;const u=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:r;if(u===0)return a.replace("object ","");if(o(e))return"[Circular ~]";const c=e;if(c&&typeof c.toJSON=="function")try{const f=c.toJSON();return Dn("",f,u-1,n,i)}catch{}const l=Array.isArray(e)?[]:{};let d=0;const h=co(e);for(const f in h){if(!Object.prototype.hasOwnProperty.call(h,f))continue;if(d>=n){l[f]="[MaxProperties ~]";break}const p=h[f];l[f]=Dn(f,p,u-1,n,i),d++}return s(e),l}function cl(t,e){try{if(t==="domain"&&e&&typeof e=="object"&&e._events)return"[Domain]";if(t==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&e===global)return"[Global]";if(typeof window<"u"&&e===window)return"[Window]";if(typeof document<"u"&&e===document)return"[Document]";if(oo(e))return"[VueViewModel]";if(cc(e))return"[SyntheticEvent]";if(typeof e=="number"&&!Number.isFinite(e))return`[${e}]`;if(typeof e=="function")return`[Function: ${lt(e)}]`;if(typeof e=="symbol")return`[${String(e)}]`;if(typeof e=="bigint")return`[BigInt: ${String(e)}]`;const r=ll(e);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(r){return`**non-serializable** (${r})`}}function ll(t){const e=Object.getPrototypeOf(t);return e?e.constructor.name:"null prototype"}function dl(t){return~-encodeURI(t).split(/%..|./).length}function fl(t){return dl(JSON.stringify(t))}function Kt(t,e=[]){return[t,e]}function hl(t,e){const[r,n]=t;return[r,[...n,e]]}function Io(t,e){const r=t[1];for(const n of r){const i=n[0].type;if(e(n,i))return!0}return!1}function Ln(t){return de.__SENTRY__&&de.__SENTRY__.encodePolyfill?de.__SENTRY__.encodePolyfill(t):new TextEncoder().encode(t)}function pl(t){const[e,r]=t;let n=JSON.stringify(e);function i(o){typeof n=="string"?n=typeof o=="string"?n+o:[Ln(n),o]:n.push(typeof o=="string"?Ln(o):o)}for(const o of r){const[s,a]=o;if(i(`
${JSON.stringify(s)}
`),typeof a=="string"||a instanceof Uint8Array)i(a);else{let u;try{u=JSON.stringify(a)}catch{u=JSON.stringify(st(a))}i(u)}}return typeof n=="string"?n:gl(n)}function gl(t){const e=t.reduce((i,o)=>i+o.length,0),r=new Uint8Array(e);let n=0;for(const i of t)r.set(i,n),n+=i.length;return r}function vl(t){const e=typeof t.data=="string"?Ln(t.data):t.data;return[qe({type:"attachment",length:e.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),e]}const ml={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket",raw_security:"security"};function Co(t){return ml[t]}function Ro(t){if(!t||!t.sdk)return;const{name:e,version:r}=t.sdk;return{name:e,version:r}}function yl(t,e,r,n){const i=t.sdkProcessingMetadata&&t.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:t.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!r&&n&&{dsn:wr(n)},...i&&{trace:qe({...i})}}}function _l(t,e){return e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=[...t.sdk.integrations||[],...e.integrations||[]],t.sdk.packages=[...t.sdk.packages||[],...e.packages||[]]),t}function bl(t,e,r,n){const i=Ro(r),o={sent_at:new Date().toISOString(),...i&&{sdk:i},...!!n&&e&&{dsn:wr(e)}},s="aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()];return Kt(o,[s])}function El(t,e,r,n){const i=Ro(r),o=t.type&&t.type!=="replay_event"?t.type:"event";_l(t,r&&r.sdk);const s=yl(t,i,n,e);return delete t.sdkProcessingMetadata,Kt(s,[[{type:o},t]])}function Nn(t,e,r,n=0){return new He((i,o)=>{const s=t[n];if(e===null||typeof s!="function")i(e);else{const a=s({...e},r);he&&s.id&&a===null&&oe.log(`Event processor "${s.id}" dropped event`),yr(a)?a.then(u=>Nn(t,u,r,n+1).then(i)).then(null,o):Nn(t,a,r,n+1).then(i).then(null,o)}})}let Sr,Po,Tr;function wl(t){const e=de._sentryDebugIds;if(!e)return{};const r=Object.keys(e);return Tr&&r.length===Po||(Po=r.length,Tr=r.reduce((n,i)=>{Sr||(Sr={});const o=Sr[i];if(o)n[o[0]]=o[1];else{const s=t(i);for(let a=s.length-1;a>=0;a--){const u=s[a],c=u&&u.filename,l=e[i];if(c&&l){n[c]=l,Sr[i]=[c,l];break}}}return n},{})),Tr}function Sl(t,e){const{fingerprint:r,span:n,breadcrumbs:i,sdkProcessingMetadata:o}=e;Tl(t,e),n&&xl(t,n),Il(t,r),Al(t,i),kl(t,o)}function Oo(t,e){const{extra:r,tags:n,user:i,contexts:o,level:s,sdkProcessingMetadata:a,breadcrumbs:u,fingerprint:c,eventProcessors:l,attachments:d,propagationContext:h,transactionName:f,span:p}=e;Ar(t,"extra",r),Ar(t,"tags",n),Ar(t,"user",i),Ar(t,"contexts",o),t.sdkProcessingMetadata=Er(t.sdkProcessingMetadata,a,2),s&&(t.level=s),f&&(t.transactionName=f),p&&(t.span=p),u.length&&(t.breadcrumbs=[...t.breadcrumbs,...u]),c.length&&(t.fingerprint=[...t.fingerprint,...c]),l.length&&(t.eventProcessors=[...t.eventProcessors,...l]),d.length&&(t.attachments=[...t.attachments,...d]),t.propagationContext={...t.propagationContext,...h}}function Ar(t,e,r){t[e]=Er(t[e],r,1)}function Tl(t,e){const{extra:r,tags:n,user:i,contexts:o,level:s,transactionName:a}=e,u=qe(r);u&&Object.keys(u).length&&(t.extra={...u,...t.extra});const c=qe(n);c&&Object.keys(c).length&&(t.tags={...c,...t.tags});const l=qe(i);l&&Object.keys(l).length&&(t.user={...l,...t.user});const d=qe(o);d&&Object.keys(d).length&&(t.contexts={...d,...t.contexts}),s&&(t.level=s),a&&t.type!=="transaction"&&(t.transaction=a)}function Al(t,e){const r=[...t.breadcrumbs||[],...e];t.breadcrumbs=r.length?r:void 0}function kl(t,e){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e}}function xl(t,e){t.contexts={trace:Hc(e),...t.contexts},t.sdkProcessingMetadata={dynamicSamplingContext:tl(e),...t.sdkProcessingMetadata};const r=To(e),n=Pn(r).description;n&&!t.transaction&&t.type==="transaction"&&(t.transaction=n)}function Il(t,e){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],e&&(t.fingerprint=t.fingerprint.concat(e)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint}function Cl(t,e,r,n,i,o){const{normalizeDepth:s=3,normalizeMaxBreadth:a=1e3}=t,u={...e,event_id:e.event_id||r.event_id||We(),timestamp:e.timestamp||Gt()},c=r.integrations||t.integrations.map(m=>m.name);Rl(u,t),Dl(u,c),i&&i.emit("applyFrameMetadata",e),e.type===void 0&&Pl(u,t.stackParser);const l=Nl(n,r.captureContext);r.mechanism&&Dt(u,r.mechanism);const d=i?i.getEventProcessors():[],h=Cc().getScopeData();if(o){const m=o.getScopeData();Oo(h,m)}if(l){const m=l.getScopeData();Oo(h,m)}const f=[...r.attachments||[],...h.attachments];f.length&&(r.attachments=f),Sl(u,h);const p=[...d,...h.eventProcessors];return Nn(p,u,r).then(m=>(m&&Ol(m),typeof s=="number"&&s>0?Ll(m,s,a):m))}function Rl(t,e){const{environment:r,release:n,dist:i,maxValueLength:o=250}=e;t.environment=t.environment||r||On,!t.release&&n&&(t.release=n),!t.dist&&i&&(t.dist=i),t.message&&(t.message=Ot(t.message,o));const s=t.exception&&t.exception.values&&t.exception.values[0];s&&s.value&&(s.value=Ot(s.value,o));const a=t.request;a&&a.url&&(a.url=Ot(a.url,o))}function Pl(t,e){const r=wl(e);try{t.exception.values.forEach(n=>{n.stacktrace.frames.forEach(i=>{r&&i.filename&&(i.debug_id=r[i.filename])})})}catch{}}function Ol(t){const e={};try{t.exception.values.forEach(n=>{n.stacktrace.frames.forEach(i=>{i.debug_id&&(i.abs_path?e[i.abs_path]=i.debug_id:i.filename&&(e[i.filename]=i.debug_id),delete i.debug_id)})})}catch{}if(Object.keys(e).length===0)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const r=t.debug_meta.images;Object.entries(e).forEach(([n,i])=>{r.push({type:"sourcemap",code_file:n,debug_id:i})})}function Dl(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}function Ll(t,e,r){if(!t)return null;const n={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(i=>({...i,...i.data&&{data:st(i.data,e,r)}}))},...t.user&&{user:st(t.user,e,r)},...t.contexts&&{contexts:st(t.contexts,e,r)},...t.extra&&{extra:st(t.extra,e,r)}};return t.contexts&&t.contexts.trace&&n.contexts&&(n.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(n.contexts.trace.data=st(t.contexts.trace.data,e,r))),t.spans&&(n.spans=t.spans.map(i=>({...i,...i.data&&{data:st(i.data,e,r)}}))),t.contexts&&t.contexts.flags&&n.contexts&&(n.contexts.flags=st(t.contexts.flags,3,r)),n}function Nl(t,e){if(!e)return t;const r=t?t.clone():new ft;return r.update(e),r}function y0(t){}function Ml(t,e){return At().captureException(t,void 0)}function Do(t,e){return At().captureEvent(t,e)}function Lo(t){const e=Re(),r=Vt(),n=At(),{release:i,environment:o=On}=e&&e.getOptions()||{},{userAgent:s}=de.navigator||{},a=_c({release:i,environment:o,user:n.getUser()||r.getUser(),...s&&{userAgent:s},...t}),u=r.getSession();return u&&u.status==="ok"&&Lt(u,{status:"exited"}),No(),r.setSession(a),n.setSession(a),a}function No(){const t=Vt(),e=At(),r=e.getSession()||t.getSession();r&&bc(r),Mo(),t.setSession(),e.setSession()}function Mo(){const t=Vt(),e=At(),r=Re(),n=e.getSession()||t.getSession();n&&r&&r.captureSession(n)}function Uo(t=!1){if(t){No();return}Mo()}const Ul="7";function Fl(t){const e=t.protocol?`${t.protocol}:`:"",r=t.port?`:${t.port}`:"";return`${e}//${t.host}${r}${t.path?`/${t.path}`:""}/api/`}function Bl(t){return`${Fl(t)}${t.projectId}/envelope/`}function zl(t,e){const r={sentry_version:Ul};return t.publicKey&&(r.sentry_key=t.publicKey),e&&(r.sentry_client=`${e.name}/${e.version}`),new URLSearchParams(r).toString()}function jl(t,e,r){return e||`${Bl(t)}?${zl(t,r)}`}const Fo=[];function $l(t,e){const r={};return e.forEach(n=>{n&&zo(t,n,r)}),r}function Bo(t,e){for(const r of e)r&&r.afterAllSetup&&r.afterAllSetup(t)}function zo(t,e,r){if(r[e.name]){he&&oe.log(`Integration skipped because it was already installed: ${e.name}`);return}if(r[e.name]=e,Fo.indexOf(e.name)===-1&&typeof e.setupOnce=="function"&&(e.setupOnce(),Fo.push(e.name)),e.setup&&typeof e.setup=="function"&&e.setup(t),typeof e.preprocessEvent=="function"){const n=e.preprocessEvent.bind(e);t.on("preprocessEvent",(i,o)=>n(i,o,t))}if(typeof e.processEvent=="function"){const n=e.processEvent.bind(e),i=Object.assign((o,s)=>n(o,s,t),{id:e.name});t.addEventProcessor(i)}he&&oe.log(`Integration installed: ${e.name}`)}function _0(t){return t}function ql(t,e,r){const n=[{type:"client_report"},{timestamp:Gt(),discarded_events:t}];return Kt(e?{dsn:e}:{},[n])}class Ke extends Error{constructor(e,r="warn"){super(e),this.message=e,this.logLevel=r}}const jo="Not capturing exception because it's already been captured.";class Wl{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=al(e.dsn):he&&oe.warn("No DSN provided, client will not send events."),this._dsn){const i=jl(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:i})}const n=["enableTracing","tracesSampleRate","tracesSampler"].find(i=>i in e&&e[i]==null);n&&Ht(()=>{console.warn(`[Sentry] Deprecation warning: \`${n}\` is set to undefined, which leads to tracing being enabled. In v9, a value of \`undefined\` will result in tracing being disabled.`)})}captureException(e,r,n){const i=We();if(go(e))return he&&oe.log(jo),i;const o={event_id:i,...r};return this._process(this.eventFromException(e,o).then(s=>this._captureEvent(s,o,n))),o.event_id}captureMessage(e,r,n,i){const o={event_id:We(),...n},s=En(e)?e:String(e),a=wn(e)?this.eventFromMessage(s,r,o):this.eventFromException(e,o);return this._process(a.then(u=>this._captureEvent(u,o,i))),o.event_id}captureEvent(e,r,n){const i=We();if(r&&r.originalException&&go(r.originalException))return he&&oe.log(jo),i;const o={event_id:i,...r},a=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,o,a||n)),o.event_id}captureSession(e){typeof e.release!="string"?he&&oe.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),Lt(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const r=this._transport;return r?(this.emit("flush"),this._isClientDoneProcessing(e).then(n=>r.flush(e).then(i=>n&&i))):Tt(!0)}close(e){return this.flush(e).then(r=>(this.getOptions().enabled=!1,this.emit("close"),r))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const r=this._integrations[e.name];zo(this,e,this._integrations),r||Bo(this,[e])}sendEvent(e,r={}){this.emit("beforeSendEvent",e,r);let n=El(e,this._dsn,this._options._metadata,this._options.tunnel);for(const o of r.attachments||[])n=hl(n,vl(o));const i=this.sendEnvelope(n);i&&i.then(o=>this.emit("afterSendEvent",e,o),null)}sendSession(e){const r=bl(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(r)}recordDroppedEvent(e,r,n){if(this._options.sendClientReports){const i=typeof n=="number"?n:1,o=`${e}:${r}`;he&&oe.log(`Recording outcome: "${o}"${i>1?` (${i} times)`:""}`),this._outcomes[o]=(this._outcomes[o]||0)+i}}on(e,r){const n=this._hooks[e]=this._hooks[e]||[];return n.push(r),()=>{const i=n.indexOf(r);i>-1&&n.splice(i,1)}}emit(e,...r){const n=this._hooks[e];n&&n.forEach(i=>i(...r))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,r=>(he&&oe.error("Error while sending envelope:",r),r)):(he&&oe.error("Transport disabled"),Tt({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=$l(this,e),Bo(this,e)}_updateSessionFromEvent(e,r){let n=r.level==="fatal",i=!1;const o=r.exception&&r.exception.values;if(o){i=!0;for(const u of o){const c=u.mechanism;if(c&&c.handled===!1){n=!0;break}}}const s=e.status==="ok";(s&&e.errors===0||s&&n)&&(Lt(e,{...n&&{status:"crashed"},errors:e.errors||Number(i||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new He(r=>{let n=0;const i=1,o=setInterval(()=>{this._numProcessing==0?(clearInterval(o),r(!0)):(n+=i,e&&n>=e&&(clearInterval(o),r(!1)))},i)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,r,n=At(),i=Vt()){const o=this.getOptions(),s=Object.keys(this._integrations);return!r.integrations&&s.length>0&&(r.integrations=s),this.emit("preprocessEvent",e,r),e.type||i.setLastEventId(e.event_id||r.event_id),Cl(o,e,r,n,this,i).then(a=>{if(a===null)return a;a.contexts={trace:Pc(n),...a.contexts};const u=el(this,n);return a.sdkProcessingMetadata={dynamicSamplingContext:u,...a.sdkProcessingMetadata},a})}_captureEvent(e,r={},n){return this._processEvent(e,r,n).then(i=>i.event_id,i=>{he&&(i instanceof Ke&&i.logLevel==="log"?oe.log(i.message):oe.warn(i))})}_processEvent(e,r,n){const i=this.getOptions(),{sampleRate:o}=i,s=qo(e),a=$o(e),u=e.type||"error",c=`before send for type \`${u}\``,l=typeof o>"u"?void 0:rl(o);if(a&&typeof l=="number"&&Math.random()>l)return this.recordDroppedEvent("sample_rate","error",e),br(new Ke(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const d=u==="replay_event"?"replay":u,f=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,r,n,f).then(p=>{if(p===null)throw this.recordDroppedEvent("event_processor",d,e),new Ke("An event processor returned `null`, will not send event.","log");if(r.data&&r.data.__sentry__===!0)return p;const m=Gl(this,i,p,r);return Hl(m,c)}).then(p=>{if(p===null){if(this.recordDroppedEvent("before_send",d,e),s){const b=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",b)}throw new Ke(`${c} returned \`null\`, will not send event.`,"log")}const g=n&&n.getSession();if(!s&&g&&this._updateSessionFromEvent(g,p),s){const v=p.sdkProcessingMetadata&&p.sdkProcessingMetadata.spanCountBeforeProcessing||0,b=p.spans?p.spans.length:0,E=v-b;E>0&&this.recordDroppedEvent("before_send","span",E)}const m=p.transaction_info;if(s&&m&&p.transaction!==e.transaction){const v="custom";p.transaction_info={...m,source:v}}return this.sendEvent(p,r),p}).then(null,p=>{throw p instanceof Ke?p:(this.captureException(p,{data:{__sentry__:!0},originalException:p}),new Ke(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${p}`))})}_process(e){this._numProcessing++,e.then(r=>(this._numProcessing--,r),r=>(this._numProcessing--,r))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map(([r,n])=>{const[i,o]=r.split(":");return{reason:i,category:o,quantity:n}})}_flushOutcomes(){he&&oe.log("Flushing outcomes...");const e=this._clearOutcomes();if(e.length===0){he&&oe.log("No outcomes to send");return}if(!this._dsn){he&&oe.log("No dsn provided, will not send outcomes");return}he&&oe.log("Sending outcomes:",e);const r=ql(e,this._options.tunnel&&wr(this._dsn));this.sendEnvelope(r)}}function Hl(t,e){const r=`${e} must return \`null\` or a valid event.`;if(yr(t))return t.then(n=>{if(!Pt(n)&&n!==null)throw new Ke(r);return n},n=>{throw new Ke(`${e} rejected with ${n}`)});if(!Pt(t)&&t!==null)throw new Ke(r);return t}function Gl(t,e,r,n){const{beforeSend:i,beforeSendTransaction:o,beforeSendSpan:s}=e;if($o(r)&&i)return i(r,n);if(qo(r)){if(r.spans&&s){const a=[];for(const u of r.spans){const c=s(u);c?a.push(c):(Xc(),t.recordDroppedEvent("before_send","span"))}r.spans=a}if(o){if(r.spans){const a=r.spans.length;r.sdkProcessingMetadata={...r.sdkProcessingMetadata,spanCountBeforeProcessing:a}}return o(r,n)}}return r}function $o(t){return t.type===void 0}function qo(t){return t.type==="transaction"}function Vl(t){const e=[];function r(){return t===void 0||e.length<t}function n(s){return e.splice(e.indexOf(s),1)[0]||Promise.resolve(void 0)}function i(s){if(!r())return br(new Ke("Not adding Promise because buffer limit was reached."));const a=s();return e.indexOf(a)===-1&&e.push(a),a.then(()=>n(a)).then(null,()=>n(a).then(null,()=>{})),a}function o(s){return new He((a,u)=>{let c=e.length;if(!c)return a(!0);const l=setTimeout(()=>{s&&s>0&&a(!1)},s);e.forEach(d=>{Tt(d).then(()=>{--c||(clearTimeout(l),a(!0))},u)})})}return{$:e,add:i,drain:o}}const Kl=60*1e3;function Yl(t,e=Date.now()){const r=parseInt(`${t}`,10);if(!isNaN(r))return r*1e3;const n=Date.parse(`${t}`);return isNaN(n)?Kl:n-e}function Zl(t,e){return t[e]||t.all||0}function Xl(t,e,r=Date.now()){return Zl(t,e)>r}function Jl(t,{statusCode:e,headers:r},n=Date.now()){const i={...t},o=r&&r["x-sentry-rate-limits"],s=r&&r["retry-after"];if(o)for(const a of o.trim().split(",")){const[u,c,,,l]=a.split(":",5),d=parseInt(u,10),h=(isNaN(d)?60:d)*1e3;if(!c)i.all=n+h;else for(const f of c.split(";"))f==="metric_bucket"?(!l||l.split(";").includes("custom"))&&(i[f]=n+h):i[f]=n+h}else s?i.all=n+Yl(s,n):e===429&&(i.all=n+60*1e3);return i}const Ql=64;function ed(t,e,r=Vl(t.bufferSize||Ql)){let n={};const i=s=>r.drain(s);function o(s){const a=[];if(Io(s,(d,h)=>{const f=Co(h);if(Xl(n,f)){const p=Wo(d,h);t.recordDroppedEvent("ratelimit_backoff",f,p)}else a.push(d)}),a.length===0)return Tt({});const u=Kt(s[0],a),c=d=>{Io(u,(h,f)=>{const p=Wo(h,f);t.recordDroppedEvent(d,Co(f),p)})},l=()=>e({body:pl(u)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&he&&oe.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),n=Jl(n,d),d),d=>{throw c("network_error"),d});return r.add(l).then(d=>d,d=>{if(d instanceof Ke)return he&&oe.error("Skipped sending event because buffer is full."),c("queue_overflow"),Tt({});throw d})}return{send:o,flush:i}}function Wo(t,e){if(!(e!=="event"&&e!=="transaction"))return Array.isArray(t)?t[1]:void 0}function td(t,e,r=[e],n="npm"){const i=t._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${e}`,packages:r.map(o=>({name:`${n}:@sentry/${o}`,version:ct})),version:ct}),t._metadata=i}const rd=100;function kt(t,e){const r=Re(),n=Vt();if(!r)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:o=rd}=r.getOptions();if(o<=0)return;const a={timestamp:Gt(),...t},u=i?Ht(()=>i(a,e)):a;u!==null&&(r.emit&&r.emit("beforeAddBreadcrumb",u,e),n.addBreadcrumb(u,o))}let Ho;const nd="FunctionToString",Go=new WeakMap,id=(()=>({name:nd,setupOnce(){Ho=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=Tn(this),r=Go.has(Re())&&e!==void 0?e:this;return Ho.apply(r,t)}}catch{}},setup(t){Go.set(t,!0)}})),od=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/],sd="InboundFilters",ad=((t={})=>({name:sd,processEvent(e,r,n){const i=n.getOptions(),o=ud(t,i);return cd(e,o)?null:e}}));function ud(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...t.disableErrorDefaults?[]:od],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[]],ignoreInternal:t.ignoreInternal!==void 0?t.ignoreInternal:!0}}function cd(t,e){return e.ignoreInternal&&gd(t)?(he&&oe.warn(`Event dropped due to being internal Sentry Error.
Event: ${dt(t)}`),!0):ld(t,e.ignoreErrors)?(he&&oe.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${dt(t)}`),!0):md(t)?(he&&oe.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${dt(t)}`),!0):dd(t,e.ignoreTransactions)?(he&&oe.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${dt(t)}`),!0):fd(t,e.denyUrls)?(he&&oe.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${dt(t)}.
Url: ${kr(t)}`),!0):hd(t,e.allowUrls)?!1:(he&&oe.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${dt(t)}.
Url: ${kr(t)}`),!0)}function ld(t,e){return t.type||!e||!e.length?!1:pd(t).some(r=>_r(r,e))}function dd(t,e){if(t.type!=="transaction"||!e||!e.length)return!1;const r=t.transaction;return r?_r(r,e):!1}function fd(t,e){if(!e||!e.length)return!1;const r=kr(t);return r?_r(r,e):!1}function hd(t,e){if(!e||!e.length)return!0;const r=kr(t);return r?_r(r,e):!0}function pd(t){const e=[];t.message&&e.push(t.message);let r;try{r=t.exception.values[t.exception.values.length-1]}catch{}return r&&r.value&&(e.push(r.value),r.type&&e.push(`${r.type}: ${r.value}`)),e}function gd(t){try{return t.exception.values[0].type==="SentryError"}catch{}return!1}function vd(t=[]){for(let e=t.length-1;e>=0;e--){const r=t[e];if(r&&r.filename!=="<anonymous>"&&r.filename!=="[native code]")return r.filename||null}return null}function kr(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch{}return e?vd(e):null}catch{return he&&oe.error(`Cannot extract url for event ${dt(t)}`),null}}function md(t){return t.type||!t.exception||!t.exception.values||t.exception.values.length===0?!1:!t.message&&!t.exception.values.some(e=>e.stacktrace||e.type&&e.type!=="Error"||e.value)}function yd(t,e,r=250,n,i,o,s){if(!o.exception||!o.exception.values||!s||!wt(s.originalException,Error))return;const a=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;a&&(o.exception.values=_d(Mn(t,e,i,s.originalException,n,o.exception.values,a,0),r))}function Mn(t,e,r,n,i,o,s,a){if(o.length>=r+1)return o;let u=[...o];if(wt(n[i],Error)){Vo(s,a);const c=t(e,n[i]),l=u.length;Ko(c,i,l,a),u=Mn(t,e,r,n[i],i,[c,...u],c,l)}return Array.isArray(n.errors)&&n.errors.forEach((c,l)=>{if(wt(c,Error)){Vo(s,a);const d=t(e,c),h=u.length;Ko(d,`errors[${l}]`,h,a),u=Mn(t,e,r,c,i,[d,...u],d,h)}}),u}function Vo(t,e){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,...t.type==="AggregateError"&&{is_exception_group:!0},exception_id:e}}function Ko(t,e,r,n){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:e,exception_id:r,parent_id:n}}function _d(t,e){return t.map(r=>(r.value&&(r.value=Ot(r.value,e)),r))}function Un(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const r=e[6]||"",n=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:r,hash:n,relative:e[5]+r+n}}function bd(t){const e="console";bt(e,t),Et(e,Ed)}function Ed(){"console"in de&&gn.forEach(function(t){t in de.console&&Be(de.console,t,function(e){return hr[t]=e,function(...r){Ve("console",{args:r,level:t});const i=hr[t];i&&i.apply(de.console,r)}})})}function wd(t){return t==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(t)?t:"log"}const Sd="Dedupe",Td=(()=>{let t;return{name:Sd,processEvent(e){if(e.type)return e;try{if(Ad(e,t))return he&&oe.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return t=e}}});function Ad(t,e){return e?!!(kd(t,e)||xd(t,e)):!1}function kd(t,e){const r=t.message,n=e.message;return!(!r&&!n||r&&!n||!r&&n||r!==n||!Zo(t,e)||!Yo(t,e))}function xd(t,e){const r=Xo(e),n=Xo(t);return!(!r||!n||r.type!==n.type||r.value!==n.value||!Zo(t,e)||!Yo(t,e))}function Yo(t,e){let r=eo(t),n=eo(e);if(!r&&!n)return!0;if(r&&!n||!r&&n||(r=r,n=n,n.length!==r.length))return!1;for(let i=0;i<n.length;i++){const o=n[i],s=r[i];if(o.filename!==s.filename||o.lineno!==s.lineno||o.colno!==s.colno||o.function!==s.function)return!1}return!0}function Zo(t,e){let r=t.fingerprint,n=e.fingerprint;if(!r&&!n)return!0;if(r&&!n||!r&&n)return!1;r=r,n=n;try{return r.join("")===n.join("")}catch{return!1}}function Xo(t){return t.exception&&t.exception.values&&t.exception.values[0]}function Jo(t){if(t!==void 0)return t>=400&&t<500?"warning":t>=500?"error":void 0}const Fn=de;function Id(){if(!("fetch"in Fn))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function Bn(t){return t&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function Cd(){if(typeof EdgeRuntime=="string")return!0;if(!Id())return!1;if(Bn(Fn.fetch))return!0;let t=!1;const e=Fn.document;if(e&&typeof e.createElement=="function")try{const r=e.createElement("iframe");r.hidden=!0,e.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(t=Bn(r.contentWindow.fetch)),e.head.removeChild(r)}catch(r){yt&&oe.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",r)}return t}function Rd(t,e){const r="fetch";bt(r,t),Et(r,()=>Pd(void 0,e))}function Pd(t,e=!1){e&&!Cd()||Be(de,"fetch",function(r){return function(...n){const i=new Error,{method:o,url:s}=Od(n),a={args:n,fetchData:{method:o,url:s},startTimestamp:it()*1e3,virtualError:i};return Ve("fetch",{...a}),r.apply(de,n).then(async u=>(Ve("fetch",{...a,endTimestamp:it()*1e3,response:u}),u),u=>{throw Ve("fetch",{...a,endTimestamp:it()*1e3,error:u}),bn(u)&&u.stack===void 0&&(u.stack=i.stack,St(u,"framesToPop",1)),u})}})}function zn(t,e){return!!t&&typeof t=="object"&&!!t[e]}function Qo(t){return typeof t=="string"?t:t?zn(t,"url")?t.url:t.toString?t.toString():"":""}function Od(t){if(t.length===0)return{method:"GET",url:""};if(t.length===2){const[r,n]=t;return{url:Qo(r),method:zn(n,"method")?String(n.method).toUpperCase():"GET"}}const e=t[0];return{url:Qo(e),method:zn(e,"method")?String(e.method).toUpperCase():"GET"}}function Dd(){return"npm"}const xr=de;function Ld(){const t=xr.chrome,e=t&&t.app&&t.app.runtime,r="history"in xr&&!!xr.history.pushState&&!!xr.history.replaceState;return!e&&r}const ke=de;let jn=0;function es(){return jn>0}function Nd(){jn++,setTimeout(()=>{jn--})}function Mt(t,e={}){function r(i){return typeof i=="function"}if(!r(t))return t;try{const i=t.__sentry_wrapped__;if(i)return typeof i=="function"?i:t;if(Tn(t))return t}catch{return t}const n=function(...i){try{const o=i.map(s=>Mt(s,e));return t.apply(this,o)}catch(o){throw Nd(),Rc(s=>{s.addEventProcessor(a=>(e.mechanism&&(kn(a,void 0),Dt(a,e.mechanism)),a.extra={...a.extra,arguments:i},a)),Ml(o)}),o}};try{for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}catch{}uo(n,t),St(t,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get(){return t.name}})}catch{}return n}const Ir=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function $n(t,e){const r=Wn(t,e),n={type:zd(e),value:jd(e)};return r.length&&(n.stacktrace={frames:r}),n.type===void 0&&n.value===""&&(n.value="Unrecoverable error caught"),n}function Md(t,e,r,n){const i=Re(),o=i&&i.getOptions().normalizeDepth,s=Gd(e),a={__serialized__:xo(e,o)};if(s)return{exception:{values:[$n(t,s)]},extra:a};const u={exception:{values:[{type:mr(e)?e.constructor.name:n?"UnhandledRejection":"Error",value:Wd(e,{isUnhandledRejection:n})}]},extra:a};if(r){const c=Wn(t,r);c.length&&(u.exception.values[0].stacktrace={frames:c})}return u}function qn(t,e){return{exception:{values:[$n(t,e)]}}}function Wn(t,e){const r=e.stacktrace||e.stack||"",n=Fd(e),i=Bd(e);try{return t(r,n,i)}catch{}return[]}const Ud=/Minified React error #\d+;/i;function Fd(t){return t&&Ud.test(t.message)?1:0}function Bd(t){return typeof t.framesToPop=="number"?t.framesToPop:0}function ts(t){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?t instanceof WebAssembly.Exception:!1}function zd(t){const e=t&&t.name;return!e&&ts(t)?t.message&&Array.isArray(t.message)&&t.message.length==2?t.message[0]:"WebAssembly.Exception":e}function jd(t){const e=t&&t.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:ts(t)&&Array.isArray(t.message)&&t.message.length==2?t.message[1]:e:"No error message"}function $d(t,e,r,n){const i=r&&r.syntheticException||void 0,o=Hn(t,e,i,n);return Dt(o),o.level="error",r&&r.event_id&&(o.event_id=r.event_id),Tt(o)}function qd(t,e,r="info",n,i){const o=n&&n.syntheticException||void 0,s=Gn(t,e,o,i);return s.level=r,n&&n.event_id&&(s.event_id=n.event_id),Tt(s)}function Hn(t,e,r,n,i){let o;if(no(e)&&e.error)return qn(t,e.error);if(io(e)||sc(e)){const s=e;if("stack"in e)o=qn(t,e);else{const a=s.name||(io(s)?"DOMError":"DOMException"),u=s.message?`${a}: ${s.message}`:a;o=Gn(t,u,r,n),kn(o,u)}return"code"in s&&(o.tags={...o.tags,"DOMException.code":`${s.code}`}),o}return bn(e)?qn(t,e):Pt(e)||mr(e)?(o=Md(t,e,r,i),Dt(o,{synthetic:!0}),o):(o=Gn(t,e,r,n),kn(o,`${e}`),Dt(o,{synthetic:!0}),o)}function Gn(t,e,r,n){const i={};if(n&&r){const o=Wn(t,r);o.length&&(i.exception={values:[{value:e,stacktrace:{frames:o}}]}),Dt(i,{synthetic:!0})}if(En(e)){const{__sentry_template_string__:o,__sentry_template_values__:s}=e;return i.logentry={message:o,params:s},i}return i.message=e,i}function Wd(t,{isUnhandledRejection:e}){const r=gc(t),n=e?"promise rejection":"exception";return no(t)?`Event \`ErrorEvent\` captured as ${n} with message \`${t.message}\``:mr(t)?`Event \`${Hd(t)}\` (type=${t.type}) captured as ${n}`:`Object captured as ${n} with keys: ${r}`}function Hd(t){try{const e=Object.getPrototypeOf(t);return e?e.constructor.name:void 0}catch{}}function Gd(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const r=t[e];if(r instanceof Error)return r}}function Vd(t,{metadata:e,tunnel:r,dsn:n}){const i={event_id:t.event_id,sent_at:new Date().toISOString(),...e&&e.sdk&&{sdk:{name:e.sdk.name,version:e.sdk.version}},...!!r&&!!n&&{dsn:wr(n)}},o=Kd(t);return Kt(i,[o])}function Kd(t){return[{type:"user_report"},t]}class Yd extends Wl{constructor(e){const r={parentSpanIsAlwaysRootSpan:!0,...e},n=ke.SENTRY_SDK_SOURCE||Dd();td(r,"browser",["browser"],n),super(r),r.sendClientReports&&ke.document&&ke.document.addEventListener("visibilitychange",()=>{ke.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(e,r){return $d(this._options.stackParser,e,r,this._options.attachStacktrace)}eventFromMessage(e,r="info",n){return qd(this._options.stackParser,e,r,n,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled()){Ir&&oe.warn("SDK not enabled, will not capture user feedback.");return}const r=Vd(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(r)}_prepareEvent(e,r,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,r,n)}}const Zd=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Ne=de,Xd=1e3;let rs,Vn,Kn;function Jd(t){bt("dom",t),Et("dom",Qd)}function Qd(){if(!Ne.document)return;const t=Ve.bind(null,"dom"),e=ns(t,!0);Ne.document.addEventListener("click",e,!1),Ne.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(r=>{const i=Ne[r],o=i&&i.prototype;!o||!o.hasOwnProperty||!o.hasOwnProperty("addEventListener")||(Be(o,"addEventListener",function(s){return function(a,u,c){if(a==="click"||a=="keypress")try{const l=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},d=l[a]=l[a]||{refCount:0};if(!d.handler){const h=ns(t);d.handler=h,s.call(this,a,h,c)}d.refCount++}catch{}return s.call(this,a,u,c)}}),Be(o,"removeEventListener",function(s){return function(a,u,c){if(a==="click"||a=="keypress")try{const l=this.__sentry_instrumentation_handlers__||{},d=l[a];d&&(d.refCount--,d.refCount<=0&&(s.call(this,a,d.handler,c),d.handler=void 0,delete l[a]),Object.keys(l).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return s.call(this,a,u,c)}}))})}function ef(t){if(t.type!==Vn)return!1;try{if(!t.target||t.target._sentryId!==Kn)return!1}catch{}return!0}function tf(t,e){return t!=="keypress"?!1:!e||!e.tagName?!0:!(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable)}function ns(t,e=!1){return r=>{if(!r||r._sentryCaptured)return;const n=rf(r);if(tf(r.type,n))return;St(r,"_sentryCaptured",!0),n&&!n._sentryId&&St(n,"_sentryId",We());const i=r.type==="keypress"?"input":r.type;ef(r)||(t({event:r,name:i,global:e}),Vn=r.type,Kn=n?n._sentryId:void 0),clearTimeout(rs),rs=Ne.setTimeout(()=>{Kn=void 0,Vn=void 0},Xd)}}function rf(t){try{return t.target}catch{return null}}let Cr;function is(t){const e="history";bt(e,t),Et(e,nf)}function nf(){if(!Ld())return;const t=Ne.onpopstate;Ne.onpopstate=function(...r){const n=Ne.location.href,i=Cr;if(Cr=n,Ve("history",{from:i,to:n}),t)try{return t.apply(this,r)}catch{}};function e(r){return function(...n){const i=n.length>2?n[2]:void 0;if(i){const o=Cr,s=String(i);Cr=s,Ve("history",{from:o,to:s})}return r.apply(this,n)}}Be(Ne.history,"pushState",e),Be(Ne.history,"replaceState",e)}const Rr={};function of(t){const e=Rr[t];if(e)return e;let r=Ne[t];if(Bn(r))return Rr[t]=r.bind(Ne);const n=Ne.document;if(n&&typeof n.createElement=="function")try{const i=n.createElement("iframe");i.hidden=!0,n.head.appendChild(i);const o=i.contentWindow;o&&o[t]&&(r=o[t]),n.head.removeChild(i)}catch(i){Zd&&oe.warn(`Could not create sandbox iframe for ${t} check, bailing to window.${t}: `,i)}return r&&(Rr[t]=r.bind(Ne))}function os(t){Rr[t]=void 0}const Yt="__sentry_xhr_v3__";function sf(t){bt("xhr",t),Et("xhr",af)}function af(){if(!Ne.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;t.open=new Proxy(t.open,{apply(e,r,n){const i=new Error,o=it()*1e3,s=nt(n[0])?n[0].toUpperCase():void 0,a=uf(n[1]);if(!s||!a)return e.apply(r,n);r[Yt]={method:s,url:a,request_headers:{}},s==="POST"&&a.match(/sentry_key/)&&(r.__sentry_own_request__=!0);const u=()=>{const c=r[Yt];if(c&&r.readyState===4){try{c.status_code=r.status}catch{}const l={endTimestamp:it()*1e3,startTimestamp:o,xhr:r,virtualError:i};Ve("xhr",l)}};return"onreadystatechange"in r&&typeof r.onreadystatechange=="function"?r.onreadystatechange=new Proxy(r.onreadystatechange,{apply(c,l,d){return u(),c.apply(l,d)}}):r.addEventListener("readystatechange",u),r.setRequestHeader=new Proxy(r.setRequestHeader,{apply(c,l,d){const[h,f]=d,p=l[Yt];return p&&nt(h)&&nt(f)&&(p.request_headers[h.toLowerCase()]=f),c.apply(l,d)}}),e.apply(r,n)}}),t.send=new Proxy(t.send,{apply(e,r,n){const i=r[Yt];if(!i)return e.apply(r,n);n[0]!==void 0&&(i.body=n[0]);const o={startTimestamp:it()*1e3,xhr:r};return Ve("xhr",o),e.apply(r,n)}})}function uf(t){if(nt(t))return t;try{return t.toString()}catch{}}function cf(t,e=of("fetch")){let r=0,n=0;function i(o){const s=o.body.length;r+=s,n++;const a={body:o.body,method:"POST",referrerPolicy:"origin",headers:t.headers,keepalive:r<=6e4&&n<15,...t.fetchOptions};if(!e)return os("fetch"),br("No fetch implementation available");try{return e(t.url,a).then(u=>(r-=s,n--,{statusCode:u.status,headers:{"x-sentry-rate-limits":u.headers.get("X-Sentry-Rate-Limits"),"retry-after":u.headers.get("Retry-After")}}))}catch(u){return os("fetch"),r-=s,n--,br(u)}}return ed(t,i)}const lf=30,df=50;function Yn(t,e,r,n){const i={filename:t,function:e==="<anonymous>"?_t:e,in_app:!0};return r!==void 0&&(i.lineno=r),n!==void 0&&(i.colno=n),i}const ff=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,hf=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,pf=/\((\S*)(?::(\d+))(?::(\d+))\)/,gf=[lf,t=>{const e=ff.exec(t);if(e){const[,n,i,o]=e;return Yn(n,_t,+i,+o)}const r=hf.exec(t);if(r){if(r[2]&&r[2].indexOf("eval")===0){const s=pf.exec(r[2]);s&&(r[2]=s[1],r[3]=s[2],r[4]=s[3])}const[i,o]=ss(r[1]||_t,r[2]);return Yn(o,i,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}}],vf=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,mf=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,yf=ec(...[gf,[df,t=>{const e=vf.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const o=mf.exec(e[3]);o&&(e[1]=e[1]||"eval",e[3]=o[1],e[4]=o[2],e[5]="")}let n=e[3],i=e[1]||_t;return[i,n]=ss(i,n),Yn(n,i,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}]]),ss=(t,e)=>{const r=t.indexOf("safari-extension")!==-1,n=t.indexOf("safari-web-extension")!==-1;return r||n?[t.indexOf("@")!==-1?t.split("@")[0]:_t,r?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]},Pr=1024,_f="Breadcrumbs",bf=((t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:_f,setup(r){e.console&&bd(Sf(r)),e.dom&&Jd(wf(r,e.dom)),e.xhr&&sf(Tf(r)),e.fetch&&Rd(Af(r)),e.history&&is(kf(r)),e.sentry&&r.on("beforeSendEvent",Ef(r))}}});function Ef(t){return function(r){Re()===t&&kt({category:`sentry.${r.type==="transaction"?"transaction":"event"}`,event_id:r.event_id,level:r.level,message:dt(r)},{event:r})}}function wf(t,e){return function(n){if(Re()!==t)return;let i,o,s=typeof e=="object"?e.serializeAttribute:void 0,a=typeof e=="object"&&typeof e.maxStringLength=="number"?e.maxStringLength:void 0;a&&a>Pr&&(Ir&&oe.warn(`\`dom.maxStringLength\` cannot exceed ${Pr}, but a value of ${a} was configured. Sentry will use ${Pr} instead.`),a=Pr),typeof s=="string"&&(s=[s]);try{const c=n.event,l=xf(c)?c.target:c;i=so(l,{keyAttrs:s,maxStringLength:a}),o=hc(l)}catch{i="<unknown>"}if(i.length===0)return;const u={category:`ui.${n.name}`,message:i};o&&(u.data={"ui.component_name":o}),kt(u,{event:n.event,name:n.name,global:n.global})}}function Sf(t){return function(r){if(Re()!==t)return;const n={category:"console",data:{arguments:r.args,logger:"console"},level:wd(r.level),message:ao(r.args," ")};if(r.level==="assert")if(r.args[0]===!1)n.message=`Assertion failed: ${ao(r.args.slice(1)," ")||"console.assert"}`,n.data.arguments=r.args.slice(1);else return;kt(n,{input:r.args,level:r.level})}}function Tf(t){return function(r){if(Re()!==t)return;const{startTimestamp:n,endTimestamp:i}=r,o=r.xhr[Yt];if(!n||!i||!o)return;const{method:s,url:a,status_code:u,body:c}=o,l={method:s,url:a,status_code:u},d={xhr:r.xhr,input:c,startTimestamp:n,endTimestamp:i},h=Jo(u);kt({category:"xhr",data:l,type:"http",level:h},d)}}function Af(t){return function(r){if(Re()!==t)return;const{startTimestamp:n,endTimestamp:i}=r;if(i&&!(r.fetchData.url.match(/sentry_key/)&&r.fetchData.method==="POST"))if(r.error){const o=r.fetchData,s={data:r.error,input:r.args,startTimestamp:n,endTimestamp:i};kt({category:"fetch",data:o,level:"error",type:"http"},s)}else{const o=r.response,s={...r.fetchData,status_code:o&&o.status},a={input:r.args,response:o,startTimestamp:n,endTimestamp:i},u=Jo(s.status_code);kt({category:"fetch",data:s,type:"http",level:u},a)}}}function kf(t){return function(r){if(Re()!==t)return;let n=r.from,i=r.to;const o=Un(ke.location.href);let s=n?Un(n):void 0;const a=Un(i);(!s||!s.path)&&(s=o),o.protocol===a.protocol&&o.host===a.host&&(i=a.relative),o.protocol===s.protocol&&o.host===s.host&&(n=s.relative),kt({category:"navigation",data:{from:n,to:i}})}}function xf(t){return!!t&&!!t.target}const If=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Cf="BrowserApiErrors",Rf=((t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...t};return{name:Cf,setupOnce(){e.setTimeout&&Be(ke,"setTimeout",as),e.setInterval&&Be(ke,"setInterval",as),e.requestAnimationFrame&&Be(ke,"requestAnimationFrame",Pf),e.XMLHttpRequest&&"XMLHttpRequest"in ke&&Be(XMLHttpRequest.prototype,"send",Of);const r=e.eventTarget;r&&(Array.isArray(r)?r:If).forEach(Df)}}});function as(t){return function(...e){const r=e[0];return e[0]=Mt(r,{mechanism:{data:{function:lt(t)},handled:!1,type:"instrument"}}),t.apply(this,e)}}function Pf(t){return function(e){return t.apply(this,[Mt(e,{mechanism:{data:{function:"requestAnimationFrame",handler:lt(t)},handled:!1,type:"instrument"}})])}}function Of(t){return function(...e){const r=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(i=>{i in r&&typeof r[i]=="function"&&Be(r,i,function(o){const s={mechanism:{data:{function:i,handler:lt(o)},handled:!1,type:"instrument"}},a=Tn(o);return a&&(s.mechanism.data.handler=lt(a)),Mt(o,s)})}),t.apply(this,e)}}function Df(t){const r=ke[t],n=r&&r.prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")||(Be(n,"addEventListener",function(i){return function(o,s,a){try{Lf(s)&&(s.handleEvent=Mt(s.handleEvent,{mechanism:{data:{function:"handleEvent",handler:lt(s),target:t},handled:!1,type:"instrument"}}))}catch{}return i.apply(this,[o,Mt(s,{mechanism:{data:{function:"addEventListener",handler:lt(s),target:t},handled:!1,type:"instrument"}}),a])}}),Be(n,"removeEventListener",function(i){return function(o,s,a){try{const u=s.__sentry_wrapped__;u&&i.call(this,o,u,a)}catch{}return i.call(this,o,s,a)}}))}function Lf(t){return typeof t.handleEvent=="function"}const Nf=()=>({name:"BrowserSession",setupOnce(){if(typeof ke.document>"u"){Ir&&oe.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}Lo({ignoreDuration:!0}),Uo(),is(({from:t,to:e})=>{t!==void 0&&t!==e&&(Lo({ignoreDuration:!0}),Uo())})}}),Mf="GlobalHandlers",Uf=((t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:Mf,setupOnce(){Error.stackTraceLimit=50},setup(r){e.onerror&&(Ff(r),us("onerror")),e.onunhandledrejection&&(Bf(r),us("onunhandledrejection"))}}});function Ff(t){rc(e=>{const{stackParser:r,attachStacktrace:n}=cs();if(Re()!==t||es())return;const{msg:i,url:o,line:s,column:a,error:u}=e,c=$f(Hn(r,u||i,void 0,n,!1),o,s,a);c.level="error",Do(c,{originalException:u,mechanism:{handled:!1,type:"onerror"}})})}function Bf(t){ic(e=>{const{stackParser:r,attachStacktrace:n}=cs();if(Re()!==t||es())return;const i=zf(e),o=wn(i)?jf(i):Hn(r,i,void 0,n,!0);o.level="error",Do(o,{originalException:i,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function zf(t){if(wn(t))return t;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return t}function jf(t){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(t)}`}]}}}function $f(t,e,r,n){const i=t.exception=t.exception||{},o=i.values=i.values||[],s=o[0]=o[0]||{},a=s.stacktrace=s.stacktrace||{},u=a.frames=a.frames||[],c=n,l=r,d=nt(e)&&e.length>0?e:fc();return u.length===0&&u.push({colno:c,filename:d,function:_t,in_app:!0,lineno:l}),t}function us(t){Ir&&oe.log(`Global Handler attached: ${t}`)}function cs(){const t=Re();return t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const qf=()=>({name:"HttpContext",preprocessEvent(t){if(!ke.navigator&&!ke.location&&!ke.document)return;const e=t.request&&t.request.url||ke.location&&ke.location.href,{referrer:r}=ke.document||{},{userAgent:n}=ke.navigator||{},i={...t.request&&t.request.headers,...r&&{Referer:r},...n&&{"User-Agent":n}},o={...t.request,...e&&{url:e},headers:i};t.request=o}}),Wf="cause",Hf=5,Gf="LinkedErrors",Vf=((t={})=>{const e=t.limit||Hf,r=t.key||Wf;return{name:Gf,preprocessEvent(n,i,o){const s=o.getOptions();yd($n,s.stackParser,s.maxValueLength,r,e,n,i)}}});function Kf(t){const e=[ad(),id(),Rf(),bf(),Uf(),Vf(),Td(),qf()];return t.autoSessionTracking!==!1&&e.push(Nf()),e}var Yf=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};Yf.SENTRY_RELEASE={id:"641e4af980b17e7926c89755d55955bcc5b0cc06"};function ls(){const t=Kf({}).filter(n=>!["BrowserApiErrors","Breadcrumbs","GlobalHandlers"].includes(n.name));let e=new Yd({dsn:"https://c8ca62d354c7cc59706b05ad112030aa@o4508493399916544.ingest.de.sentry.io/4508493406732368",transport:cf,stackParser:yf,integrations:t,beforeSend:(n,i)=>(i.data&&(console.log("hint.data",i.data),n.tags={...n.tags,...i.data},n.extra={...n.extra,hintData:i.data}),n)});const r=new ft;return r.setClient(e),e.init(),r}async function Zf(t,e,r,n){try{await r()}catch(i){console.error(i),e=e||await Xf();const o=Jf();t.captureException(i,{data:{urlx:e,versionx:o}}),n&&await n()}}async function Xf(){if(chrome)if(chrome.tabs){const t=await chrome.tabs.query({active:!0,currentWindow:!0});if(t.length>0){let e=t[0].url;return e||"NO_URL_URL"}else return"NO_URL_LENGTH"}else return"NO_URL_TABS";else return"NO_URL_CHROME"}function Jf(){return chrome?chrome.runtime?chrome.runtime.getManifest().version:"NO_VER_RUNTIME":"NO_VER_CHROME"}const Qf={TriggerAction:"triggerAction"},eh=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map(t=>[t.name,t]),th=new Map(eh);class Zn extends Error{name="NonError";constructor(e){super(Zn._prepareSuperMessage(e))}static _prepareSuperMessage(e){try{return JSON.stringify(e)}catch{return String(e)}}}const rh=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],Xn=new WeakSet,nh=t=>{Xn.add(t);const e=t.toJSON();return Xn.delete(t),e},ds=t=>th.get(t)??Error,Jn=({from:t,seen:e,to:r,forceEnumerable:n,maxDepth:i,depth:o,useToJSON:s,serialize:a})=>{if(!r)if(Array.isArray(t))r=[];else if(!a&&fs(t)){const c=ds(t.name);r=new c}else r={};if(e.push(t),o>=i)return r;if(s&&typeof t.toJSON=="function"&&!Xn.has(t))return nh(t);const u=c=>Jn({from:c,seen:[...e],forceEnumerable:n,maxDepth:i,depth:o,useToJSON:s,serialize:a});for(const[c,l]of Object.entries(t)){if(l&&l instanceof Uint8Array&&l.constructor.name==="Buffer"){r[c]="[object Buffer]";continue}if(l!==null&&typeof l=="object"&&typeof l.pipe=="function"){r[c]="[object Stream]";continue}if(typeof l!="function"){if(!l||typeof l!="object"){try{r[c]=l}catch{}continue}if(!e.includes(t[c])){o++,r[c]=u(t[c]);continue}r[c]="[Circular]"}}for(const{property:c,enumerable:l}of rh)typeof t[c]<"u"&&t[c]!==null&&Object.defineProperty(r,c,{value:fs(t[c])?u(t[c]):t[c],enumerable:n?!0:l,configurable:!0,writable:!0});return r};function ih(t,e={}){const{maxDepth:r=Number.POSITIVE_INFINITY,useToJSON:n=!0}=e;return typeof t=="object"&&t!==null?Jn({from:t,seen:[],forceEnumerable:!0,maxDepth:r,depth:0,useToJSON:n,serialize:!0}):typeof t=="function"?`[Function: ${t.name||"anonymous"}]`:t}function oh(t,e={}){const{maxDepth:r=Number.POSITIVE_INFINITY}=e;if(t instanceof Error)return t;if(sh(t)){const n=ds(t.name);return Jn({from:t,seen:[],to:new n,maxDepth:r,depth:0,serialize:!1})}return new Zn(t)}function fs(t){return!!t&&typeof t=="object"&&"name"in t&&"message"in t&&"stack"in t}function sh(t){return!!t&&typeof t=="object"&&"message"in t&&!Array.isArray(t)}var ah=Object.defineProperty,uh=Object.defineProperties,ch=Object.getOwnPropertyDescriptors,hs=Object.getOwnPropertySymbols,lh=Object.prototype.hasOwnProperty,dh=Object.prototype.propertyIsEnumerable,ps=(t,e,r)=>e in t?ah(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,gs=(t,e)=>{for(var r in e||(e={}))lh.call(e,r)&&ps(t,r,e[r]);if(hs)for(var r of hs(e))dh.call(e,r)&&ps(t,r,e[r]);return t},vs=(t,e)=>uh(t,ch(e)),fh=(t,e,r)=>new Promise((n,i)=>{var o=u=>{try{a(r.next(u))}catch(c){i(c)}},s=u=>{try{a(r.throw(u))}catch(c){i(c)}},a=u=>u.done?n(u.value):Promise.resolve(u.value).then(o,s);a((r=r.apply(t,e)).next())});function hh(t){let e,r={};function n(){Object.entries(r).length===0&&(e?.(),e=void 0)}let i=Math.floor(Math.random()*1e4);function o(){return i++}return{sendMessage(s,a,...u){return fh(this,null,function*(){var c,l,d,h;const f={id:o(),type:s,data:a,timestamp:Date.now()},p=(l=yield(c=t.verifyMessageData)==null?void 0:c.call(t,f))!=null?l:f;(d=t.logger)==null||d.debug(`[messaging] sendMessage {id=${p.id}} `,p,...u);const g=yield t.sendMessage(p,...u),{res:m,err:v}=g??{err:new Error("No response")};if((h=t.logger)==null||h.debug(`[messaging] sendMessage {id=${p.id}} `,{res:m,err:v}),v!=null)throw oh(v);return m})},onMessage(s,a){var u,c,l;if(e==null&&((u=t.logger)==null||u.debug(`[messaging] "${s}" initialized the message listener for this context`),e=t.addRootListener(d=>{var h,f;if(typeof d.type!="string"||typeof d.timestamp!="number"){if(t.breakError)return;const m=Error(`[messaging] Unknown message format, must include the 'type' & 'timestamp' fields, received: ${JSON.stringify(d)}`);throw(h=t.logger)==null||h.error(m),m}(f=t?.logger)==null||f.debug("[messaging] Received message",d);const p=r[d.type];if(p==null)return;const g=p(d);return Promise.resolve(g).then(m=>{var v,b;return(b=(v=t.verifyMessageData)==null?void 0:v.call(t,m))!=null?b:m}).then(m=>{var v;return(v=t?.logger)==null||v.debug(`[messaging] onMessage {id=${d.id}} `,{res:m}),{res:m}}).catch(m=>{var v;return(v=t?.logger)==null||v.debug(`[messaging] onMessage {id=${d.id}} `,{err:m}),{err:ih(m)}})})),r[s]!=null){const d=Error(`[messaging] In this JS context, only one listener can be setup for ${s}`);throw(c=t.logger)==null||c.error(d),d}return r[s]=a,(l=t.logger)==null||l.log(`[messaging] Added listener for ${s}`),()=>{delete r[s],n()}},removeAllListeners(){Object.keys(r).forEach(s=>{delete r[s]}),n()}}}var Or=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ms(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Dr={exports:{}},ph=Dr.exports,ys;function gh(){return ys||(ys=1,(function(t,e){(function(r,n){n(t)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:ph,function(r){if(!globalThis.chrome?.runtime?.id)throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const n="The message port closed before a response was received.",i=o=>{const s={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(s).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class a extends WeakMap{constructor(C,P=void 0){super(P),this.createItem=C}get(C){return this.has(C)||this.set(C,this.createItem(C)),super.get(C)}}const u=x=>x&&typeof x=="object"&&typeof x.then=="function",c=(x,C)=>(...P)=>{o.runtime.lastError?x.reject(new Error(o.runtime.lastError.message)):C.singleCallbackArg||P.length<=1&&C.singleCallbackArg!==!1?x.resolve(P[0]):x.resolve(P)},l=x=>x==1?"argument":"arguments",d=(x,C)=>function(I,...M){if(M.length<C.minArgs)throw new Error(`Expected at least ${C.minArgs} ${l(C.minArgs)} for ${x}(), got ${M.length}`);if(M.length>C.maxArgs)throw new Error(`Expected at most ${C.maxArgs} ${l(C.maxArgs)} for ${x}(), got ${M.length}`);return new Promise((j,A)=>{if(C.fallbackToNoCallback)try{I[x](...M,c({resolve:j,reject:A},C))}catch(D){console.warn(`${x} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,D),I[x](...M),C.fallbackToNoCallback=!1,C.noCallback=!0,j()}else C.noCallback?(I[x](...M),j()):I[x](...M,c({resolve:j,reject:A},C))})},h=(x,C,P)=>new Proxy(C,{apply(I,M,j){return P.call(M,x,...j)}});let f=Function.call.bind(Object.prototype.hasOwnProperty);const p=(x,C={},P={})=>{let I=Object.create(null),M={has(A,D){return D in x||D in I},get(A,D,_){if(D in I)return I[D];if(!(D in x))return;let U=x[D];if(typeof U=="function")if(typeof C[D]=="function")U=h(x,x[D],C[D]);else if(f(P,D)){let ee=d(D,P[D]);U=h(x,x[D],ee)}else U=U.bind(x);else if(typeof U=="object"&&U!==null&&(f(C,D)||f(P,D)))U=p(U,C[D],P[D]);else if(f(P,"*"))U=p(U,C[D],P["*"]);else return Object.defineProperty(I,D,{configurable:!0,enumerable:!0,get(){return x[D]},set(ee){x[D]=ee}}),U;return I[D]=U,U},set(A,D,_,U){return D in I?I[D]=_:x[D]=_,!0},defineProperty(A,D,_){return Reflect.defineProperty(I,D,_)},deleteProperty(A,D){return Reflect.deleteProperty(I,D)}},j=Object.create(x);return new Proxy(j,M)},g=x=>({addListener(C,P,...I){C.addListener(x.get(P),...I)},hasListener(C,P){return C.hasListener(x.get(P))},removeListener(C,P){C.removeListener(x.get(P))}}),m=new a(x=>typeof x!="function"?x:function(P){const I=p(P,{},{getContent:{minArgs:0,maxArgs:0}});x(I)}),v=new a(x=>typeof x!="function"?x:function(P,I,M){let j=!1,A,D=new Promise(z=>{A=function(te){j=!0,z(te)}}),_;try{_=x(P,I,A)}catch(z){_=Promise.reject(z)}const U=_!==!0&&u(_);if(_!==!0&&!U&&!j)return!1;const ee=z=>{z.then(te=>{M(te)},te=>{let q;te&&(te instanceof Error||typeof te.message=="string")?q=te.message:q="An unexpected error occurred",M({__mozWebExtensionPolyfillReject__:!0,message:q})}).catch(te=>{console.error("Failed to send onMessage rejected reply",te)})};return ee(U?_:D),!0}),b=({reject:x,resolve:C},P)=>{o.runtime.lastError?o.runtime.lastError.message===n?C():x(new Error(o.runtime.lastError.message)):P&&P.__mozWebExtensionPolyfillReject__?x(new Error(P.message)):C(P)},E=(x,C,P,...I)=>{if(I.length<C.minArgs)throw new Error(`Expected at least ${C.minArgs} ${l(C.minArgs)} for ${x}(), got ${I.length}`);if(I.length>C.maxArgs)throw new Error(`Expected at most ${C.maxArgs} ${l(C.maxArgs)} for ${x}(), got ${I.length}`);return new Promise((M,j)=>{const A=b.bind(null,{resolve:M,reject:j});I.push(A),P.sendMessage(...I)})},S={devtools:{network:{onRequestFinished:g(m)}},runtime:{onMessage:g(v),onMessageExternal:g(v),sendMessage:E.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:E.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},T={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return s.privacy={network:{"*":T},services:{"*":T},websites:{"*":T}},p(o,S,s)};r.exports=i(chrome)}else r.exports=globalThis.browser})})(Dr)),Dr.exports}var vh=gh();const Lr=ms(vh);function mh(t){return hh(vs(gs({},t),{sendMessage(e,r){if(r==null)return Lr.runtime.sendMessage(e);const n=typeof r=="number"?{tabId:r}:r;return Lr.tabs.sendMessage(n.tabId,e,n.frameId!=null?{frameId:n.frameId}:void 0)},addRootListener(e){const r=(n,i)=>e(typeof n=="object"?vs(gs({},n),{sender:i}):n);return Lr.runtime.onMessage.addListener(r),()=>Lr.runtime.onMessage.removeListener(r)}}))}const{sendMessage:Nr,onMessage:_s}=mh();var Qn=function(t,e){return Qn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Qn(t,e)};function Me(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Qn(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Z=function(){return Z=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Z.apply(this,arguments)};function ei(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function G(t,e,r,n){function i(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(l){try{c(n.next(l))}catch(d){s(d)}}function u(l){try{c(n.throw(l))}catch(d){s(d)}}function c(l){l.done?o(l.value):i(l.value).then(a,u)}c((n=n.apply(t,e||[])).next())})}function H(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(l){return u([c,l])}}function u(c){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(r=0)),r;)try{if(n=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return r.label++,{value:c[1],done:!1};case 5:r.label++,i=c[1],c=[0];continue;case 7:c=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){r=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){r.label=c[1];break}if(c[0]===6&&r.label<o[1]){r.label=o[1],o=c;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(c);break}o[2]&&r.ops.pop(),r.trys.pop();continue}c=e.call(t,r)}catch(l){c=[6,l],i=0}finally{n=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function ae(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ne(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}function ue(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}function Ut(t){return this instanceof Ut?(this.v=t,this):new Ut(t)}function yh(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(f){return function(p){return Promise.resolve(p).then(f,d)}}function a(f,p){n[f]&&(i[f]=function(g){return new Promise(function(m,v){o.push([f,g,m,v])>1||u(f,g)})},p&&(i[f]=p(i[f])))}function u(f,p){try{c(n[f](p))}catch(g){h(o[0][3],g)}}function c(f){f.value instanceof Ut?Promise.resolve(f.value.v).then(l,d):h(o[0][2],f)}function l(f){u("next",f)}function d(f){u("throw",f)}function h(f,p){f(p),o.shift(),o.length&&u(o[0][0],o[0][1])}}function _h(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof ae=="function"?ae(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(s){return new Promise(function(a,u){s=t[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(c){o({value:c,done:a})},s)}}typeof SuppressedError=="function"&&SuppressedError;var Ft;(function(t){t.SET="$set",t.SET_ONCE="$setOnce",t.ADD="$add",t.APPEND="$append",t.PREPEND="$prepend",t.REMOVE="$remove",t.PREINSERT="$preInsert",t.POSTINSERT="$postInsert",t.UNSET="$unset",t.CLEAR_ALL="$clearAll"})(Ft||(Ft={}));var ht;(function(t){t.IDENTIFY="$identify",t.GROUP_IDENTIFY="$groupidentify",t.REVENUE="revenue_amount"})(ht||(ht={}));var bs="-",Mr="AMP",bh="".concat(Mr,"_unsent"),Es="$default_instance",ws="https://api2.amplitude.com/2/httpapi",Eh="https://api.eu.amplitude.com/2/httpapi",wh="https://api2.amplitude.com/batch",Sh="https://api.eu.amplitude.com/batch",Th="utm_campaign",Ah="utm_content",kh="utm_id",xh="utm_medium",Ih="utm_source",Ch="utm_term",Ss="dclid",Ts="fbclid",As="gbraid",ks="gclid",xs="ko_click_id",Is="li_fat_id",Cs="msclkid",Rs="rdt_cid",Ps="ttclid",Os="twclid",Ds="wbraid",ti={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,li_fat_id:void 0,msclkid:void 0,rdt_cid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0},ri=["access-control-allow-origin","access-control-allow-credentials","access-control-expose-headers","access-control-max-age","access-control-allow-methods","access-control-allow-headers","accept-patch","accept-ranges","age","allow","alt-svc","cache-control","connection","content-disposition","content-encoding","content-language","content-length","content-location","content-md5","content-range","content-type","date","delta-base","etag","expires","im","last-modified","link","location","permanent","p3p","pragma","proxy-authenticate","public-key-pins","retry-after","server","status","strict-transport-security","trailer","transfer-encoding","tk","upgrade","vary","via","warning","www-authenticate","x-b3-traceid","x-frame-options"],Rh=["authorization","cookie","set-cookie"],Ph=1e3,ni=function(t){if(Object.keys(t).length>Ph)return!1;for(var e in t){var r=t[e];if(!Ls(e,r))return!1}return!0},Ls=function(t,e){var r,n;if(typeof t!="string")return!1;if(Array.isArray(e)){var i=!0;try{for(var o=ae(e),s=o.next();!s.done;s=o.next()){var a=s.value;if(Array.isArray(a))return!1;if(typeof a=="object")i=i&&ni(a);else if(!["number","string"].includes(typeof a))return!1;if(!i)return!1}}catch(u){r={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}}else{if(e==null)return!1;if(typeof e=="object")return ni(e);if(!["number","string","boolean"].includes(typeof e))return!1}return!0},Ur=(function(){function t(){this._propertySet=new Set,this._properties={}}return t.prototype.getUserProperties=function(){return Z({},this._properties)},t.prototype.set=function(e,r){return this._safeSet(pe.SET,e,r),this},t.prototype.setOnce=function(e,r){return this._safeSet(pe.SET_ONCE,e,r),this},t.prototype.append=function(e,r){return this._safeSet(pe.APPEND,e,r),this},t.prototype.prepend=function(e,r){return this._safeSet(pe.PREPEND,e,r),this},t.prototype.postInsert=function(e,r){return this._safeSet(pe.POSTINSERT,e,r),this},t.prototype.preInsert=function(e,r){return this._safeSet(pe.PREINSERT,e,r),this},t.prototype.remove=function(e,r){return this._safeSet(pe.REMOVE,e,r),this},t.prototype.add=function(e,r){return this._safeSet(pe.ADD,e,r),this},t.prototype.unset=function(e){return this._safeSet(pe.UNSET,e,bs),this},t.prototype.clearAll=function(){return this._properties={},this._properties[pe.CLEAR_ALL]=bs,this},t.prototype._safeSet=function(e,r,n){if(this._validate(e,r,n)){var i=this._properties[e];return i===void 0&&(i={},this._properties[e]=i),i[r]=n,this._propertySet.add(r),!0}return!1},t.prototype._validate=function(e,r,n){return this._properties[pe.CLEAR_ALL]!==void 0||this._propertySet.has(r)?!1:e===pe.ADD?typeof n=="number":e!==pe.UNSET&&e!==pe.REMOVE?Ls(r,n):!0},t})(),pe;(function(t){t.SET="$set",t.SET_ONCE="$setOnce",t.ADD="$add",t.APPEND="$append",t.PREPEND="$prepend",t.REMOVE="$remove",t.PREINSERT="$preInsert",t.POSTINSERT="$postInsert",t.UNSET="$unset",t.CLEAR_ALL="$clearAll"})(pe||(pe={}));var Oh=[pe.CLEAR_ALL,pe.UNSET,pe.SET,pe.SET_ONCE,pe.ADD,pe.APPEND,pe.PREPEND,pe.PREINSERT,pe.POSTINSERT,pe.REMOVE],Dh="Event tracked successfully",Lh="Unexpected error occurred",Nh="Event rejected due to exceeded retry count",Mh="Event skipped due to optOut config",Uh="Event rejected due to missing API key",Fh="Invalid API key",Bh="Client not initialized",Se;(function(t){t.Unknown="unknown",t.Skipped="skipped",t.Success="success",t.RateLimit="rate_limit",t.PayloadTooLarge="payload_too_large",t.Invalid="invalid",t.Failed="failed",t.Timeout="Timeout",t.SystemError="SystemError"})(Se||(Se={}));var Bt=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=Se.Unknown),{event:t,code:e,message:r}},Ie=function(){var t="ampIntegrationContext";if(typeof globalThis<"u"&&typeof globalThis[t]<"u")return globalThis[t];if(typeof globalThis<"u")return globalThis;if(typeof window<"u")return window;if(typeof self<"u")return self;if(typeof global<"u")return global},zh=function(t){return t?(t^Math.random()*16>>t/4).toString(16):(String(1e7)+String(-1e3)+String(-4e3)+String(-8e3)+String(-1e11)).replace(/[018]/g,pt)},Ns=ue([],ne(Array(256).keys()),!1).map(function(t){return t.toString(16).padStart(2,"0")}),pt=function(t){var e,r=Ie();if(!(!((e=r?.crypto)===null||e===void 0)&&e.getRandomValues))return zh(t);var n=r.crypto.getRandomValues(new Uint8Array(16));return n[6]=n[6]&15|64,n[8]=n[8]&63|128,ue([],ne(n.entries()),!1).map(function(i){var o=ne(i,2),s=o[0],a=o[1];return[4,6,8,10].includes(s)?"-".concat(Ns[a]):Ns[a]}).join("")},jh=(function(){function t(e){this.client=e,this.queue=[],this.applying=!1,this.plugins=[]}return t.prototype.register=function(e,r){var n,i;return G(this,void 0,void 0,function(){return H(this,function(o){switch(o.label){case 0:return this.plugins.some(function(s){return s.name===e.name})?(this.loggerProvider.warn("Plugin with name ".concat(e.name," already exists, skipping registration")),[2]):(e.name===void 0&&(e.name=pt(),this.loggerProvider.warn(`Plugin name is undefined. 
      Generating a random UUID for plugin name: `.concat(e.name,`. 
      Set a name for the plugin to prevent it from being added multiple times.`))),e.type=(n=e.type)!==null&&n!==void 0?n:"enrichment",[4,(i=e.setup)===null||i===void 0?void 0:i.call(e,r,this.client)]);case 1:return o.sent(),this.plugins.push(e),[2]}})})},t.prototype.deregister=function(e,r){var n;return G(this,void 0,void 0,function(){var i,o;return H(this,function(s){switch(s.label){case 0:return i=this.plugins.findIndex(function(a){return a.name===e}),i===-1?(r.loggerProvider.warn("Plugin with name ".concat(e," does not exist, skipping deregistration")),[2]):(o=this.plugins[i],this.plugins.splice(i,1),[4,(n=o.teardown)===null||n===void 0?void 0:n.call(o)]);case 1:return s.sent(),[2]}})})},t.prototype.reset=function(e){this.applying=!1;var r=this.plugins;r.map(function(n){var i;return(i=n.teardown)===null||i===void 0?void 0:i.call(n)}),this.plugins=[],this.client=e},t.prototype.push=function(e){var r=this;return new Promise(function(n){r.queue.push([e,n]),r.scheduleApply(0)})},t.prototype.scheduleApply=function(e){var r=this;this.applying||(this.applying=!0,setTimeout(function(){r.apply(r.queue.shift()).then(function(){r.applying=!1,r.queue.length>0&&r.scheduleApply(0)})},e))},t.prototype.apply=function(e){return G(this,void 0,void 0,function(){var r,n,i,o,s,a,u,f,p,c,l,d,h,f,p,g,m,v,b,E,S,T;return H(this,function(x){switch(x.label){case 0:if(!e)return[2];r=ne(e,1),n=r[0],i=ne(e,2),o=i[1],this.loggerProvider.log("Timeline.apply: Initial event",n),s=this.plugins.filter(function(C){return C.type==="before"}),x.label=1;case 1:x.trys.push([1,6,7,8]),a=ae(s),u=a.next(),x.label=2;case 2:return u.done?[3,5]:(f=u.value,f.execute?[4,f.execute(Z({},n))]:[3,4]);case 3:if(p=x.sent(),p===null)return this.loggerProvider.log("Timeline.apply: Event filtered out by before plugin '".concat(String(f.name),"', event: ").concat(JSON.stringify(n))),o({event:n,code:0,message:""}),[2];n=p,this.loggerProvider.log("Timeline.apply: Event after before plugin '".concat(String(f.name),"', event: ").concat(JSON.stringify(n))),x.label=4;case 4:return u=a.next(),[3,2];case 5:return[3,8];case 6:return c=x.sent(),b={error:c},[3,8];case 7:try{u&&!u.done&&(E=a.return)&&E.call(a)}finally{if(b)throw b.error}return[7];case 8:l=this.plugins.filter(function(C){return C.type==="enrichment"||C.type===void 0}),x.label=9;case 9:x.trys.push([9,14,15,16]),d=ae(l),h=d.next(),x.label=10;case 10:return h.done?[3,13]:(f=h.value,f.execute?[4,f.execute(Z({},n))]:[3,12]);case 11:if(p=x.sent(),p===null)return this.loggerProvider.log("Timeline.apply: Event filtered out by enrichment plugin '".concat(String(f.name),"', event: ").concat(JSON.stringify(n))),o({event:n,code:0,message:""}),[2];n=p,this.loggerProvider.log("Timeline.apply: Event after enrichment plugin '".concat(String(f.name),"', event: ").concat(JSON.stringify(n))),x.label=12;case 12:return h=d.next(),[3,10];case 13:return[3,16];case 14:return g=x.sent(),S={error:g},[3,16];case 15:try{h&&!h.done&&(T=d.return)&&T.call(d)}finally{if(S)throw S.error}return[7];case 16:return m=this.plugins.filter(function(C){return C.type==="destination"}),this.loggerProvider.log("Timeline.apply: Final event before destinations, event: ".concat(JSON.stringify(n))),v=m.map(function(C){var P=Z({},n);return C.execute(P).catch(function(I){return Bt(P,0,String(I))})}),Promise.all(v).then(function(C){var P=ne(C,1),I=P[0],M=I||Bt(n,100,"Event not tracked, no destination plugins on the instance");o(M)}),[2]}})})},t.prototype.flush=function(){return G(this,void 0,void 0,function(){var e,r,n,i=this;return H(this,function(o){switch(o.label){case 0:return e=this.queue,this.queue=[],[4,Promise.all(e.map(function(s){return i.apply(s)}))];case 1:return o.sent(),r=this.plugins.filter(function(s){return s.type==="destination"}),n=r.map(function(s){return s.flush&&s.flush()}),[4,Promise.all(n)];case 2:return o.sent(),[2]}})})},t.prototype.onIdentityChanged=function(e){this.plugins.forEach(function(r){var n;(n=r.onIdentityChanged)===null||n===void 0||n.call(r,e)})},t.prototype.onSessionIdChanged=function(e){this.plugins.forEach(function(r){var n;(n=r.onSessionIdChanged)===null||n===void 0||n.call(r,e)})},t.prototype.onOptOutChanged=function(e){this.plugins.forEach(function(r){var n;(n=r.onOptOutChanged)===null||n===void 0||n.call(r,e)})},t})(),$h=function(t,e,r){var n=typeof t=="string"?{event_type:t}:t;return Z(Z(Z({},n),r),e&&{event_properties:e})},Ms=function(t,e){var r=Z(Z({},e),{event_type:ht.IDENTIFY,user_properties:t.getUserProperties()});return r},qh=function(t,e,r,n){var i,o=Z(Z({},n),{event_type:ht.GROUP_IDENTIFY,group_properties:r.getUserProperties(),groups:(i={},i[t]=e,i)});return o},Wh=function(t,e,r){var n,i=new Ur;i.set(t,e);var o=Z(Z({},r),{event_type:ht.IDENTIFY,user_properties:i.getUserProperties(),groups:(n={},n[t]=e,n)});return o},Hh=function(t,e){return Z(Z({},e),{event_type:ht.REVENUE,event_properties:t.getEventProperties()})},Ue=function(t){return{promise:t||Promise.resolve()}},Gh=(function(){function t(e){e===void 0&&(e="$default"),this.initializing=!1,this.isReady=!1,this.q=[],this.dispatchQ=[],this.logEvent=this.track.bind(this),this.timeline=new jh(this),this.name=e}return t.prototype._init=function(e){return G(this,void 0,void 0,function(){return H(this,function(r){switch(r.label){case 0:return this.config=e,this.timeline.reset(this),this.timeline.loggerProvider=this.config.loggerProvider,[4,this.runQueuedFunctions("q")];case 1:return r.sent(),this.isReady=!0,[2]}})})},t.prototype.runQueuedFunctions=function(e){return G(this,void 0,void 0,function(){var r,n,i,o,s,a,u,c;return H(this,function(l){switch(l.label){case 0:r=this[e],this[e]=[],l.label=1;case 1:l.trys.push([1,8,9,10]),n=ae(r),i=n.next(),l.label=2;case 2:return i.done?[3,7]:(o=i.value,s=o(),s&&"promise"in s?[4,s.promise]:[3,4]);case 3:return l.sent(),[3,6];case 4:return[4,s];case 5:l.sent(),l.label=6;case 6:return i=n.next(),[3,2];case 7:return[3,10];case 8:return a=l.sent(),u={error:a},[3,10];case 9:try{i&&!i.done&&(c=n.return)&&c.call(n)}finally{if(u)throw u.error}return[7];case 10:return this[e].length?[4,this.runQueuedFunctions(e)]:[3,12];case 11:l.sent(),l.label=12;case 12:return[2]}})})},t.prototype.track=function(e,r,n){var i=$h(e,r,n);return Ue(this.dispatch(i))},t.prototype.identify=function(e,r){var n=Ms(e,r);return Ue(this.dispatch(n))},t.prototype.groupIdentify=function(e,r,n,i){var o=qh(e,r,n,i);return Ue(this.dispatch(o))},t.prototype.setGroup=function(e,r,n){var i=Wh(e,r,n);return Ue(this.dispatch(i))},t.prototype.revenue=function(e,r){var n=Hh(e,r);return Ue(this.dispatch(n))},t.prototype.add=function(e){return this.isReady?this._addPlugin(e):(this.q.push(this._addPlugin.bind(this,e)),Ue())},t.prototype._addPlugin=function(e){return Ue(this.timeline.register(e,this.config))},t.prototype.remove=function(e){return this.isReady?this._removePlugin(e):(this.q.push(this._removePlugin.bind(this,e)),Ue())},t.prototype._removePlugin=function(e){return Ue(this.timeline.deregister(e,this.config))},t.prototype.dispatchWithCallback=function(e,r){if(!this.isReady)return r(Bt(e,0,Bh));this.process(e).then(r)},t.prototype.dispatch=function(e){return G(this,void 0,void 0,function(){var r=this;return H(this,function(n){return this.isReady?[2,this.process(e)]:[2,new Promise(function(i){r.dispatchQ.push(r.dispatchWithCallback.bind(r,e,i))})]})})},t.prototype.getOperationAppliedUserProperties=function(e){var r={};if(e===void 0)return r;var n={};return Object.keys(e).forEach(function(i){Object.values(Ft).includes(i)||(n[i]=e[i])}),Oh.forEach(function(i){if(Object.keys(e).includes(i)){var o=e[i];switch(i){case Ft.CLEAR_ALL:Object.keys(r).forEach(function(s){delete r[s]});break;case Ft.UNSET:Object.keys(o).forEach(function(s){delete r[s]});break;case Ft.SET:Object.assign(r,o);break}}}),Object.assign(r,n),r},t.prototype.process=function(e){return G(this,void 0,void 0,function(){var r,o,n,i,o;return H(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),this.config.optOut?[2,Bt(e,0,Mh)]:(e.event_type===ht.IDENTIFY&&(r=this.getOperationAppliedUserProperties(e.user_properties),this.timeline.onIdentityChanged({userProperties:r})),[4,this.timeline.push(e)]);case 1:return o=s.sent(),o.code===200?this.config.loggerProvider.log(o.message):o.code===100?this.config.loggerProvider.warn(o.message):this.config.loggerProvider.error(o.message),[2,o];case 2:return n=s.sent(),i=String(n),this.config.loggerProvider.error(i),o=Bt(e,0,i),[2,o];case 3:return[2]}})})},t.prototype.setOptOut=function(e){if(!this.isReady){this.q.push(this._setOptOut.bind(this,!!e));return}this._setOptOut(e)},t.prototype._setOptOut=function(e){this.config.optOut!==e&&(this.timeline.onOptOutChanged(e),this.config.optOut=!!e)},t.prototype.flush=function(){return Ue(this.timeline.flush())},t.prototype.plugin=function(e){var r=this.timeline.plugins.find(function(n){return n.name===e});if(r===void 0){this.config.loggerProvider.debug("Cannot find plugin with name ".concat(e));return}return r},t.prototype.plugins=function(e){return this.timeline.plugins.filter(function(r){return r instanceof e})},t})(),Vh=(function(){function t(e,r){this.key="AMP_remote_config_".concat(e.substring(0,10)),this.logger=r}return t.prototype.fetchConfig=function(){var e=null,r={remoteConfig:null,lastFetch:new Date};try{e=localStorage.getItem(this.key)}catch(i){return this.logger.debug("Remote config localstorage failed to access: ",i),Promise.resolve(r)}if(e===null)return this.logger.debug("Remote config localstorage gets null because the key does not exist"),Promise.resolve(r);try{var n=JSON.parse(e);return this.logger.debug("Remote config localstorage parsed successfully: ".concat(JSON.stringify(n))),Promise.resolve({remoteConfig:n.remoteConfig,lastFetch:new Date(n.lastFetch)})}catch(i){return this.logger.debug("Remote config localstorage failed to parse: ",i),localStorage.removeItem(this.key),Promise.resolve(r)}},t.prototype.setConfig=function(e){try{return localStorage.setItem(this.key,JSON.stringify(e)),this.logger.debug("Remote config localstorage set successfully."),Promise.resolve(!0)}catch(r){this.logger.debug("Remote config localstorage failed to set: ",r)}return Promise.resolve(!1)},t})(),Kh="https://sr-client-cfg.amplitude.com/config",Yh="https://sr-client-cfg.eu.amplitude.com/config",Zh=3,Xh=1e3,Jh=(function(){function t(e,r,n){n===void 0&&(n="US"),this.callbackInfos=[],this.apiKey=e,this.serverUrl=n==="US"?Kh:Yh,this.logger=r,this.storage=new Vh(e,r)}return t.prototype.subscribe=function(e,r,n){var i=pt(),o={id:i,key:e,deliveryMode:r,callback:n};return this.callbackInfos.push(o),r==="all"?this.subscribeAll(o):this.subscribeWaitForRemote(o,r.timeout),i},t.prototype.unsubscribe=function(e){var r=this.callbackInfos.findIndex(function(n){return n.id===e});return r===-1?(this.logger.debug("Remote config client unsubscribe failed because callback with id ".concat(e," doesn't exist.")),!1):(this.callbackInfos.splice(r,1),this.logger.debug("Remote config client unsubscribe succeeded removing callback with id ".concat(e,".")),!0)},t.prototype.updateConfigs=function(){return G(this,void 0,void 0,function(){var e,r=this;return H(this,function(n){switch(n.label){case 0:return[4,this.fetch()];case 1:return e=n.sent(),this.storage.setConfig(e),this.callbackInfos.forEach(function(i){r.sendCallback(i,e,"remote")}),[2]}})})},t.prototype.subscribeAll=function(e){return G(this,void 0,void 0,function(){var r,n,i,o=this;return H(this,function(s){switch(s.label){case 0:return r=this.fetch().then(function(a){o.logger.debug("Remote config client subscription all mode fetched from remote: ".concat(JSON.stringify(a))),o.sendCallback(e,a,"remote"),o.storage.setConfig(a)}),n=this.storage.fetchConfig().then(function(a){return a}),[4,Promise.race([r,n])];case 1:return i=s.sent(),i!==void 0&&(this.logger.debug("Remote config client subscription all mode fetched from cache: ".concat(JSON.stringify(i))),this.sendCallback(e,i,"cache")),[4,r];case 2:return s.sent(),[2]}})})},t.prototype.subscribeWaitForRemote=function(e,r){return G(this,void 0,void 0,function(){var n,i,i;return H(this,function(o){switch(o.label){case 0:n=new Promise(function(s,a){setTimeout(function(){a("Timeout exceeded")},r)}),o.label=1;case 1:return o.trys.push([1,3,,5]),[4,Promise.race([this.fetch(),n])];case 2:return i=o.sent(),this.logger.debug("Remote config client subscription wait for remote mode returns from remote."),this.sendCallback(e,i,"remote"),this.storage.setConfig(i),[3,5];case 3:return o.sent(),this.logger.debug("Remote config client subscription wait for remote mode exceeded timeout. Try to fetch from cache."),[4,this.storage.fetchConfig()];case 4:return i=o.sent(),i.remoteConfig!==null?(this.logger.debug("Remote config client subscription wait for remote mode returns a cached copy."),this.sendCallback(e,i,"cache")):(this.logger.debug("Remote config client subscription wait for remote mode failed to fetch cache."),this.sendCallback(e,i,"remote")),[3,5];case 5:return[2]}})})},t.prototype.sendCallback=function(e,r,n){e.lastCallback=new Date;var i;e.key?i=e.key.split(".").reduce(function(o,s){return o===null?o:s in o?o[s]:null},r.remoteConfig):i=r.remoteConfig,e.callback(i,n,r.lastFetch)},t.prototype.fetch=function(e,r){return e===void 0&&(e=Zh),r===void 0&&(r=Xh),G(this,void 0,void 0,function(){var n,i,o,s,a,u,c=this;return H(this,function(l){switch(l.label){case 0:n=r/e,i={remoteConfig:null,lastFetch:new Date},o=function(d){var h,f,p,g,m,v;return H(this,function(b){switch(b.label){case 0:h=new AbortController,f=setTimeout(function(){return h.abort()},r),b.label=1;case 1:return b.trys.push([1,7,8,9]),[4,fetch(s.getUrlParams(),{method:"GET",headers:{Accept:"*/*"},signal:h.signal})];case 2:return p=b.sent(),p.ok?[3,4]:[4,p.text()];case 3:return g=b.sent(),s.logger.debug("Remote config client fetch with retry time ".concat(e," failed with ").concat(p.status,": ").concat(g)),[3,6];case 4:return[4,p.json()];case 5:return m=b.sent(),[2,{value:{remoteConfig:m,lastFetch:new Date}}];case 6:return[3,9];case 7:return v=b.sent(),v instanceof Error&&v.name==="AbortError"?s.logger.debug("Remote config client fetch with retry time ".concat(e," timed out after ").concat(r,"ms")):s.logger.debug("Remote config client fetch with retry time ".concat(e," is rejected because: "),v),[3,9];case 8:return clearTimeout(f),[7];case 9:return d<e-1?[4,new Promise(function(E){return setTimeout(E,c.getJitterDelay(n))})]:[3,11];case 10:b.sent(),b.label=11;case 11:return[2]}})},s=this,a=0,l.label=1;case 1:return a<e?[5,o(a)]:[3,4];case 2:if(u=l.sent(),typeof u=="object")return[2,u.value];l.label=3;case 3:return a++,[3,1];case 4:return[2,i]}})})},t.prototype.getJitterDelay=function(e){return Math.floor(Math.random()*e)},t.prototype.getUrlParams=function(){var e=encodeURIComponent(this.apiKey),r=new URLSearchParams;return r.append("config_group",t.CONFIG_GROUP),"".concat(this.serverUrl,"/").concat(e,"?").concat(r.toString())},t.CONFIG_GROUP="browser",t})(),ze;(function(t){t[t.None=0]="None",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Verbose=3]="Verbose",t[t.Debug=4]="Debug"})(ze||(ze={}));var Fr="Amplitude Logger ",Us=(function(){function t(){this.logLevel=ze.None}return t.prototype.disable=function(){this.logLevel=ze.None},t.prototype.enable=function(e){e===void 0&&(e=ze.Warn),this.logLevel=e},t.prototype.log=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<ze.Verbose||console.log("".concat(Fr,"[Log]: ").concat(e.join(" ")))},t.prototype.warn=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<ze.Warn||console.warn("".concat(Fr,"[Warn]: ").concat(e.join(" ")))},t.prototype.error=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<ze.Error||console.error("".concat(Fr,"[Error]: ").concat(e.join(" ")))},t.prototype.debug=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.logLevel<ze.Debug||console.log("".concat(Fr,"[Debug]: ").concat(e.join(" ")))},t})(),Qh=(function(){function t(){this.productId="",this.quantity=1,this.price=0}return t.prototype.setProductId=function(e){return this.productId=e,this},t.prototype.setQuantity=function(e){return e>0&&(this.quantity=e),this},t.prototype.setPrice=function(e){return this.price=e,this},t.prototype.setRevenueType=function(e){return this.revenueType=e,this},t.prototype.setCurrency=function(e){return this.currency=e,this},t.prototype.setRevenue=function(e){return this.revenue=e,this},t.prototype.setReceipt=function(e){return this.receipt=e,this},t.prototype.setReceiptSig=function(e){return this.receiptSig=e,this},t.prototype.setEventProperties=function(e){return ni(e)&&(this.properties=e),this},t.prototype.getEventProperties=function(){var e=this.properties?Z({},this.properties):{};return e[Xe.REVENUE_PRODUCT_ID]=this.productId,e[Xe.REVENUE_QUANTITY]=this.quantity,e[Xe.REVENUE_PRICE]=this.price,e[Xe.REVENUE_TYPE]=this.revenueType,e[Xe.REVENUE_CURRENCY]=this.currency,e[Xe.REVENUE]=this.revenue,e[Xe.RECEIPT]=this.receipt,e[Xe.RECEIPT_SIG]=this.receiptSig,e},t})(),Xe;(function(t){t.REVENUE_PRODUCT_ID="$productId",t.REVENUE_QUANTITY="$quantity",t.REVENUE_PRICE="$price",t.REVENUE_TYPE="$revenueType",t.REVENUE_CURRENCY="$currency",t.REVENUE="$revenue",t.RECEIPT="$receipt",t.RECEIPT_SIG="$receiptSig"})(Xe||(Xe={}));var ep=function(t,e){var r=Math.max(e,1);return t.reduce(function(n,i,o){var s=Math.floor(o/r);return n[s]||(n[s]=[]),n[s].push(i),n},[])},Br=function(){return{flushMaxRetries:12,flushQueueSize:200,flushIntervalMillis:1e4,instanceName:Es,logLevel:ze.Warn,loggerProvider:new Us,offline:!1,optOut:!1,serverUrl:ws,serverZone:"US",useBatch:!1}},tp=(function(){function t(e){var r,n,i,o;this._optOut=!1;var s=Br();this.apiKey=e.apiKey,this.flushIntervalMillis=(r=e.flushIntervalMillis)!==null&&r!==void 0?r:s.flushIntervalMillis,this.flushMaxRetries=e.flushMaxRetries||s.flushMaxRetries,this.flushQueueSize=e.flushQueueSize||s.flushQueueSize,this.instanceName=e.instanceName||s.instanceName,this.loggerProvider=e.loggerProvider||s.loggerProvider,this.logLevel=(n=e.logLevel)!==null&&n!==void 0?n:s.logLevel,this.minIdLength=e.minIdLength,this.plan=e.plan,this.ingestionMetadata=e.ingestionMetadata,this.offline=e.offline!==void 0?e.offline:s.offline,this.optOut=(i=e.optOut)!==null&&i!==void 0?i:s.optOut,this.serverUrl=e.serverUrl,this.serverZone=e.serverZone||s.serverZone,this.storageProvider=e.storageProvider,this.transportProvider=e.transportProvider,this.useBatch=(o=e.useBatch)!==null&&o!==void 0?o:s.useBatch,this.loggerProvider.enable(this.logLevel);var a=Fs(e.serverUrl,e.serverZone,e.useBatch);this.serverZone=a.serverZone,this.serverUrl=a.serverUrl}return Object.defineProperty(t.prototype,"optOut",{get:function(){return this._optOut},set:function(e){this._optOut=e},enumerable:!1,configurable:!0}),t})(),rp=function(t,e){return t==="EU"?e?Sh:Eh:e?wh:ws},Fs=function(t,e,r){if(t===void 0&&(t=""),e===void 0&&(e=Br().serverZone),r===void 0&&(r=Br().useBatch),t)return{serverUrl:t,serverZone:void 0};var n=["US","EU"].includes(e)?e:Br().serverZone;return{serverZone:n,serverUrl:rp(n,r)}},np=(function(){function t(){this.sdk={metrics:{histogram:{}}}}return t.prototype.recordHistogram=function(e,r){this.sdk.metrics.histogram[e]=r},t})();function ip(t){return t instanceof Error?t.message:String(t)}function zr(t){var e="";try{"body"in t&&(e=JSON.stringify(t.body,null,2))}catch{}return e}var op=(function(){function t(){this.name="amplitude",this.type="destination",this.retryTimeout=1e3,this.throttleTimeout=3e4,this.storageKey="",this.scheduleId=null,this.scheduledTimeout=0,this.flushId=null,this.queue=[]}return t.prototype.setup=function(e){var r;return G(this,void 0,void 0,function(){var n,i=this;return H(this,function(o){switch(o.label){case 0:return this.config=e,this.storageKey="".concat(bh,"_").concat(this.config.apiKey.substring(0,10)),[4,(r=this.config.storageProvider)===null||r===void 0?void 0:r.get(this.storageKey)];case 1:return n=o.sent(),n&&n.length>0&&Promise.all(n.map(function(s){return i.execute(s)})).catch(),[2,Promise.resolve(void 0)]}})})},t.prototype.execute=function(e){var r=this;return e.insert_id||(e.insert_id=pt()),new Promise(function(n){var i={event:e,attempts:0,callback:function(o){return n(o)},timeout:0};r.queue.push(i),r.schedule(r.config.flushIntervalMillis),r.saveEvents()})},t.prototype.removeEventsExceedFlushMaxRetries=function(e){var r=this;return e.filter(function(n){return n.attempts+=1,n.attempts<r.config.flushMaxRetries?!0:(r.fulfillRequest([n],500,Nh),!1)})},t.prototype.scheduleEvents=function(e){var r=this;e.forEach(function(n){r.schedule(n.timeout===0?r.config.flushIntervalMillis:n.timeout)})},t.prototype.schedule=function(e){var r=this;if(!this.config.offline&&(this.scheduleId===null||this.scheduleId&&e>this.scheduledTimeout)){this.scheduleId&&clearTimeout(this.scheduleId),this.scheduledTimeout=e,this.scheduleId=setTimeout(function(){r.queue=r.queue.map(function(n){return n.timeout=0,n}),r.flush(!0)},e);return}},t.prototype.resetSchedule=function(){this.scheduleId=null,this.scheduledTimeout=0},t.prototype.flush=function(e){return e===void 0&&(e=!1),G(this,void 0,void 0,function(){var r,n,i,o=this;return H(this,function(s){switch(s.label){case 0:return this.config.offline?(this.resetSchedule(),this.config.loggerProvider.debug("Skipping flush while offline."),[2]):this.flushId?(this.resetSchedule(),this.config.loggerProvider.debug("Skipping flush because previous flush has not resolved."),[2]):(this.flushId=this.scheduleId,this.resetSchedule(),r=[],n=[],this.queue.forEach(function(a){return a.timeout===0?r.push(a):n.push(a)}),i=ep(r,this.config.flushQueueSize),[4,i.reduce(function(a,u){return G(o,void 0,void 0,function(){return H(this,function(c){switch(c.label){case 0:return[4,a];case 1:return c.sent(),[4,this.send(u,e)];case 2:return[2,c.sent()]}})})},Promise.resolve())]);case 1:return s.sent(),this.flushId=null,this.scheduleEvents(this.queue),[2]}})})},t.prototype.send=function(e,r){return r===void 0&&(r=!0),G(this,void 0,void 0,function(){var n,i,o,s,a;return H(this,function(u){switch(u.label){case 0:if(!this.config.apiKey)return[2,this.fulfillRequest(e,400,Uh)];n={api_key:this.config.apiKey,events:e.map(function(c){var l=c.event;l.extra;var d=ei(l,["extra"]);return d}),options:{min_id_length:this.config.minIdLength},client_upload_time:new Date().toISOString(),request_metadata:this.config.requestMetadata},this.config.requestMetadata=new np,u.label=1;case 1:return u.trys.push([1,3,,4]),i=Fs(this.config.serverUrl,this.config.serverZone,this.config.useBatch).serverUrl,[4,this.config.transportProvider.send(i,n)];case 2:return o=u.sent(),o===null?(this.fulfillRequest(e,0,Lh),[2]):r?(this.handleResponse(o,e),[3,4]):("body"in o?this.fulfillRequest(e,o.statusCode,"".concat(o.status,": ").concat(zr(o))):this.fulfillRequest(e,o.statusCode,o.status),[2]);case 3:return s=u.sent(),a=ip(s),this.config.loggerProvider.error(a),this.handleResponse({status:Se.Failed,statusCode:0},e),[3,4];case 4:return[2]}})})},t.prototype.handleResponse=function(e,r){var n=e.status;switch(n){case Se.Success:{this.handleSuccessResponse(e,r);break}case Se.Invalid:{this.handleInvalidResponse(e,r);break}case Se.PayloadTooLarge:{this.handlePayloadTooLargeResponse(e,r);break}case Se.RateLimit:{this.handleRateLimitResponse(e,r);break}default:{this.config.loggerProvider.warn(`{code: 0, error: "Status '`.concat(n,"' provided for ").concat(r.length,' events"}')),this.handleOtherResponse(r);break}}},t.prototype.handleSuccessResponse=function(e,r){this.fulfillRequest(r,e.statusCode,Dh)},t.prototype.handleInvalidResponse=function(e,r){var n=this;if(e.body.missingField||e.body.error.startsWith(Fh)){this.fulfillRequest(r,e.statusCode,e.body.error);return}var i=ue(ue(ue(ue([],ne(Object.values(e.body.eventsWithInvalidFields)),!1),ne(Object.values(e.body.eventsWithMissingFields)),!1),ne(Object.values(e.body.eventsWithInvalidIdLengths)),!1),ne(e.body.silencedEvents),!1).flat(),o=new Set(i),s=r.filter(function(u,c){if(o.has(c)){n.fulfillRequest([u],e.statusCode,e.body.error);return}return!0});s.length>0&&this.config.loggerProvider.warn(zr(e));var a=this.removeEventsExceedFlushMaxRetries(s);this.scheduleEvents(a)},t.prototype.handlePayloadTooLargeResponse=function(e,r){if(r.length===1){this.fulfillRequest(r,e.statusCode,e.body.error);return}this.config.loggerProvider.warn(zr(e)),this.config.flushQueueSize/=2;var n=this.removeEventsExceedFlushMaxRetries(r);this.scheduleEvents(n)},t.prototype.handleRateLimitResponse=function(e,r){var n=this,i=Object.keys(e.body.exceededDailyQuotaUsers),o=Object.keys(e.body.exceededDailyQuotaDevices),s=e.body.throttledEvents,a=new Set(i),u=new Set(o),c=new Set(s),l=r.filter(function(h,f){if(h.event.user_id&&a.has(h.event.user_id)||h.event.device_id&&u.has(h.event.device_id)){n.fulfillRequest([h],e.statusCode,e.body.error);return}return c.has(f)&&(h.timeout=n.throttleTimeout),!0});l.length>0&&this.config.loggerProvider.warn(zr(e));var d=this.removeEventsExceedFlushMaxRetries(l);this.scheduleEvents(d)},t.prototype.handleOtherResponse=function(e){var r=this,n=e.map(function(o){return o.timeout=o.attempts*r.retryTimeout,o}),i=this.removeEventsExceedFlushMaxRetries(n);this.scheduleEvents(i)},t.prototype.fulfillRequest=function(e,r,n){this.removeEvents(e),e.forEach(function(i){return i.callback(Bt(i.event,r,n))})},t.prototype.saveEvents=function(){if(this.config.storageProvider){var e=this.queue.map(function(r){return r.event});this.config.storageProvider.set(this.storageKey,e)}},t.prototype.removeEvents=function(e){this.queue=this.queue.filter(function(r){return!e.some(function(n){return n.event.insert_id===r.event.insert_id})}),this.saveEvents()},t})(),sp=(function(){function t(){}return t.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:ap(),platform:"Web",os:void 0,deviceModel:void 0}},t})(),ap=function(){return typeof navigator<"u"&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},up=(function(){function t(){this.queue=[]}return t.prototype.logEvent=function(e){this.receiver?this.receiver(e):this.queue.length<512&&this.queue.push(e)},t.prototype.setEventReceiver=function(e){this.receiver=e,this.queue.length>0&&(this.queue.forEach(function(r){e(r)}),this.queue=[])},t})(),gt=function(){return gt=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},gt.apply(this,arguments)};function jr(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Bs(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(s)throw s.error}}return o}typeof SuppressedError=="function"&&SuppressedError;var $r=function(t,e){var r,n,i=["string","number","boolean","undefined"],o=typeof t,s=typeof e;if(o!==s)return!1;try{for(var a=jr(i),u=a.next();!u.done;u=a.next()){var c=u.value;if(c===o)return t===e}}catch(m){r={error:m}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;var l=Array.isArray(t),d=Array.isArray(e);if(l!==d)return!1;if(l&&d){for(var h=0;h<t.length;h++)if(!$r(t[h],e[h]))return!1}else{var f=Object.keys(t).sort(),p=Object.keys(e).sort();if(!$r(f,p))return!1;var g=!0;return Object.keys(t).forEach(function(m){$r(t[m],e[m])||(g=!1)}),g}return!0},cp="$set",lp="$unset",dp="$clearAll";Object.entries||(Object.entries=function(t){for(var e=Object.keys(t),r=e.length,n=new Array(r);r--;)n[r]=[e[r],t[e[r]]];return n});var fp=(function(){function t(){this.identity={userProperties:{}},this.listeners=new Set}return t.prototype.editIdentity=function(){var e=this,r=gt({},this.identity.userProperties),n=gt(gt({},this.identity),{userProperties:r});return{setUserId:function(i){return n.userId=i,this},setDeviceId:function(i){return n.deviceId=i,this},setUserProperties:function(i){return n.userProperties=i,this},setOptOut:function(i){return n.optOut=i,this},updateUserProperties:function(i){var o,s,a,u,c,l,d=n.userProperties||{};try{for(var h=jr(Object.entries(i)),f=h.next();!f.done;f=h.next()){var p=Bs(f.value,2),g=p[0],m=p[1];switch(g){case cp:try{for(var v=(a=void 0,jr(Object.entries(m))),b=v.next();!b.done;b=v.next()){var E=Bs(b.value,2),S=E[0],T=E[1];d[S]=T}}catch(P){a={error:P}}finally{try{b&&!b.done&&(u=v.return)&&u.call(v)}finally{if(a)throw a.error}}break;case lp:try{for(var x=(c=void 0,jr(Object.keys(m))),C=x.next();!C.done;C=x.next()){var S=C.value;delete d[S]}}catch(P){c={error:P}}finally{try{C&&!C.done&&(l=x.return)&&l.call(x)}finally{if(c)throw c.error}}break;case dp:d={};break}}}catch(P){o={error:P}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}return n.userProperties=d,this},commit:function(){return e.setIdentity(n),this}}},t.prototype.getIdentity=function(){return gt({},this.identity)},t.prototype.setIdentity=function(e){var r=gt({},this.identity);this.identity=gt({},e),$r(r,this.identity)||this.listeners.forEach(function(n){n(e)})},t.prototype.addIdentityListener=function(e){this.listeners.add(e)},t.prototype.removeIdentityListener=function(e){this.listeners.delete(e)},t})(),Zt=typeof globalThis<"u"?globalThis:typeof global<"u"?global:self,hp=(function(){function t(){this.identityStore=new fp,this.eventBridge=new up,this.applicationContextProvider=new sp}return t.getInstance=function(e){return Zt.analyticsConnectorInstances||(Zt.analyticsConnectorInstances={}),Zt.analyticsConnectorInstances[e]||(Zt.analyticsConnectorInstances[e]=new t),Zt.analyticsConnectorInstances[e]},t})(),Xt=function(t){return t===void 0&&(t=Es),hp.getInstance(t)},pp=function(t,e){Xt(e).identityStore.editIdentity().setUserId(t).commit()},gp=function(t,e){Xt(e).identityStore.editIdentity().setDeviceId(t).commit()},vp=(function(){function t(){this.name="identity",this.type="before",this.identityStore=Xt().identityStore}return t.prototype.execute=function(e){return G(this,void 0,void 0,function(){var r;return H(this,function(n){return r=e.user_properties,r&&this.identityStore.editIdentity().updateUserProperties(r).commit(),[2,e]})})},t.prototype.setup=function(e){return G(this,void 0,void 0,function(){return H(this,function(r){return e.instanceName&&(this.identityStore=Xt(e.instanceName).identityStore),[2]})})},t})(),zs=function(t,e){e===void 0&&(e=Date.now());var r=Date.now(),n=r-e;return n>t},js=function(t,e,r){return e===void 0&&(e=""),r===void 0&&(r=10),[Mr,e,t.substring(0,r)].filter(Boolean).join("_")},mp=function(t){return"".concat(Mr.toLowerCase(),"_").concat(t.substring(0,6))},yp=function(){var t,e,r,n;if(typeof navigator>"u")return"";var i=navigator.userLanguage;return(n=(r=(e=(t=navigator.languages)===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:navigator.language)!==null&&r!==void 0?r:i)!==null&&n!==void 0?n:""},qr=function(){var t,e=Ie();if(!(!((t=e?.location)===null||t===void 0)&&t.search))return{};var r=e.location.search.substring(1).split("&").filter(Boolean),n=r.reduce(function(i,o){var s=o.split("=",2),a=$s(s[0]),u=$s(s[1]);return u&&(i[a]=u),i},{});return n},$s=function(t){t===void 0&&(t="");try{return decodeURIComponent(t)}catch{return""}},_p=function(t){var e=new Error().stack||"";return e.split(`
`).slice(2+t).map(function(r){return r.trim()})},ye=function(t){return function(){var e=Z({},t.config),r=e.loggerProvider,n=e.logLevel;return{logger:r,logLevel:n}}},bp=function(t,e){var r,n;e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,"");try{for(var i=ae(e.split(".")),o=i.next();!o.done;o=i.next()){var s=o.value;if(s in t)t=t[s];else return}}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return t},_e=function(t,e){return function(){var r,n,i={};try{for(var o=ae(e),s=o.next();!s.done;s=o.next()){var a=s.value;i[a]=bp(t,a)}}catch(u){r={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return i}},be=function(t,e,r,n,i){return i===void 0&&(i=null),function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var a=r(),u=a.logger,c=a.logLevel;if(c&&c<ze.Debug||!c||!u)return t.apply(i,o);var l={type:"invoke public method",name:e,args:o,stacktrace:_p(1),time:{start:new Date().toISOString()},states:{}};n&&l.states&&(l.states.before=n());var d=t.apply(i,o);return d&&d.promise?d.promise.then(function(){n&&l.states&&(l.states.after=n()),l.time&&(l.time.end=new Date().toISOString()),u.debug(JSON.stringify(l,null,2))}):(n&&l.states&&(l.states.after=n()),l.time&&(l.time.end=new Date().toISOString()),u.debug(JSON.stringify(l,null,2))),d}},ii=function(t,e){return!e||!e.length?!0:e.some(function(r){return typeof r=="string"?t===r:t.match(r)})},oi=(function(){function t(){this.memoryStorage=new Map}return t.prototype.isEnabled=function(){return G(this,void 0,void 0,function(){return H(this,function(e){return[2,!0]})})},t.prototype.get=function(e){return G(this,void 0,void 0,function(){return H(this,function(r){return[2,this.memoryStorage.get(e)]})})},t.prototype.getRaw=function(e){return G(this,void 0,void 0,function(){var r;return H(this,function(n){switch(n.label){case 0:return[4,this.get(e)];case 1:return r=n.sent(),[2,r?JSON.stringify(r):void 0]}})})},t.prototype.set=function(e,r){return G(this,void 0,void 0,function(){return H(this,function(n){return this.memoryStorage.set(e,r),[2]})})},t.prototype.remove=function(e){return G(this,void 0,void 0,function(){return H(this,function(r){return this.memoryStorage.delete(e),[2]})})},t.prototype.reset=function(){return G(this,void 0,void 0,function(){return H(this,function(e){return this.memoryStorage.clear(),[2]})})},t})(),si=(function(){function t(e){this.options=Z({},e)}return t.prototype.isEnabled=function(){return G(this,void 0,void 0,function(){var e,r,n;return H(this,function(i){switch(i.label){case 0:if(!Ie())return[2,!1];t.testValue=String(Date.now()),e=new t(this.options),r="AMP_TEST",i.label=1;case 1:return i.trys.push([1,4,5,7]),[4,e.set(r,t.testValue)];case 2:return i.sent(),[4,e.get(r)];case 3:return n=i.sent(),[2,n===t.testValue];case 4:return i.sent(),[2,!1];case 5:return[4,e.remove(r)];case 6:return i.sent(),[7];case 7:return[2]}})})},t.prototype.get=function(e){var r;return G(this,void 0,void 0,function(){var n,i;return H(this,function(o){switch(o.label){case 0:return[4,this.getRaw(e)];case 1:if(n=o.sent(),!n)return[2,void 0];try{return i=(r=Ep(n))!==null&&r!==void 0?r:wp(n),i===void 0?(console.error("Amplitude Logger [Error]: Failed to decode cookie value for key: ".concat(e,", value: ").concat(n)),[2,void 0]):[2,JSON.parse(i)]}catch{return console.error("Amplitude Logger [Error]: Failed to parse cookie value for key: ".concat(e,", value: ").concat(n)),[2,void 0]}return[2]}})})},t.prototype.getRaw=function(e){var r,n;return G(this,void 0,void 0,function(){var i,o,s;return H(this,function(a){return i=Ie(),o=(n=(r=i?.document)===null||r===void 0?void 0:r.cookie.split("; "))!==null&&n!==void 0?n:[],s=o.find(function(u){return u.indexOf(e+"=")===0}),s?[2,s.substring(e.length+1)]:[2,void 0]})})},t.prototype.set=function(e,r){var n;return G(this,void 0,void 0,function(){var i,o,s,a,u,c,l;return H(this,function(d){try{i=(n=this.options.expirationDays)!==null&&n!==void 0?n:0,o=r!==null?i:-1,s=void 0,o&&(a=new Date,a.setTime(a.getTime()+o*24*60*60*1e3),s=a),u="".concat(e,"=").concat(btoa(encodeURIComponent(JSON.stringify(r)))),s&&(u+="; expires=".concat(s.toUTCString())),u+="; path=/",this.options.domain&&(u+="; domain=".concat(this.options.domain)),this.options.secure&&(u+="; Secure"),this.options.sameSite&&(u+="; SameSite=".concat(this.options.sameSite)),c=Ie(),c&&(c.document.cookie=u)}catch(h){l=h instanceof Error?h.message:String(h),console.error("Amplitude Logger [Error]: Failed to set cookie for key: ".concat(e,". Error: ").concat(l))}return[2]})})},t.prototype.remove=function(e){return G(this,void 0,void 0,function(){return H(this,function(r){switch(r.label){case 0:return[4,this.set(e,null)];case 1:return r.sent(),[2]}})})},t.prototype.reset=function(){return G(this,void 0,void 0,function(){return H(this,function(e){return[2]})})},t})(),Ep=function(t){try{return decodeURIComponent(atob(t))}catch{return}},wp=function(t){try{return decodeURIComponent(atob(decodeURIComponent(t)))}catch{return}},qs=function(t,e,r){return e===void 0&&(e=""),r===void 0&&(r=10),[Mr,e,t.substring(0,r)].filter(Boolean).join("_")},Ws=(function(){function t(e){this.storage=e}return t.prototype.isEnabled=function(){return G(this,void 0,void 0,function(){var e,r,n,i;return H(this,function(o){switch(o.label){case 0:if(!this.storage)return[2,!1];e=String(Date.now()),r=new t(this.storage),n="AMP_TEST",o.label=1;case 1:return o.trys.push([1,4,5,7]),[4,r.set(n,e)];case 2:return o.sent(),[4,r.get(n)];case 3:return i=o.sent(),[2,i===e];case 4:return o.sent(),[2,!1];case 5:return[4,r.remove(n)];case 6:return o.sent(),[7];case 7:return[2]}})})},t.prototype.get=function(e){return G(this,void 0,void 0,function(){var r;return H(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.getRaw(e)];case 1:return r=n.sent(),r?[2,JSON.parse(r)]:[2,void 0];case 2:return n.sent(),console.error("[Amplitude] Error: Could not get value from storage"),[2,void 0];case 3:return[2]}})})},t.prototype.getRaw=function(e){var r;return G(this,void 0,void 0,function(){return H(this,function(n){return[2,((r=this.storage)===null||r===void 0?void 0:r.getItem(e))||void 0]})})},t.prototype.set=function(e,r){var n;return G(this,void 0,void 0,function(){return H(this,function(i){try{(n=this.storage)===null||n===void 0||n.setItem(e,JSON.stringify(r))}catch{}return[2]})})},t.prototype.remove=function(e){var r;return G(this,void 0,void 0,function(){return H(this,function(n){try{(r=this.storage)===null||r===void 0||r.removeItem(e)}catch{}return[2]})})},t.prototype.reset=function(){var e;return G(this,void 0,void 0,function(){return H(this,function(r){try{(e=this.storage)===null||e===void 0||e.clear()}catch{}return[2]})})},t})(),ai=(function(){function t(){}return t.prototype.send=function(e,r){return Promise.resolve(null)},t.prototype.buildResponse=function(e){var r,n,i,o,s,a,u,c,l,d,h,f,p,g,m,v,b,E,S,T,x,C;if(typeof e!="object")return null;var P=e.code||0,I=this.buildStatus(P);switch(I){case Se.Success:return{status:I,statusCode:P,body:{eventsIngested:(r=e.events_ingested)!==null&&r!==void 0?r:0,payloadSizeBytes:(n=e.payload_size_bytes)!==null&&n!==void 0?n:0,serverUploadTime:(i=e.server_upload_time)!==null&&i!==void 0?i:0}};case Se.Invalid:return{status:I,statusCode:P,body:{error:(o=e.error)!==null&&o!==void 0?o:"",missingField:(s=e.missing_field)!==null&&s!==void 0?s:"",eventsWithInvalidFields:(a=e.events_with_invalid_fields)!==null&&a!==void 0?a:{},eventsWithMissingFields:(u=e.events_with_missing_fields)!==null&&u!==void 0?u:{},eventsWithInvalidIdLengths:(c=e.events_with_invalid_id_lengths)!==null&&c!==void 0?c:{},epsThreshold:(l=e.eps_threshold)!==null&&l!==void 0?l:0,exceededDailyQuotaDevices:(d=e.exceeded_daily_quota_devices)!==null&&d!==void 0?d:{},silencedDevices:(h=e.silenced_devices)!==null&&h!==void 0?h:[],silencedEvents:(f=e.silenced_events)!==null&&f!==void 0?f:[],throttledDevices:(p=e.throttled_devices)!==null&&p!==void 0?p:{},throttledEvents:(g=e.throttled_events)!==null&&g!==void 0?g:[]}};case Se.PayloadTooLarge:return{status:I,statusCode:P,body:{error:(m=e.error)!==null&&m!==void 0?m:""}};case Se.RateLimit:return{status:I,statusCode:P,body:{error:(v=e.error)!==null&&v!==void 0?v:"",epsThreshold:(b=e.eps_threshold)!==null&&b!==void 0?b:0,throttledDevices:(E=e.throttled_devices)!==null&&E!==void 0?E:{},throttledUsers:(S=e.throttled_users)!==null&&S!==void 0?S:{},exceededDailyQuotaDevices:(T=e.exceeded_daily_quota_devices)!==null&&T!==void 0?T:{},exceededDailyQuotaUsers:(x=e.exceeded_daily_quota_users)!==null&&x!==void 0?x:{},throttledEvents:(C=e.throttled_events)!==null&&C!==void 0?C:[]}};case Se.Timeout:default:return{status:I,statusCode:P}}},t.prototype.buildStatus=function(e){return e>=200&&e<300?Se.Success:e===429?Se.RateLimit:e===413?Se.PayloadTooLarge:e===408?Se.Timeout:e>=400&&e<500?Se.Invalid:e>=500?Se.Failed:Se.Unknown},t})(),Sp=(function(t){Me(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.send=function(r,n){return G(this,void 0,void 0,function(){var i,o,s;return H(this,function(a){switch(a.label){case 0:if(typeof fetch>"u")throw new Error("FetchTransport is not supported");return i={headers:{"Content-Type":"application/json",Accept:"*/*"},body:JSON.stringify(n),method:"POST"},[4,fetch(r,i)];case 1:return o=a.sent(),[4,o.text()];case 2:s=a.sent();try{return[2,this.buildResponse(JSON.parse(s))]}catch{return[2,this.buildResponse({code:o.status})]}return[2]}})})},e})(ai),Tp=null,Ap=["a","button","input","select","textarea","label","video","audio",'[contenteditable="true" i]',"[data-amp-default-track]",".amp-default-track"],Hs="data-amp-track-",kp=["div","span","h1","h2","h3","h4","h5","h6"],xp=["a","button",'[role="button"]','[role="link"]','[role="menuitem"]','[role="menuitemcheckbox"]','[role="menuitemradio"]','[role="option"]','[role="tab"]','[role="treeitem"]','[contenteditable="true" i]'],Ip=ue(['input[type="button"]','input[type="submit"]','input[type="reset"]','input[type="image"]','input[type="file"]'],ne(xp),!1),Cp=["*"],Rp=1e3,Pp=4,Op=50;function Dp(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||t===null||t===void 0}function Gs(t,e,r){if(t){var n=e.map(Ks),i=r.map(Ks);Vs({json:t,allowlist:n,excludelist:i,ancestors:[]})}}function Vs(t){var e,r,n=t.json,i=t.targetObject,o=t.allowlist,s=t.excludelist,a=t.ancestors,u=t.parentObject,c=t.targetKey;i||(i=n);var l=Object.keys(i);try{for(var d=ae(l),h=d.next();!h.done;h=d.next()){var f=h.value,p=ue(ue([],ne(a),!1),[f],!1);Dp(i[f])?(!Ys(p,o)||Ys(p,s))&&delete i[f]:Vs({json:n,targetObject:i[f],allowlist:o,excludelist:s,ancestors:p,parentObject:i,targetKey:f})}}catch(g){e={error:g}}finally{try{h&&!h.done&&(r=d.return)&&r.call(d)}finally{if(e)throw e.error}}Object.keys(i).length===0&&u&&c&&delete u[c]}function Ks(t){return t.startsWith("/")&&(t=t.slice(1)),t.split("/").map(function(e){return e.replace(/~0/g,"~").replace(/~1/g,"/")})}function ui(t,e,r,n){if(r===void 0&&(r=0),n===void 0&&(n=0),n===e.length)return r===t.length;if(r===t.length){for(;n<e.length&&e[n]==="**";)n++;return n===e.length}var i=e[n];if(i==="**"){if(n+1===e.length)return!0;for(var o=r;o<=t.length;o++)if(ui(t,e,o,n+1))return!0;return!1}else return i==="*"||i===t[r]?ui(t,e,r+1,n+1):!1}function Ys(t,e){return e.some(function(r){return ui(t,r)})}var Lp=500,Zs=100,Np=(function(){function t(e){this.request=e}return t.prototype.headers=function(e){var r,n;e===void 0&&(e=[]);var i=this.request.headers,o={};if(Array.isArray(i))i.forEach(function(d){var h=ne(d,2),f=h[0],p=h[1];o[f]=p});else if(i instanceof Headers)i.forEach(function(d,h){o[h]=d});else if(typeof i=="object"&&i!==null)try{for(var s=ae(Object.entries(i)),a=s.next();!a.done;a=s.next()){var u=ne(a.value,2),c=u[0],l=u[1];o[c]=l}}catch(d){r={error:d}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return Wr(o,{allow:e})},Object.defineProperty(t.prototype,"bodySize",{get:function(){if(typeof this._bodySize=="number")return this._bodySize;var e=Ie();if(e?.TextEncoder){var r=this.request.body;return this._bodySize=Xs(r,Zs),this._bodySize}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"method",{get:function(){return this.request.method},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"body",{get:function(){return typeof this.request.body=="string"?this.request.body:null},enumerable:!1,configurable:!0}),t.prototype.json=function(e,r){return e===void 0&&(e=[]),r===void 0&&(r=[]),G(this,void 0,void 0,function(){var n;return H(this,function(i){return e.length===0?[2,null]:(n=this.body,[2,ci(n,e,r)])})})},t})(),Mp=(function(){function t(e,r){this.bodyRaw=e,this.requestHeaders=r}return t.prototype.headers=function(e){return e===void 0&&(e=[]),Wr(this.requestHeaders,{allow:e})},Object.defineProperty(t.prototype,"bodySize",{get:function(){return Xs(this.bodyRaw,Zs)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"body",{get:function(){return typeof this.bodyRaw=="string"?this.bodyRaw:null},enumerable:!1,configurable:!0}),t.prototype.json=function(e,r){return e===void 0&&(e=[]),r===void 0&&(r=[]),G(this,void 0,void 0,function(){var n;return H(this,function(i){return e.length===0?[2,null]:(n=this.body,[2,ci(n,e,r)])})})},t})();function Xs(t,e){var r,n,i,o=Ie(),s=o?.TextEncoder;if(s){var a;if(typeof t=="string")a=t,i=new s().encode(a).length;else if(t instanceof Blob)a=t,i=a.size;else if(t instanceof URLSearchParams)a=t,i=new s().encode(a.toString()).length;else if(ArrayBuffer.isView(t))a=t,i=a.byteLength;else if(t instanceof ArrayBuffer)a=t,i=a.byteLength;else if(t instanceof FormData){var u=t,c=0,l=0;try{for(var d=ae(u.entries()),h=d.next();!h.done;h=d.next()){var f=ne(h.value,2),p=f[0],g=f[1];if(c+=p.length,typeof g=="string")c+=new s().encode(g).length;else if(g instanceof Blob)c+=g.size;else return;if(++l>=e)return}}catch(m){r={error:m}}finally{try{h&&!h.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}i=c}else if(t instanceof ReadableStream){a=t;return}return i}}var Up=(function(){function t(e){this.response=e}return t.prototype.headers=function(e){var r;if(e===void 0&&(e=[]),this.response.headers instanceof Headers){var n=this.response.headers,i={};return(r=n?.forEach)===null||r===void 0||r.call(n,function(o,s){i[s]=o}),Wr(i,{allow:e})}},Object.defineProperty(t.prototype,"bodySize",{get:function(){var e,r;if(this._bodySize!==void 0)return this._bodySize;var n=(r=(e=this.response.headers)===null||e===void 0?void 0:e.get)===null||r===void 0?void 0:r.call(e,"content-length"),i=n?parseInt(n,10):void 0;return this._bodySize=i,i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this.response.status},enumerable:!1,configurable:!0}),t.prototype.text=function(){return G(this,void 0,void 0,function(){var e,r,n;return H(this,function(i){switch(i.label){case 0:this.clonedResponse||(this.clonedResponse=this.response.clone()),i.label=1;case 1:return i.trys.push([1,3,,4]),e=this.clonedResponse.text(),r=new Promise(function(o){return setTimeout(function(){return o(null)},Lp)}),[4,Promise.race([e,r])];case 2:return n=i.sent(),[2,n];case 3:return i.sent(),[2,null];case 4:return[2]}})})},t.prototype.json=function(e,r){return e===void 0&&(e=[]),r===void 0&&(r=[]),G(this,void 0,void 0,function(){var n;return H(this,function(i){switch(i.label){case 0:return e.length===0?[2,null]:[4,this.text()];case 1:return n=i.sent(),[2,ci(n,e,r)]}})})},t})(),Fp=(function(){function t(e,r,n,i){this.statusCode=e,this.headersString=r,this.size=n,this.getJson=i}return Object.defineProperty(t.prototype,"bodySize",{get:function(){return this.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this.statusCode},enumerable:!1,configurable:!0}),t.prototype.headers=function(e){var r,n;if(e===void 0&&(e=[]),!this.headersString)return{};var i={},o=this.headersString.split(`\r
`);try{for(var s=ae(o),a=s.next();!a.done;a=s.next()){var u=a.value,c=ne(u.split(": "),2),l=c[0],d=c[1];l&&d&&(i[l]=d)}}catch(h){r={error:h}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return Wr(i,{allow:e})},t.prototype.json=function(e,r){return e===void 0&&(e=[]),r===void 0&&(r=[]),G(this,void 0,void 0,function(){var n;return H(this,function(i){return e.length===0?[2,null]:(n=this.getJson(),n?(Gs(n,e,r),[2,n]):[2,null])})})},t})();function ci(t,e,r){if(!t)return null;try{var n=JSON.parse(t);return Gs(n,e,r),n}catch{return null}}var Jt;(function(t){t.REDACT="redact",t.REMOVE="remove"})(Jt||(Jt={}));var Js="[REDACTED]",Wr=function(t,e){var r,n,i=e.allow,o=i===void 0?[]:i,s=e.strategy,a=s===void 0?Jt.REMOVE:s,u=ue([],ne(Rh),!1),c={},l=function(p){var g=p.toLowerCase();u.find(function(m){return m.toLowerCase()===g})?a===Jt.REDACT&&(c[p]=Js):o.find(function(m){return m.toLowerCase()===g})?c[p]=t[p]:a===Jt.REDACT&&(c[p]=Js)};try{for(var d=ae(Object.keys(t)),h=d.next();!h.done;h=d.next()){var f=h.value;l(f)}}catch(p){r={error:p}}finally{try{h&&!h.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}return c},Bp=(function(){function t(e,r,n,i,o,s,a,u,c,l,d){a===void 0&&(a=0),this.type=e,this.method=r,this.timestamp=n,this.startTime=i,this.url=o,this.requestWrapper=s,this.status=a,this.duration=u,this.responseWrapper=c,this.error=l,this.endTime=d}return t.prototype.toSerializable=function(){var e,r,n,i,o={type:this.type,method:this.method,url:this.url,timestamp:this.timestamp,status:this.status,duration:this.duration,error:this.error,startTime:this.startTime,endTime:this.endTime,requestHeaders:(e=this.requestWrapper)===null||e===void 0?void 0:e.headers(ue([],ne(ri),!1)),requestBodySize:(r=this.requestWrapper)===null||r===void 0?void 0:r.bodySize,responseHeaders:(n=this.responseWrapper)===null||n===void 0?void 0:n.headers(ue([],ne(ri),!1)),responseBodySize:(i=this.responseWrapper)===null||i===void 0?void 0:i.bodySize};return Object.fromEntries(Object.entries(o).filter(function(s){var a=ne(s,2);a[0];var u=a[1];return u!==void 0}))},t})();function zp(t){return typeof t=="object"&&t!==null&&"url"in t&&"method"in t}var jp=(function(){function t(e,r){r===void 0&&(r=pt()),this.callback=e,this.id=r}return t})(),$p=(function(){function t(e){this.eventCallbacks=new Map,this.isObserving=!1,this.logger=e;var r=Ie();t.isSupported()&&(this.globalScope=r)}return t.isSupported=function(){var e=Ie();return!!e&&!!e.fetch},t.prototype.subscribe=function(e,r){var n,i,o,s,a,u,c,l,d,h;if(this.logger||(this.logger=r),this.eventCallbacks.set(e.id,e),!this.isObserving){var f=(o=(i=(n=this.globalScope)===null||n===void 0?void 0:n.XMLHttpRequest)===null||i===void 0?void 0:i.prototype)===null||o===void 0?void 0:o.open,p=(u=(a=(s=this.globalScope)===null||s===void 0?void 0:s.XMLHttpRequest)===null||a===void 0?void 0:a.prototype)===null||u===void 0?void 0:u.send,g=(d=(l=(c=this.globalScope)===null||c===void 0?void 0:c.XMLHttpRequest)===null||l===void 0?void 0:l.prototype)===null||d===void 0?void 0:d.setRequestHeader;f&&p&&g&&this.observeXhr(f,p,g);var m=(h=this.globalScope)===null||h===void 0?void 0:h.fetch;m&&this.observeFetch(m),this.isObserving=!0}},t.prototype.unsubscribe=function(e){this.eventCallbacks.delete(e.id)},t.prototype.triggerEventCallbacks=function(e){var r=this;this.eventCallbacks.forEach(function(n){var i;try{n.callback(e)}catch(o){(i=r.logger)===null||i===void 0||i.debug("an unexpected error occurred while triggering event callbacks",o)}})},t.prototype.handleNetworkRequestEvent=function(e,r,n,i,o,s,a){var u,c;if(!(s===void 0||a===void 0)){var l,d="GET";if(zp(r)?(l=r.url,d=r.method):l=(u=r?.toString)===null||u===void 0?void 0:u.call(r),l)try{var h=new URL(l);l="".concat(h.protocol,"//").concat(h.host).concat(h.pathname).concat(h.search).concat(h.hash)}catch(b){(c=this.logger)===null||c===void 0||c.error("an unexpected error occurred while parsing the URL",b)}d=n?.method||d;var f,p;i&&(f=i.status),o&&(p={name:o.name||"UnknownError",message:o.message||"An unknown error occurred"},f=0);var g=Math.floor(performance.now()-a),m=Math.floor(s+g),v=new Bp(e,d,s,s,l,n,f,g,i,p,m);this.triggerEventCallbacks(v)}},t.prototype.getTimestamps=function(){var e,r;return{startTime:(e=Date.now)===null||e===void 0?void 0:e.call(Date),durationStart:(r=performance?.now)===null||r===void 0?void 0:r.call(performance)}},t.prototype.observeFetch=function(e){var r=this;!this.globalScope||!e||(this.globalScope.fetch=function(n,i){return G(r,void 0,void 0,function(){var o,s,a,u,c,l;return H(this,function(d){switch(d.label){case 0:try{o=this.getTimestamps()}catch(h){(c=this.logger)===null||c===void 0||c.debug("an unexpected error occurred while retrieving timestamps",h)}d.label=1;case 1:return d.trys.push([1,3,,4]),[4,e(n,i)];case 2:return s=d.sent(),[3,4];case 3:return u=d.sent(),a=u,[3,4];case 4:try{this.handleNetworkRequestEvent("fetch",n,i?new Np(i):void 0,s?new Up(s):void 0,a,o?.startTime,o?.durationStart)}catch(h){(l=this.logger)===null||l===void 0||l.debug("an unexpected error occurred while handling fetch",h)}if(s)return[2,s];throw a}})})})},t.createXhrJsonParser=function(e,r){return function(){var n,i;try{if(e.responseType==="json"){if(!((n=r.globalScope)===null||n===void 0)&&n.structuredClone)return r.globalScope.structuredClone(e.response)}else if(["text",""].includes(e.responseType))return JSON.parse(e.responseText)}catch(o){return o instanceof Error&&o.name==="InvalidStateError"&&((i=r.logger)===null||i===void 0||i.error("unexpected error when retrieving responseText. responseType='".concat(e.responseType,"'"))),null}return null}},t.prototype.observeXhr=function(e,r,n){if(!(!this.globalScope||!e||!r)){var i=this.globalScope.XMLHttpRequest.prototype,o=this;i.open=function(){for(var s,a,u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];var l=this,d=ne(u,2),h=d[0],f=d[1];try{l.$$AmplitudeAnalyticsEvent=Z({method:h,url:(s=f?.toString)===null||s===void 0?void 0:s.call(f),headers:{}},o.getTimestamps())}catch(p){(a=o.logger)===null||a===void 0||a.error("an unexpected error occurred while calling xhr open",p)}return e.apply(l,u)},i.send=function(){for(var s=[],a=0;a<arguments.length;a++)s[a]=arguments[a];var u=this,c=u,l=t.createXhrJsonParser(u,o),d=s[0],h=c.$$AmplitudeAnalyticsEvent;return c.addEventListener("loadend",function(){var f;try{var p=c.getAllResponseHeaders(),g=c.getResponseHeader("content-length"),m=new Fp(c.status,p,g?parseInt(g,10):void 0,l),v=c.$$AmplitudeAnalyticsEvent.headers,b=new Mp(d,v);h.status=c.status,o.handleNetworkRequestEvent("xhr",{url:h.url,method:h.method},b,m,void 0,h.startTime,h.durationStart)}catch(E){(f=o.logger)===null||f===void 0||f.error("an unexpected error occurred while handling xhr send",E)}}),r.apply(c,s)},i.setRequestHeader=function(s,a){var u,c=this;try{c.$$AmplitudeAnalyticsEvent.headers[s]=a}catch(l){(u=o.logger)===null||u===void 0||u.error("an unexpected error occurred while calling xhr setRequestHeader",l)}n.apply(c,[s,a])}}},t})(),Qs=new $p,qp=(function(){function t(){}return t.prototype.parse=function(){return G(this,void 0,void 0,function(){return H(this,function(e){return[2,Z(Z(Z(Z({},ti),this.getUtmParam()),this.getReferrer()),this.getClickIds())]})})},t.prototype.getUtmParam=function(){var e=qr(),r=e[Th],n=e[Ah],i=e[kh],o=e[xh],s=e[Ih],a=e[Ch];return{utm_campaign:r,utm_content:n,utm_id:i,utm_medium:o,utm_source:s,utm_term:a}},t.prototype.getReferrer=function(){var e,r,n={referrer:void 0,referring_domain:void 0};try{n.referrer=document.referrer||void 0,n.referring_domain=(r=(e=n.referrer)===null||e===void 0?void 0:e.split("/")[2])!==null&&r!==void 0?r:void 0}catch{}return n},t.prototype.getClickIds=function(){var e,r=qr();return e={},e[Ss]=r[Ss],e[Ts]=r[Ts],e[As]=r[As],e[ks]=r[ks],e[xs]=r[xs],e[Is]=r[Is],e[Cs]=r[Cs],e[Rs]=r[Rs],e[Ps]=r[Ps],e[Os]=r[Os],e[Ds]=r[Ds],e},t})(),Qt=function(t,e){return typeof t=="boolean"?t:t?.[e]!==!1},ea=function(t){return Qt(t,"attribution")},Wp=function(t){return Qt(t,"fileDownloads")},Hp=function(t){return Qt(t,"formInteractions")},ta=function(t){return Qt(t,"pageViews")},ra=function(t){return Qt(t,"sessions")},na=function(t){return typeof t=="object"&&(t.networkTracking===!0||typeof t.networkTracking=="object")},ia=function(t){return typeof t=="boolean"?t:typeof t=="object"&&(t.elementInteractions===!0||typeof t.elementInteractions=="object")},Gp=function(t){return typeof t=="object"&&t.webVitals===!0},oa=function(t){return typeof t=="boolean"?t:typeof t=="object"&&(t.frustrationInteractions===!0||typeof t.frustrationInteractions=="object")},Vp=function(t){if(ia(t.autocapture)&&typeof t.autocapture=="object"&&typeof t.autocapture.elementInteractions=="object")return t.autocapture.elementInteractions},Kp=function(t){if(oa(t.autocapture)&&typeof t.autocapture=="object"&&typeof t.autocapture.frustrationInteractions=="object")return t.autocapture.frustrationInteractions},Yp=function(t){var e;if(na(t.autocapture)){var r=void 0;return typeof t.autocapture=="object"&&typeof t.autocapture.networkTracking=="object"?r=t.autocapture.networkTracking:t.networkTrackingOptions&&(r=t.networkTrackingOptions),Z(Z({},r),{captureRules:(e=r?.captureRules)===null||e===void 0?void 0:e.map(function(n){var i;if(n.urls&&n.hosts){var o=JSON.stringify(n.hosts),s=JSON.stringify(n.urls);return(i=t.loggerProvider)===null||i===void 0||i.warn("Found network capture rule with both urls='".concat(s,"' and hosts='").concat(o,"' set. ")+"Definition of urls takes precedence over hosts, so ignoring hosts."),Z(Z({},n),{hosts:void 0})}return n})})}},Zp=function(t){var e=function(){return!1},r=void 0,n,i=t.pageCounter,o=ta(t.defaultTracking);return o&&(e=void 0,n=void 0,t.defaultTracking&&typeof t.defaultTracking=="object"&&t.defaultTracking.pageViews&&typeof t.defaultTracking.pageViews=="object"&&("trackOn"in t.defaultTracking.pageViews&&(e=t.defaultTracking.pageViews.trackOn),"trackHistoryChanges"in t.defaultTracking.pageViews&&(r=t.defaultTracking.pageViews.trackHistoryChanges),"eventType"in t.defaultTracking.pageViews&&t.defaultTracking.pageViews.eventType&&(n=t.defaultTracking.pageViews.eventType))),{trackOn:e,trackHistoryChanges:r,eventType:n,pageCounter:i}},Xp=function(t){return ea(t.defaultTracking)&&t.defaultTracking&&typeof t.defaultTracking=="object"&&t.defaultTracking.attribution&&typeof t.defaultTracking.attribution=="object"?Z({},t.defaultTracking.attribution):{}},li=function(t,e){for(var r=0;r<e.length;r++){var n=e[r],i=n.name,o=n.args,s=n.resolve,a=t&&t[i];if(typeof a=="function"){var u=a.apply(t,o);typeof s=="function"&&s(u?.promise)}}return t},di=function(t){var e=t;return e&&e._q!==void 0},sa="2.24.0",Jp="amplitude-ts",Qp="Web",eg="$remote",tg=(function(){function t(){this.name="@amplitude/plugin-context-browser",this.type="before",this.library="".concat(Jp,"/").concat(sa),typeof navigator<"u"&&(this.userAgent=navigator.userAgent)}return t.prototype.setup=function(e){return this.config=e,Promise.resolve(void 0)},t.prototype.execute=function(e){var r,n;return G(this,void 0,void 0,function(){var i,o,s,a;return H(this,function(u){return i=new Date().getTime(),o=(r=this.config.lastEventId)!==null&&r!==void 0?r:-1,s=(n=e.event_id)!==null&&n!==void 0?n:o+1,this.config.lastEventId=s,e.time||(this.config.lastEventTime=i),a=Z(Z(Z(Z(Z(Z(Z(Z({user_id:this.config.userId,device_id:this.config.deviceId,session_id:this.config.sessionId,time:i},this.config.appVersion&&{app_version:this.config.appVersion}),this.config.trackingOptions.platform&&{platform:Qp}),this.config.trackingOptions.language&&{language:yp()}),this.config.trackingOptions.ipAddress&&{ip:eg}),{insert_id:pt(),partner_id:this.config.partnerId,plan:this.config.plan}),this.config.ingestionMetadata&&{ingestion_metadata:{source_name:this.config.ingestionMetadata.sourceName,source_version:this.config.ingestionMetadata.sourceVersion}}),e),{event_id:s,library:this.library,user_agent:this.userAgent}),[2,a]})})},t})(),Hr=1e3,aa=(function(t){Me(e,t);function e(r){var n=this,i,o,s;try{s=(i=Ie())===null||i===void 0?void 0:i.localStorage}catch(a){(o=r?.loggerProvider)===null||o===void 0||o.debug("Failed to access localStorage. error=".concat(JSON.stringify(a))),s=void 0}return n=t.call(this,s)||this,n.loggerProvider=r?.loggerProvider,n}return e.prototype.set=function(r,n){var i;return G(this,void 0,void 0,function(){var o;return H(this,function(s){switch(s.label){case 0:return Array.isArray(n)&&n.length>Hr?(o=n.length-Hr,[4,t.prototype.set.call(this,r,n.slice(0,Hr))]):[3,2];case 1:return s.sent(),(i=this.loggerProvider)===null||i===void 0||i.error("Failed to save ".concat(o," events because the queue length exceeded ").concat(Hr,".")),[3,4];case 2:return[4,t.prototype.set.call(this,r,n)];case 3:s.sent(),s.label=4;case 4:return[2]}})})},e})(Ws),rg=(function(t){Me(e,t);function e(){var r;return t.call(this,(r=Ie())===null||r===void 0?void 0:r.sessionStorage)||this}return e})(Ws),ng=(function(t){Me(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.state={done:4},r}return e.prototype.send=function(r,n){return G(this,void 0,void 0,function(){var i=this;return H(this,function(o){return[2,new Promise(function(s,a){typeof XMLHttpRequest>"u"&&a(new Error("XHRTransport is not supported."));var u=new XMLHttpRequest;u.open("POST",r,!0),u.onreadystatechange=function(){if(u.readyState===i.state.done){var c=u.responseText;try{s(i.buildResponse(JSON.parse(c)))}catch{s(i.buildResponse({code:u.status}))}}},u.setRequestHeader("Content-Type","application/json"),u.setRequestHeader("Accept","*/*"),u.send(JSON.stringify(n))})]})})},e})(ai),ig=(function(t){Me(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.send=function(r,n){return G(this,void 0,void 0,function(){var i=this;return H(this,function(o){return[2,new Promise(function(s,a){var u=Ie();if(!u?.navigator.sendBeacon)throw new Error("SendBeaconTransport is not supported");try{var c=JSON.stringify(n),l=u.navigator.sendBeacon(r,JSON.stringify(n));return s(l?i.buildResponse({code:200,events_ingested:n.events.length,payload_size_bytes:c.length,server_upload_time:Date.now()}):i.buildResponse({code:500}))}catch(d){a(d)}})]})})},e})(ai),og=function(t,e,r){return r===void 0&&(r=!0),G(void 0,void 0,void 0,function(){var n,i,o,s,a,u,c,l,d;return H(this,function(h){switch(h.label){case 0:return n=mp(t),[4,e.getRaw(n)];case 1:return i=h.sent(),i?r?[4,e.remove(n)]:[3,3]:[2,{optOut:!1}];case 2:h.sent(),h.label=3;case 3:return o=ne(i.split("."),6),s=o[0],a=o[1],u=o[2],c=o[3],l=o[4],d=o[5],[2,{deviceId:s,userId:sg(a),sessionId:fi(c),lastEventId:fi(d),lastEventTime:fi(l),optOut:!!u}]}})})},fi=function(t){var e=parseInt(t,32);if(!isNaN(e))return e},sg=function(t){if(!(!atob||!escape||!t))try{return decodeURIComponent(escape(atob(t)))}catch{return}},Ye="[Amplitude]",ua="".concat(Ye," Form Started"),ag="".concat(Ye," Form Submitted"),ug="".concat(Ye," File Downloaded"),ca="session_start",la="session_end",cg="".concat(Ye," File Extension"),lg="".concat(Ye," File Name"),dg="".concat(Ye," Link ID"),fg="".concat(Ye," Link Text"),hg="".concat(Ye," Link URL"),hi="".concat(Ye," Form ID"),pi="".concat(Ye," Form Name"),gi="".concat(Ye," Form Destination"),Gr="cookie",pg="US",gg=(function(t){Me(e,t);function e(r,n,i,o,s,a,u,c,l,d,h,f,p,g,m,v,b,E,S,T,x,C,P,I,M,j,A,D,_,U,ee,z,te,q,re){i===void 0&&(i=new oi),o===void 0&&(o={domain:"",expiration:365,sameSite:"Lax",secure:!1,upgrade:!0}),c===void 0&&(c=1e3),l===void 0&&(l=5),d===void 0&&(d=30),h===void 0&&(h=Gr),v===void 0&&(v=new Us),b===void 0&&(b=ze.Warn),S===void 0&&(S=!1),T===void 0&&(T=!1),P===void 0&&(P=""),I===void 0&&(I=pg),j===void 0&&(j=1800*1e3),A===void 0&&(A=new aa({loggerProvider:v})),D===void 0&&(D={ipAddress:!0,language:!0,platform:!0}),_===void 0&&(_="fetch"),U===void 0&&(U=!1),ee===void 0&&(ee=!0);var R=t.call(this,{apiKey:r,storageProvider:A,transportProvider:da(_)})||this;return R.apiKey=r,R.appVersion=n,R.cookieOptions=o,R.defaultTracking=s,R.autocapture=a,R.flushIntervalMillis=c,R.flushMaxRetries=l,R.flushQueueSize=d,R.identityStorage=h,R.ingestionMetadata=f,R.instanceName=p,R.loggerProvider=v,R.logLevel=b,R.minIdLength=E,R.offline=S,R.partnerId=x,R.plan=C,R.serverUrl=P,R.serverZone=I,R.sessionTimeout=j,R.storageProvider=A,R.trackingOptions=D,R.transport=_,R.useBatch=U,R.fetchRemoteConfig=ee,R.networkTrackingOptions=re,R.version=sa,R._optOut=!1,R._cookieStorage=i,R.deviceId=u,R.lastEventId=g,R.lastEventTime=m,R.optOut=T,R.sessionId=M,R.pageCounter=te,R.userId=z,R.debugLogsEnabled=q,R.loggerProvider.enable(q?ze.Debug:R.logLevel),R.networkTrackingOptions=re,R}return Object.defineProperty(e.prototype,"cookieStorage",{get:function(){return this._cookieStorage},set:function(r){this._cookieStorage!==r&&(this._cookieStorage=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deviceId",{get:function(){return this._deviceId},set:function(r){this._deviceId!==r&&(this._deviceId=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userId",{get:function(){return this._userId},set:function(r){this._userId!==r&&(this._userId=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this._sessionId},set:function(r){this._sessionId!==r&&(this._sessionId=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"optOut",{get:function(){return this._optOut},set:function(r){this._optOut!==r&&(this._optOut=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventTime",{get:function(){return this._lastEventTime},set:function(r){this._lastEventTime!==r&&(this._lastEventTime=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventId",{get:function(){return this._lastEventId},set:function(r){this._lastEventId!==r&&(this._lastEventId=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageCounter",{get:function(){return this._pageCounter},set:function(r){this._pageCounter!==r&&(this._pageCounter=r,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"debugLogsEnabled",{set:function(r){this._debugLogsEnabled!==r&&(this._debugLogsEnabled=r,this.updateStorage())},enumerable:!1,configurable:!0}),e.prototype.updateStorage=function(){var r={deviceId:this._deviceId,userId:this._userId,sessionId:this._sessionId,optOut:this._optOut,lastEventTime:this._lastEventTime,lastEventId:this._lastEventId,pageCounter:this._pageCounter,debugLogsEnabled:this._debugLogsEnabled};this.cookieStorage.set(js(this.apiKey),r)},e})(tp),vg=function(t,e,r){return e===void 0&&(e={}),G(void 0,void 0,void 0,function(){var n,i,o,s,a,u,c,l,d,h,f,p,g,m,v,b,E,S,T,x,C,P,I,M,j,A,D,_,U,ee,z,te,q,re,R,L,J,X,K,fe,Te,se,ce,Ee,me;return H(this,function(xe){switch(xe.label){case 0:return n=e.identityStorage||Gr,C={},n===Gr?[3,1]:(o="",[3,5]);case 1:return(I=(P=e.cookieOptions)===null||P===void 0?void 0:P.domain)!==null&&I!==void 0?(s=I,[3,4]):[3,2];case 2:return[4,yg()];case 3:s=xe.sent(),xe.label=4;case 4:o=s,xe.label=5;case 5:return i=Z.apply(void 0,[(C.domain=o,C.expiration=365,C.sameSite="Lax",C.secure=!1,C.upgrade=!0,C),e.cookieOptions]),a=mg(e.identityStorage,i),[4,og(t,a,(j=(M=e.cookieOptions)===null||M===void 0?void 0:M.upgrade)!==null&&j!==void 0?j:!0)];case 6:return u=xe.sent(),[4,a.get(js(t))];case 7:return c=xe.sent(),l=qr(),d=l.ampTimestamp?Number(l.ampTimestamp):void 0,h=d?Date.now()<d:!0,f=(ee=(U=(_=(A=e.deviceId)!==null&&A!==void 0?A:h?(D=l.ampDeviceId)!==null&&D!==void 0?D:l.deviceId:void 0)!==null&&_!==void 0?_:c?.deviceId)!==null&&U!==void 0?U:u.deviceId)!==null&&ee!==void 0?ee:pt(),p=(z=c?.lastEventId)!==null&&z!==void 0?z:u.lastEventId,g=(te=c?.lastEventTime)!==null&&te!==void 0?te:u.lastEventTime,m=(re=(q=e.optOut)!==null&&q!==void 0?q:c?.optOut)!==null&&re!==void 0?re:u.optOut,v=(R=c?.sessionId)!==null&&R!==void 0?R:u.sessionId,b=(J=(L=e.userId)!==null&&L!==void 0?L:c?.userId)!==null&&J!==void 0?J:u.userId,r.previousSessionDeviceId=(X=c?.deviceId)!==null&&X!==void 0?X:u.deviceId,r.previousSessionUserId=(K=c?.userId)!==null&&K!==void 0?K:u.userId,E={ipAddress:(Te=(fe=e.trackingOptions)===null||fe===void 0?void 0:fe.ipAddress)!==null&&Te!==void 0?Te:!0,language:(ce=(se=e.trackingOptions)===null||se===void 0?void 0:se.language)!==null&&ce!==void 0?ce:!0,platform:(me=(Ee=e.trackingOptions)===null||Ee===void 0?void 0:Ee.platform)!==null&&me!==void 0?me:!0},S=c?.pageCounter,T=c?.debugLogsEnabled,e.autocapture!==void 0&&(e.defaultTracking=e.autocapture),x=new gg(t,e.appVersion,a,i,e.defaultTracking,e.autocapture,f,e.flushIntervalMillis,e.flushMaxRetries,e.flushQueueSize,n,e.ingestionMetadata,e.instanceName,p,g,e.loggerProvider,e.logLevel,e.minIdLength,e.offline,m,e.partnerId,e.plan,e.serverUrl,e.serverZone,v,e.sessionTimeout,e.storageProvider,E,e.transport,e.useBatch,e.fetchRemoteConfig,b,S,T,e.networkTrackingOptions),[4,x.storageProvider.isEnabled()];case 8:return xe.sent()||(x.loggerProvider.warn("Storage provider ".concat(x.storageProvider.constructor.name," is not enabled. Falling back to MemoryStorage.")),x.storageProvider=new oi),[2,x]}})})},mg=function(t,e){switch(t===void 0&&(t=Gr),e===void 0&&(e={}),t){case"localStorage":return new aa;case"sessionStorage":return new rg;case"none":return new oi;case"cookie":default:return new si(Z(Z({},e),{expirationDays:e.expiration}))}},da=function(t){return t==="xhr"?new ng:t==="beacon"?new ig:new Sp},yg=function(t){return G(void 0,void 0,void 0,function(){var e,r,n,i,o,o,s,a,u,c;return H(this,function(l){switch(l.label){case 0:return[4,new si().isEnabled()];case 1:if(!l.sent()||typeof location>"u"||!location.hostname)return[2,""];for(e=location.hostname,r=e.split("."),n=[],i="AMP_TLDTEST",o=r.length-2;o>=0;--o)n.push(r.slice(o).join("."));o=0,l.label=2;case 2:return o<n.length?(s=n[o],a={domain:"."+s},u=new si(a),[4,u.set(i,1)]):[3,7];case 3:return l.sent(),[4,u.get(i)];case 4:return c=l.sent(),c?[4,u.remove(i)]:[3,6];case 5:return l.sent(),[2,"."+s];case 6:return o++,[3,2];case 7:return[2,""]}})})},fa=function(){var t="ampIntegrationContext";if(typeof globalThis<"u"&&typeof globalThis[t]<"u")return globalThis[t];if(typeof globalThis<"u")return globalThis;if(typeof window<"u")return window;if(typeof self<"u")return self;if(typeof global<"u")return global},ha=function(){var t,e=fa();if(!(!((t=e?.location)===null||t===void 0)&&t.search))return{};var r=e.location.search.substring(1).split("&").filter(Boolean),n=r.reduce(function(i,o){var s=o.split("=",2),a=pa(s[0]),u=pa(s[1]);return u&&(i[a]=u),i},{});return n},pa=function(t){t===void 0&&(t="");try{return decodeURIComponent(t)}catch{return""}},_g="utm_campaign",bg="utm_content",Eg="utm_id",wg="utm_medium",Sg="utm_source",Tg="utm_term",ga="dclid",va="fbclid",ma="gbraid",ya="gclid",_a="ko_click_id",ba="li_fat_id",Ea="msclkid",wa="rdt_cid",Sa="ttclid",Ta="twclid",Aa="wbraid",ka={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,li_fat_id:void 0,msclkid:void 0,rdt_cid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0},Ag=(function(){function t(){}return t.prototype.parse=function(){return G(this,void 0,void 0,function(){return H(this,function(e){return[2,Z(Z(Z(Z({},ka),this.getUtmParam()),this.getReferrer()),this.getClickIds())]})})},t.prototype.getUtmParam=function(){var e=ha(),r=e[_g],n=e[bg],i=e[Eg],o=e[wg],s=e[Sg],a=e[Tg];return{utm_campaign:r,utm_content:n,utm_id:i,utm_medium:o,utm_source:s,utm_term:a}},t.prototype.getReferrer=function(){var e,r,n={referrer:void 0,referring_domain:void 0};try{n.referrer=document.referrer||void 0,n.referring_domain=(r=(e=n.referrer)===null||e===void 0?void 0:e.split("/")[2])!==null&&r!==void 0?r:void 0}catch{}return n},t.prototype.getClickIds=function(){var e,r=ha();return e={},e[ga]=r[ga],e[va]=r[va],e[ma]=r[ma],e[ya]=r[ya],e[_a]=r[_a],e[ba]=r[ba],e[Ea]=r[Ea],e[wa]=r[wa],e[Sa]=r[Sa],e[Ta]=r[Ta],e[Aa]=r[Aa],e},t})(),Vr;(function(t){t.SET="$set",t.SET_ONCE="$setOnce",t.ADD="$add",t.APPEND="$append",t.PREPEND="$prepend",t.REMOVE="$remove",t.PREINSERT="$preInsert",t.POSTINSERT="$postInsert",t.UNSET="$unset",t.CLEAR_ALL="$clearAll"})(Vr||(Vr={}));var xa;(function(t){t.REVENUE_PRODUCT_ID="$productId",t.REVENUE_QUANTITY="$quantity",t.REVENUE_PRICE="$price",t.REVENUE_TYPE="$revenueType",t.REVENUE_CURRENCY="$currency",t.REVENUE="$revenue"})(xa||(xa={}));var Ia;(function(t){t.IDENTIFY="$identify",t.GROUP_IDENTIFY="$groupidentify",t.REVENUE="revenue_amount"})(Ia||(Ia={}));var kg=function(t){var e={};for(var r in t){var n=t[r];n&&(e[r]=n)}return e},xg="[Amplitude] Page Viewed",Ig=function(t){t===void 0&&(t={});var e,r=fa(),n=void 0,i=!1,o,s=t.trackOn,a=t.trackHistoryChanges,u=t.eventType,c=u===void 0?xg:u,l=function(v){var b=v;try{b=decodeURI(v)}catch(E){n?.error("Malformed URI sequence: ",E)}return b},d=function(){return G(void 0,void 0,void 0,function(){var v,b,E;return H(this,function(S){switch(S.label){case 0:return v=l(typeof location<"u"&&location.href||""),E={event_type:c},b=[{}],[4,Cg()];case 1:return[2,(E.event_properties=Z.apply(void 0,[Z.apply(void 0,b.concat([S.sent()])),{"[Amplitude] Page Domain":typeof location<"u"&&location.hostname||"","[Amplitude] Page Location":v,"[Amplitude] Page Path":typeof location<"u"&&l(location.pathname)||"","[Amplitude] Page Title":typeof document<"u"&&document.title||"","[Amplitude] Page URL":v.split("?")[0]}]),E)]}})})},h=function(){return typeof s>"u"||typeof s=="function"&&s()},f=typeof location<"u"?location.href:null,p=function(){return G(void 0,void 0,void 0,function(){var v,b,E,S;return H(this,function(T){switch(T.label){case 0:return v=location.href,b=Pg(a,v,f||"")&&h(),f=v,b?(n?.log("Tracking page view event"),e!=null?[3,1]:[3,3]):[3,4];case 1:return S=(E=e).track,[4,d()];case 2:S.apply(E,[T.sent()]),T.label=3;case 3:T.label=4;case 4:return[2]}})})},g=function(){p()},m={name:"@amplitude/plugin-page-view-tracking-browser",type:"enrichment",setup:function(v,b){return G(void 0,void 0,void 0,function(){var E,S;return H(this,function(T){switch(T.label){case 0:return e=b,o=v,n=v.loggerProvider,n.log("Installing @amplitude/plugin-page-view-tracking-browser"),i=!0,r&&(r.addEventListener("popstate",g),r.history.pushState=new Proxy(r.history.pushState,{apply:function(x,C,P){var I=ne(P,3),M=I[0],j=I[1],A=I[2];x.apply(C,[M,j,A]),i&&p()}})),h()?(n.log("Tracking page view event"),S=(E=e).track,[4,d()]):[3,2];case 1:S.apply(E,[T.sent()]),T.label=2;case 2:return[2]}})})},execute:function(v){return G(void 0,void 0,void 0,function(){var b;return H(this,function(E){switch(E.label){case 0:return s==="attribution"&&Rg(v)?(n?.log("Enriching campaign event to page view event with campaign parameters"),[4,d()]):[3,2];case 1:b=E.sent(),v.event_type=b.event_type,v.event_properties=Z(Z({},v.event_properties),b.event_properties),E.label=2;case 2:return o&&v.event_type===c&&(o.pageCounter=o.pageCounter?o.pageCounter+1:1,v.event_properties=Z(Z({},v.event_properties),{"[Amplitude] Page Counter":o.pageCounter})),[2,v]}})})},teardown:function(){return G(void 0,void 0,void 0,function(){return H(this,function(v){return r&&(r.removeEventListener("popstate",g),i=!1),[2]})})}};return m},Cg=function(){return G(void 0,void 0,void 0,function(){var t;return H(this,function(e){switch(e.label){case 0:return t=kg,[4,new Ag().parse()];case 1:return[2,t.apply(void 0,[e.sent()])]}})})},Rg=function(t){if(t.event_type==="$identify"&&t.user_properties){var e=t.user_properties,r=e[Vr.SET]||{},n=e[Vr.UNSET]||{},i=ue(ue([],ne(Object.keys(r)),!1),ne(Object.keys(n)),!1);return Object.keys(ka).every(function(o){return i.includes(o)})}return!1},Pg=function(t,e,r){switch(t){case"pathOnly":{if(r=="")return!0;var n=new URL(e),i=new URL(r),o=n.origin+n.pathname,s=i.origin+i.pathname;return o!==s}default:return e!==r}},Og=function(){var t,e=[],r=function(c,l,d){c.addEventListener(l,d),e.push({element:c,type:l,handler:d})},n=function(){e.forEach(function(c){var l=c.element,d=c.type,h=c.handler;l?.removeEventListener(d,h)}),e=[]},i="@amplitude/plugin-form-interaction-tracking-browser",o="enrichment",s=function(c,l){return G(void 0,void 0,void 0,function(){var d,h;return H(this,function(f){return d=function(){if(!l){c.loggerProvider.warn("Form interaction tracking requires a later version of @amplitude/analytics-browser. Form interaction events are not tracked.");return}if(!(typeof document>"u")){var p=function(m){var v=!1;r(m,"change",function(){var b,E=Ca(m);v||l.track(ua,(b={},b[hi]=zt(m.id),b[pi]=zt(m.name),b[gi]=E,b)),v=!0}),r(m,"submit",function(){var b,E,S=Ca(m);v||l.track(ua,(b={},b[hi]=zt(m.id),b[pi]=zt(m.name),b[gi]=S,b)),l.track(ag,(E={},E[hi]=zt(m.id),E[pi]=zt(m.name),E[gi]=S,E)),v=!1})},g=Array.from(document.getElementsByTagName("form"));g.forEach(p),typeof MutationObserver<"u"&&(t=new MutationObserver(function(m){m.forEach(function(v){v.addedNodes.forEach(function(b){b.nodeName==="FORM"&&p(b),"querySelectorAll"in b&&typeof b.querySelectorAll=="function"&&Array.from(b.querySelectorAll("form")).map(p)})})}),t.observe(document.body,{subtree:!0,childList:!0}))}},document.readyState==="complete"?d():(h=Ie(),h?h.addEventListener("load",d):c.loggerProvider.debug("Form interaction tracking is not installed because global is undefined.")),[2]})})},a=function(c){return G(void 0,void 0,void 0,function(){return H(this,function(l){return[2,c]})})},u=function(){return G(void 0,void 0,void 0,function(){return H(this,function(c){return t?.disconnect(),n(),[2]})})};return{name:i,type:o,setup:s,execute:a,teardown:u}},zt=function(t){if(typeof t=="string")return t},Ca=function(t){var e=t.getAttribute("action");try{e=new URL(encodeURI(e??""),window.location.href).href}catch{}return e},Dg=function(){var t,e=[],r=function(c,l,d){c.addEventListener(l,d),e.push({element:c,type:l,handler:d})},n=function(){e.forEach(function(c){var l=c.element,d=c.type,h=c.handler;l?.removeEventListener(d,h)}),e=[]},i="@amplitude/plugin-file-download-tracking-browser",o="enrichment",s=function(c,l){return G(void 0,void 0,void 0,function(){var d,h;return H(this,function(f){return d=function(){if(!l){c.loggerProvider.warn("File download tracking requires a later version of @amplitude/analytics-browser. File download events are not tracked.");return}if(!(typeof document>"u")){var p=function(v){var b;try{b=new URL(v.href,window.location.href)}catch{return}var E=g.exec(b.href),S=E?.[1];S&&r(v,"click",function(){var T;S&&l.track(ug,(T={},T[cg]=S,T[lg]=b.pathname,T[dg]=v.id,T[fg]=v.text,T[hg]=v.href,T))})},g=/\.(pdf|xlsx?|docx?|txt|rtf|csv|exe|key|pp(s|t|tx)|7z|pkg|rar|gz|zip|avi|mov|mp4|mpe?g|wmv|midi?|mp3|wav|wma)(\?.+)?$/,m=Array.from(document.getElementsByTagName("a"));m.forEach(p),typeof MutationObserver<"u"&&(t=new MutationObserver(function(v){v.forEach(function(b){b.addedNodes.forEach(function(E){E.nodeName==="A"&&p(E),"querySelectorAll"in E&&typeof E.querySelectorAll=="function"&&Array.from(E.querySelectorAll("a")).map(p)})})}),t.observe(document.body,{subtree:!0,childList:!0}))}},document.readyState==="complete"?d():(h=Ie(),h?h.addEventListener("load",d):c.loggerProvider.debug("File download tracking is not installed because global is undefined.")),[2]})})},a=function(c){return G(void 0,void 0,void 0,function(){return H(this,function(l){return[2,c]})})},u=function(){return G(void 0,void 0,void 0,function(){return H(this,function(c){return t?.disconnect(),n(),[2]})})};return{name:i,type:o,setup:s,execute:a,teardown:u}},Ra=!1,Lg=function(t){if(!(Ra||t.defaultTracking!==void 0)){var e=`\`options.defaultTracking\` is set to undefined. This implicitly configures your Amplitude instance to track Page Views, Sessions, File Downloads, and Form Interactions. You can suppress this warning by explicitly setting a value to \`options.defaultTracking\`. The value must either be a boolean, to enable and disable all default events, or an object, for advanced configuration. For example:

amplitude.init(<YOUR_API_KEY>, {
  defaultTracking: true,
});

Visit https://www.docs.developers.amplitude.com/data/sdks/browser-2/#tracking-default-events for more details.`;t.loggerProvider.warn(e),Ra=!0}},Ng=function(){var t="@amplitude/plugin-network-checker-browser",e="before",r=Ie(),n=[],i=function(u,c){r?.addEventListener&&(r?.addEventListener(u,c),n.push({type:u,handler:c}))},o=function(){n.forEach(function(u){var c=u.type,l=u.handler;r?.removeEventListener(c,l)}),n=[]},s=function(u,c){return G(void 0,void 0,void 0,function(){return H(this,function(l){return typeof navigator>"u"?(u.loggerProvider.debug("Network connectivity checker plugin is disabled because navigator is not available."),u.offline=!1,[2]):(u.offline=!navigator.onLine,i("online",function(){u.loggerProvider.debug("Network connectivity changed to online."),u.offline=!1,setTimeout(function(){c.flush()},u.flushIntervalMillis)}),i("offline",function(){u.loggerProvider.debug("Network connectivity changed to offline."),u.offline=!0}),[2])})})},a=function(){return G(void 0,void 0,void 0,function(){return H(this,function(u){return o(),[2]})})};return{name:t,type:e,setup:s,teardown:a}};function Pa(t){var e,r;if(!(typeof t!="object"||t===null)&&!Array.isArray(t)){var n=Object.keys(t);try{for(var i=ae(n),o=i.next();!o.done;o=i.next()){var s=o.value;try{var a=t[s];typeof a?.enabled=="boolean"&&(a.enabled?(delete a.enabled,Object.keys(a).length===0&&(t[s]=!0)):t[s]=!1),Pa(a)}catch{}}}catch(u){e={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}}}function Oa(t,e,r){var n,i,o=[];try{for(var s=ae(e??[]),a=s.next();!a.done;a=s.next()){var u=a.value;try{o.push(new RegExp(u))}catch(c){r.loggerProvider.warn("Invalid regex pattern: ".concat(u),c)}}}catch(c){n={error:c}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return t.concat(o)}function Mg(t,e){var r,n,i,o,s,a,u;if(t){Pa(t);try{e.loggerProvider.debug("Update browser config with remote configuration:",JSON.stringify(t));var c=t;if(c&&"autocapture"in c){if(typeof c.autocapture=="boolean"&&(e.autocapture=c.autocapture),typeof c.autocapture=="object"&&c.autocapture!==null){var l=Z({},c.autocapture);if(e.autocapture===void 0&&(e.autocapture=c.autocapture),typeof c.autocapture.elementInteractions=="object"&&c.autocapture.elementInteractions!==null&&(!((i=c.autocapture.elementInteractions.pageUrlAllowlistRegex)===null||i===void 0)&&i.length)){l.elementInteractions=Z({},c.autocapture.elementInteractions);var d=l.elementInteractions,h=(o=d.pageUrlAllowlist)!==null&&o!==void 0?o:[],f=c.autocapture.elementInteractions.pageUrlAllowlistRegex;d.pageUrlAllowlist=Oa(h,f,e),delete d.pageUrlAllowlistRegex}if(typeof c.autocapture.networkTracking=="object"&&c.autocapture.networkTracking!==null&&(!((s=c.autocapture.networkTracking.captureRules)===null||s===void 0)&&s.length)){l.networkTracking=Z({},c.autocapture.networkTracking);var p=l.networkTracking,g=(a=p.captureRules)!==null&&a!==void 0?a:[];try{for(var m=ae(g),v=m.next();!v.done;v=m.next()){var b=v.value;b.urls=Oa((u=b.urls)!==null&&u!==void 0?u:[],b.urlsRegex,e),delete b.urlsRegex}}catch(E){r={error:E}}finally{try{v&&!v.done&&(n=m.return)&&n.call(m)}finally{if(r)throw r.error}}}typeof e.autocapture=="boolean"&&(e.autocapture=Z({attribution:e.autocapture,fileDownloads:e.autocapture,formInteractions:e.autocapture,pageViews:e.autocapture,sessions:e.autocapture,elementInteractions:e.autocapture,webVitals:e.autocapture,frustrationInteractions:e.autocapture},l)),typeof e.autocapture=="object"&&(e.autocapture=Z(Z({},e.autocapture),l))}e.defaultTracking=e.autocapture}e.loggerProvider.debug("Browser config after remote config update:",JSON.stringify(e))}catch(E){e.loggerProvider.error("Failed to apply remote configuration because of error: ",E)}}}var Kr;(function(t){t.US="US",t.EU="EU",t.STAGING="STAGING"})(Kr||(Kr={}));var Pe;(function(t){t.Unknown="unknown",t.Skipped="skipped",t.Success="success",t.RateLimit="rate_limit",t.PayloadTooLarge="payload_too_large",t.Invalid="invalid",t.Failed="failed",t.Timeout="Timeout",t.SystemError="SystemError"})(Pe||(Pe={}));var Ug=(function(){function t(){}return t.prototype.send=function(e,r){return Promise.resolve(null)},t.prototype.buildResponse=function(e){var r,n,i,o,s,a,u,c,l,d,h,f,p,g,m,v,b,E,S,T,x,C;if(typeof e!="object")return null;var P=e.code||0,I=this.buildStatus(P);switch(I){case Pe.Success:return{status:I,statusCode:P,body:{eventsIngested:(r=e.events_ingested)!==null&&r!==void 0?r:0,payloadSizeBytes:(n=e.payload_size_bytes)!==null&&n!==void 0?n:0,serverUploadTime:(i=e.server_upload_time)!==null&&i!==void 0?i:0}};case Pe.Invalid:return{status:I,statusCode:P,body:{error:(o=e.error)!==null&&o!==void 0?o:"",missingField:(s=e.missing_field)!==null&&s!==void 0?s:"",eventsWithInvalidFields:(a=e.events_with_invalid_fields)!==null&&a!==void 0?a:{},eventsWithMissingFields:(u=e.events_with_missing_fields)!==null&&u!==void 0?u:{},eventsWithInvalidIdLengths:(c=e.events_with_invalid_id_lengths)!==null&&c!==void 0?c:{},epsThreshold:(l=e.eps_threshold)!==null&&l!==void 0?l:0,exceededDailyQuotaDevices:(d=e.exceeded_daily_quota_devices)!==null&&d!==void 0?d:{},silencedDevices:(h=e.silenced_devices)!==null&&h!==void 0?h:[],silencedEvents:(f=e.silenced_events)!==null&&f!==void 0?f:[],throttledDevices:(p=e.throttled_devices)!==null&&p!==void 0?p:{},throttledEvents:(g=e.throttled_events)!==null&&g!==void 0?g:[]}};case Pe.PayloadTooLarge:return{status:I,statusCode:P,body:{error:(m=e.error)!==null&&m!==void 0?m:""}};case Pe.RateLimit:return{status:I,statusCode:P,body:{error:(v=e.error)!==null&&v!==void 0?v:"",epsThreshold:(b=e.eps_threshold)!==null&&b!==void 0?b:0,throttledDevices:(E=e.throttled_devices)!==null&&E!==void 0?E:{},throttledUsers:(S=e.throttled_users)!==null&&S!==void 0?S:{},exceededDailyQuotaDevices:(T=e.exceeded_daily_quota_devices)!==null&&T!==void 0?T:{},exceededDailyQuotaUsers:(x=e.exceeded_daily_quota_users)!==null&&x!==void 0?x:{},throttledEvents:(C=e.throttled_events)!==null&&C!==void 0?C:[]}};case Pe.Timeout:default:return{status:I,statusCode:P}}},t.prototype.buildStatus=function(e){return e>=200&&e<300?Pe.Success:e===429?Pe.RateLimit:e===413?Pe.PayloadTooLarge:e===408?Pe.Timeout:e>=400&&e<500?Pe.Invalid:e>=500?Pe.Failed:Pe.Unknown},t})(),Fg="Network error occurred, remote config fetch failed",Bg="Remote config successfully fetched",zg="Remote config fetch rejected due to exceeded retry count",Da="Remote config fetch rejected due to timeout after 5 seconds",La="Unexpected error occurred",jg="https://sr-client-cfg.amplitude.com/config",$g="https://sr-client-cfg.stag2.amplitude.com/config",qg="https://sr-client-cfg.eu.amplitude.com/config",Wg=(function(){function t(e){var r=e.localConfig,n=e.configKeys,i=this;this.retryTimeout=1e3,this.attempts=0,this.sessionTargetingMatch=!1,this.metrics={},this.getRemoteNamespaceConfig=function(o,s){return G(i,void 0,void 0,function(){var a,u,c;return H(this,function(l){switch(l.label){case 0:return a=Date.now(),[4,this.fetchWithTimeout(s)];case 1:return u=l.sent(),u&&(c=u.configs&&u.configs[o],c)?(this.metrics.fetchTimeAPISuccess=Date.now()-a,[2,c]):(this.metrics.fetchTimeAPIFail=Date.now()-a,[2,void 0])}})})},this.getRemoteConfig=function(o,s,a){return G(i,void 0,void 0,function(){var u;return H(this,function(c){switch(c.label){case 0:return[4,this.getRemoteNamespaceConfig(o,a)];case 1:return u=c.sent(),[2,u?.[s]]}})})},this.fetchWithTimeout=function(o){return G(i,void 0,void 0,function(){var s,a,u;return H(this,function(c){switch(c.label){case 0:return s=new AbortController,a=setTimeout(function(){return s.abort()},5e3),[4,this.fetchRemoteConfig(s.signal,o)];case 1:return u=c.sent(),clearTimeout(a),[2,u]}})})},this.fetchRemoteConfig=function(o,s){return G(i,void 0,void 0,function(){var a,u,c,l,d,h,f,p,g,m,v,b,E;return H(this,function(S){switch(S.label){case 0:if(s===this.lastFetchedSessionId&&this.attempts>=this.localConfig.flushMaxRetries)return[2,this.completeRequest({err:zg})];if(o.aborted)return[2,this.completeRequest({err:Da})];s!==this.lastFetchedSessionId&&(this.lastFetchedSessionId=s,this.attempts=0),S.label=1;case 1:S.trys.push([1,3,,4]),a=new URLSearchParams({api_key:this.localConfig.apiKey});try{for(u=ae(this.configKeys),c=u.next();!c.done;c=u.next())l=c.value,a.append("config_keys",l)}catch(T){v={error:T}}finally{try{c&&!c.done&&(b=u.return)&&b.call(u)}finally{if(v)throw v.error}}return s&&a.set("session_id",String(s)),d={headers:{Accept:"*/*"},method:"GET"},h="".concat(this.getServerUrl(),"?").concat(a.toString()),this.attempts+=1,[4,fetch(h,Z(Z({},d),{signal:o}))];case 2:if(f=S.sent(),f===null)return[2,this.completeRequest({err:La})];switch(p=new Ug().buildStatus(f.status),p){case Pe.Success:return this.attempts=0,[2,this.parseAndStoreConfig(f)];case Pe.Failed:return[2,this.retryFetch(o,s)];default:return[2,this.completeRequest({err:Fg})]}case 3:return g=S.sent(),m=g,o.aborted?[2,this.completeRequest({err:Da})]:[2,this.completeRequest({err:(E=m.message)!==null&&E!==void 0?E:La})];case 4:return[2]}})})},this.retryFetch=function(o,s){return G(i,void 0,void 0,function(){var a=this;return H(this,function(u){switch(u.label){case 0:return[4,new Promise(function(c){return setTimeout(c,a.attempts*a.retryTimeout)})];case 1:return u.sent(),[2,this.fetchRemoteConfig(o,s)]}})})},this.parseAndStoreConfig=function(o){return G(i,void 0,void 0,function(){var s;return H(this,function(a){switch(a.label){case 0:return[4,o.json()];case 1:return s=a.sent(),this.completeRequest({success:Bg}),[2,s]}})})},this.localConfig=r,this.configKeys=n}return t.prototype.getServerUrl=function(){return this.localConfig.configServerUrl?this.localConfig.configServerUrl:this.localConfig.serverZone===Kr.STAGING?$g:this.localConfig.serverZone===Kr.EU?qg:jg},t.prototype.completeRequest=function(e){var r=e.err,n=e.success;if(r)throw new Error(r);n&&this.localConfig.loggerProvider.log(n)},t})(),Hg=function(t){var e=t.localConfig,r=t.configKeys;return G(void 0,void 0,void 0,function(){return H(this,function(n){return[2,new Wg({localConfig:e,configKeys:r})]})})},Gg=Hg,Vg="@amplitude/plugin-autocapture-browser",Kg="@amplitude/plugin-frustration-browser",vi="[Amplitude] Element Clicked",Yg="[Amplitude] Dead Click",Na="[Amplitude] Rage Click",Zg="[Amplitude] Element Changed",Xg="[Amplitude] Element ID",Jg="[Amplitude] Element Class",Ma="[Amplitude] Element Tag",Ua="[Amplitude] Element Text",Qg="[Amplitude] Element Hierarchy",ev="[Amplitude] Element Href",tv="[Amplitude] Element Position Left",rv="[Amplitude] Element Position Top",nv="[Amplitude] Element Aria Label",iv="[Amplitude] Element Attributes",ov="[Amplitude] Element Parent Label",Fa="[Amplitude] Page URL",sv="[Amplitude] Page Title",av="[Amplitude] Viewport Height",uv="[Amplitude] Viewport Width",Yr="https://app.amplitude.com",cv="https://app.eu.amplitude.com",lv="https://apps.stag2.amplitude.com",dv={US:Yr,EU:cv,STAGING:lv},fv="",hv="amp-visual-tagging-selector-highlight",Ba="data-amp-mask-attributes",Zr="data-amp-mask",xt="*****",pv=25;function ge(t){return typeof t=="function"}function mi(t){var e=function(n){Error.call(n),n.stack=new Error().stack},r=t(e);return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var yi=mi(function(t){return function(r){t(this),this.message=r?r.length+` errors occurred during unsubscription:
`+r.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=r}});function Xr(t,e){if(t){var r=t.indexOf(e);0<=r&&t.splice(r,1)}}var er=(function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,r,n,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=ae(s),u=a.next();!u.done;u=a.next()){var c=u.value;c.remove(this)}}catch(g){e={error:g}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}else s.remove(this);var l=this.initialTeardown;if(ge(l))try{l()}catch(g){o=g instanceof yi?g.errors:[g]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var h=ae(d),f=h.next();!f.done;f=h.next()){var p=f.value;try{$a(p)}catch(g){o=o??[],g instanceof yi?o=ue(ue([],ne(o)),ne(g.errors)):o.push(g)}}}catch(g){n={error:g}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}}if(o)throw new yi(o)}},t.prototype.add=function(e){var r;if(e&&e!==this)if(this.closed)$a(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(e)}},t.prototype._hasParent=function(e){var r=this._parentage;return r===e||Array.isArray(r)&&r.includes(e)},t.prototype._addParent=function(e){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(e),r):r?[r,e]:e},t.prototype._removeParent=function(e){var r=this._parentage;r===e?this._parentage=null:Array.isArray(r)&&Xr(r,e)},t.prototype.remove=function(e){var r=this._finalizers;r&&Xr(r,e),e instanceof t&&e._removeParent(this)},t.EMPTY=(function(){var e=new t;return e.closed=!0,e})(),t})(),za=er.EMPTY;function ja(t){return t instanceof er||t&&"closed"in t&&ge(t.remove)&&ge(t.add)&&ge(t.unsubscribe)}function $a(t){ge(t)?t():t.unsubscribe()}var gv={Promise:void 0},vv={setTimeout:function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return setTimeout.apply(void 0,ue([t,e],ne(r)))},clearTimeout:function(t){return clearTimeout(t)},delegate:void 0};function qa(t){vv.setTimeout(function(){throw t})}function _i(){}function Jr(t){t()}var bi=(function(t){Me(e,t);function e(r){var n=t.call(this)||this;return n.isStopped=!1,r?(n.destination=r,ja(r)&&r.add(n)):n.destination=_v,n}return e.create=function(r,n,i){return new tr(r,n,i)},e.prototype.next=function(r){this.isStopped||this._next(r)},e.prototype.error=function(r){this.isStopped||(this.isStopped=!0,this._error(r))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(r){this.destination.next(r)},e.prototype._error=function(r){try{this.destination.error(r)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e})(er),mv=(function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var r=this.partialObserver;if(r.next)try{r.next(e)}catch(n){Qr(n)}},t.prototype.error=function(e){var r=this.partialObserver;if(r.error)try{r.error(e)}catch(n){Qr(n)}else Qr(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(r){Qr(r)}},t})(),tr=(function(t){Me(e,t);function e(r,n,i){var o=t.call(this)||this,s;return ge(r)||!r?s={next:r??void 0,error:n??void 0,complete:i??void 0}:s=r,o.destination=new mv(s),o}return e})(bi);function Qr(t){qa(t)}function yv(t){throw t}var _v={closed:!0,next:_i,error:yv,complete:_i},Ei=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();function Wa(t){return t}function bv(t){return t.length===0?Wa:t.length===1?t[0]:function(r){return t.reduce(function(n,i){return i(n)},r)}}var Ae=(function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(e,r,n){var i=this,o=wv(e)?e:new tr(e,r,n);return Jr(function(){var s=i,a=s.operator,u=s.source;o.add(a?a.call(o,u):u?i._subscribe(o):i._trySubscribe(o))}),o},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){e.error(r)}},t.prototype.forEach=function(e,r){var n=this;return r=Ha(r),new r(function(i,o){var s=new tr({next:function(a){try{e(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});n.subscribe(s)})},t.prototype._subscribe=function(e){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(e)},t.prototype[Ei]=function(){return this},t.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return bv(e)(this)},t.prototype.toPromise=function(e){var r=this;return e=Ha(e),new e(function(n,i){var o;r.subscribe(function(s){return o=s},function(s){return i(s)},function(){return n(o)})})},t.create=function(e){return new t(e)},t})();function Ha(t){var e;return(e=t??gv.Promise)!==null&&e!==void 0?e:Promise}function Ev(t){return t&&ge(t.next)&&ge(t.error)&&ge(t.complete)}function wv(t){return t&&t instanceof bi||Ev(t)&&ja(t)}function Sv(t){return ge(t?.lift)}function je(t){return function(e){if(Sv(e))return e.lift(function(r){try{return t(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function Oe(t,e,r,n,i){return new Tv(t,e,r,n,i)}var Tv=(function(t){Me(e,t);function e(r,n,i,o,s,a){var u=t.call(this,r)||this;return u.onFinalize=s,u.shouldUnsubscribe=a,u._next=n?function(c){try{n(c)}catch(l){r.error(l)}}:t.prototype._next,u._error=o?function(c){try{o(c)}catch(l){r.error(l)}finally{this.unsubscribe()}}:t.prototype._error,u._complete=i?function(){try{i()}catch(c){r.error(c)}finally{this.unsubscribe()}}:t.prototype._complete,u}return e.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;t.prototype.unsubscribe.call(this),!n&&((r=this.onFinalize)===null||r===void 0||r.call(this))}},e})(bi),Av=mi(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Ga=(function(t){Me(e,t);function e(){var r=t.call(this)||this;return r.closed=!1,r.currentObservers=null,r.observers=[],r.isStopped=!1,r.hasError=!1,r.thrownError=null,r}return e.prototype.lift=function(r){var n=new Va(this,this);return n.operator=r,n},e.prototype._throwIfClosed=function(){if(this.closed)throw new Av},e.prototype.next=function(r){var n=this;Jr(function(){var i,o;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var s=ae(n.currentObservers),a=s.next();!a.done;a=s.next()){var u=a.value;u.next(r)}}catch(c){i={error:c}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},e.prototype.error=function(r){var n=this;Jr(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=r;for(var i=n.observers;i.length;)i.shift().error(r)}})},e.prototype.complete=function(){var r=this;Jr(function(){if(r._throwIfClosed(),!r.isStopped){r.isStopped=!0;for(var n=r.observers;n.length;)n.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(r){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,r)},e.prototype._subscribe=function(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)},e.prototype._innerSubscribe=function(r){var n=this,i=this,o=i.hasError,s=i.isStopped,a=i.observers;return o||s?za:(this.currentObservers=null,a.push(r),new er(function(){n.currentObservers=null,Xr(a,r)}))},e.prototype._checkFinalizedStatuses=function(r){var n=this,i=n.hasError,o=n.thrownError,s=n.isStopped;i?r.error(o):s&&r.complete()},e.prototype.asObservable=function(){var r=new Ae;return r.source=this,r},e.create=function(r,n){return new Va(r,n)},e})(Ae),Va=(function(t){Me(e,t);function e(r,n){var i=t.call(this)||this;return i.destination=r,i.source=n,i}return e.prototype.next=function(r){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,r)},e.prototype.error=function(r){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,r)},e.prototype.complete=function(){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.complete)===null||n===void 0||n.call(r)},e.prototype._subscribe=function(r){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(r))!==null&&i!==void 0?i:za},e})(Ga),kv={now:function(){return Date.now()}},xv=(function(t){Me(e,t);function e(r,n){return t.call(this)||this}return e.prototype.schedule=function(r,n){return this},e})(er),Ka={setInterval:function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return setInterval.apply(void 0,ue([t,e],ne(r)))},clearInterval:function(t){return clearInterval(t)},delegate:void 0},Iv=(function(t){Me(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.scheduler=r,i.work=n,i.pending=!1,i}return e.prototype.schedule=function(r,n){var i;if(n===void 0&&(n=0),this.closed)return this;this.state=r;var o=this.id,s=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(s,o,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,n),this},e.prototype.requestAsyncId=function(r,n,i){return i===void 0&&(i=0),Ka.setInterval(r.flush.bind(r,this),i)},e.prototype.recycleAsyncId=function(r,n,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&Ka.clearInterval(n)},e.prototype.execute=function(r,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(r,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(r,n){var i=!1,o;try{this.work(r)}catch(s){i=!0,o=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},e.prototype.unsubscribe=function(){if(!this.closed){var r=this,n=r.id,i=r.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Xr(o,this),n!=null&&(this.id=this.recycleAsyncId(i,n,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},e})(xv),Ya=(function(){function t(e,r){r===void 0&&(r=t.now),this.schedulerActionCtor=e,this.now=r}return t.prototype.schedule=function(e,r,n){return r===void 0&&(r=0),new this.schedulerActionCtor(this,e).schedule(n,r)},t.now=kv.now,t})(),Cv=(function(t){Me(e,t);function e(r,n){n===void 0&&(n=Ya.now);var i=t.call(this,r,n)||this;return i.actions=[],i._active=!1,i}return e.prototype.flush=function(r){var n=this.actions;if(this._active){n.push(r);return}var i;this._active=!0;do if(i=r.execute(r.state,r.delay))break;while(r=n.shift());if(this._active=!1,i){for(;r=n.shift();)r.unsubscribe();throw i}},e})(Ya),rr=new Cv(Iv),Rv=rr,wi=new Ae(function(t){return t.complete()});function Za(t){return t&&ge(t.schedule)}function Xa(t){return t[t.length-1]}function Pv(t){return Za(Xa(t))?t.pop():void 0}function Ov(t,e){return typeof Xa(t)=="number"?t.pop():e}var Si=(function(t){return t&&typeof t.length=="number"&&typeof t!="function"});function Ja(t){return ge(t?.then)}function Qa(t){return ge(t[Ei])}function eu(t){return Symbol.asyncIterator&&ge(t?.[Symbol.asyncIterator])}function tu(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Dv(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ru=Dv();function nu(t){return ge(t?.[ru])}function iu(t){return yh(this,arguments,function(){var r,n,i,o;return H(this,function(s){switch(s.label){case 0:r=t.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,Ut(r.read())];case 3:return n=s.sent(),i=n.value,o=n.done,o?[4,Ut(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,Ut(i)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return r.releaseLock(),[7];case 10:return[2]}})})}function ou(t){return ge(t?.getReader)}function De(t){if(t instanceof Ae)return t;if(t!=null){if(Qa(t))return Lv(t);if(Si(t))return Nv(t);if(Ja(t))return Mv(t);if(eu(t))return su(t);if(nu(t))return Uv(t);if(ou(t))return Fv(t)}throw tu(t)}function Lv(t){return new Ae(function(e){var r=t[Ei]();if(ge(r.subscribe))return r.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Nv(t){return new Ae(function(e){for(var r=0;r<t.length&&!e.closed;r++)e.next(t[r]);e.complete()})}function Mv(t){return new Ae(function(e){t.then(function(r){e.closed||(e.next(r),e.complete())},function(r){return e.error(r)}).then(null,qa)})}function Uv(t){return new Ae(function(e){var r,n;try{for(var i=ae(t),o=i.next();!o.done;o=i.next()){var s=o.value;if(e.next(s),e.closed)return}}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}e.complete()})}function su(t){return new Ae(function(e){Bv(t,e).catch(function(r){return e.error(r)})})}function Fv(t){return su(iu(t))}function Bv(t,e){var r,n,i,o;return G(this,void 0,void 0,function(){var s,a;return H(this,function(u){switch(u.label){case 0:u.trys.push([0,5,6,11]),r=_h(t),u.label=1;case 1:return[4,r.next()];case 2:if(n=u.sent(),!!n.done)return[3,4];if(s=n.value,e.next(s),e.closed)return[2];u.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=u.sent(),i={error:a},[3,11];case 6:return u.trys.push([6,,9,10]),n&&!n.done&&(o=r.return)?[4,o.call(r)]:[3,8];case 7:u.sent(),u.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function vt(t,e,r,n,i){n===void 0&&(n=0),i===void 0&&(i=!1);var o=e.schedule(function(){r(),i?t.add(this.schedule(null,n)):this.unsubscribe()},n);if(t.add(o),!i)return o}function au(t,e){return e===void 0&&(e=0),je(function(r,n){r.subscribe(Oe(n,function(i){return vt(n,t,function(){return n.next(i)},e)},function(){return vt(n,t,function(){return n.complete()},e)},function(i){return vt(n,t,function(){return n.error(i)},e)}))})}function uu(t,e){return e===void 0&&(e=0),je(function(r,n){n.add(t.schedule(function(){return r.subscribe(n)},e))})}function zv(t,e){return De(t).pipe(uu(e),au(e))}function jv(t,e){return De(t).pipe(uu(e),au(e))}function $v(t,e){return new Ae(function(r){var n=0;return e.schedule(function(){n===t.length?r.complete():(r.next(t[n++]),r.closed||this.schedule())})})}function qv(t,e){return new Ae(function(r){var n;return vt(r,e,function(){n=t[ru](),vt(r,e,function(){var i,o,s;try{i=n.next(),o=i.value,s=i.done}catch(a){r.error(a);return}s?r.complete():r.next(o)},0,!0)}),function(){return ge(n?.return)&&n.return()}})}function cu(t,e){if(!t)throw new Error("Iterable cannot be null");return new Ae(function(r){vt(r,e,function(){var n=t[Symbol.asyncIterator]();vt(r,e,function(){n.next().then(function(i){i.done?r.complete():r.next(i.value)})},0,!0)})})}function Wv(t,e){return cu(iu(t),e)}function Hv(t,e){if(t!=null){if(Qa(t))return zv(t,e);if(Si(t))return $v(t,e);if(Ja(t))return jv(t,e);if(eu(t))return cu(t,e);if(nu(t))return qv(t,e);if(ou(t))return Wv(t,e)}throw tu(t)}function Gv(t,e){return e?Hv(t,e):De(t)}function lu(t){return t instanceof Date&&!isNaN(t)}var Vv=mi(function(t){return function(r){r===void 0&&(r=null),t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=r}});function Kv(t,e){var r=lu(t)?{first:t}:typeof t=="number"?{each:t}:t,n=r.first,i=r.each,o=r.with,s=o===void 0?Yv:o,a=r.scheduler,u=a===void 0?rr:a,c=r.meta,l=c===void 0?null:c;if(n==null&&i==null)throw new TypeError("No timeout provided.");return je(function(d,h){var f,p,g=null,m=0,v=function(b){p=vt(h,u,function(){try{f.unsubscribe(),De(s({meta:l,lastValue:g,seen:m})).subscribe(h)}catch(E){h.error(E)}},b)};f=d.subscribe(Oe(h,function(b){p?.unsubscribe(),m++,h.next(g=b),i>0&&v(i)},void 0,void 0,function(){p?.closed||p?.unsubscribe(),g=null})),!m&&v(n!=null?typeof n=="number"?n:+n-u.now():i)})}function Yv(t){throw new Vv(t)}function Ce(t,e){return je(function(r,n){var i=0;r.subscribe(Oe(n,function(o){n.next(t.call(e,o,i++))}))})}var Zv=Array.isArray;function Xv(t,e){return Zv(e)?t.apply(void 0,ue([],ne(e))):t(e)}function Jv(t){return Ce(function(e){return Xv(t,e)})}function Qv(t,e,r,n,i,o,s,a){var u=[],c=0,l=0,d=!1,h=function(){d&&!u.length&&!c&&e.complete()},f=function(g){return c<n?p(g):u.push(g)},p=function(g){c++;var m=!1;De(r(g,l++)).subscribe(Oe(e,function(v){e.next(v)},function(){m=!0},void 0,function(){if(m)try{c--;for(var v=function(){var b=u.shift();s||p(b)};u.length&&c<n;)v();h()}catch(b){e.error(b)}}))};return t.subscribe(Oe(e,f,function(){d=!0,h()})),function(){}}function nr(t,e,r){return r===void 0&&(r=1/0),ge(e)?nr(function(n,i){return Ce(function(o,s){return e(n,o,i,s)})(De(t(n,i)))},r):(typeof e=="number"&&(r=e),je(function(n,i){return Qv(n,i,t,r)}))}function em(t){return t===void 0&&(t=1/0),nr(Wa,t)}var tm=["addListener","removeListener"],rm=["addEventListener","removeEventListener"],nm=["on","off"];function jt(t,e,r,n){if(ge(r)&&(n=r,r=void 0),n)return jt(t,e,r).pipe(Jv(n));var i=ne(sm(t)?rm.map(function(a){return function(u){return t[a](e,u,r)}}):im(t)?tm.map(du(t,e)):om(t)?nm.map(du(t,e)):[],2),o=i[0],s=i[1];if(!o&&Si(t))return nr(function(a){return jt(a,e,r)})(De(t));if(!o)throw new TypeError("Invalid event target");return new Ae(function(a){var u=function(){for(var c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];return a.next(1<c.length?c:c[0])};return o(u),function(){return s(u)}})}function du(t,e){return function(r){return function(n){return t[r](e,n)}}}function im(t){return ge(t.addListener)&&ge(t.removeListener)}function om(t){return ge(t.on)&&ge(t.off)}function sm(t){return ge(t.addEventListener)&&ge(t.removeEventListener)}function fu(t,e,r){t===void 0&&(t=0),r===void 0&&(r=Rv);var n=-1;return e!=null&&(Za(e)?r=e:n=e),new Ae(function(i){var o=lu(t)?+t-r.now():t;o<0&&(o=0);var s=0;return r.schedule(function(){i.closed||(i.next(s++),0<=n?this.schedule(void 0,n):i.complete())},o)})}function Ti(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Pv(t),n=Ov(t,1/0),i=t;return i.length?i.length===1?De(i[0]):em(n)(Gv(i,r)):wi}var am=Array.isArray;function um(t){return t.length===1&&am(t[0])?t[0]:t}function Le(t,e){return je(function(r,n){var i=0;r.subscribe(Oe(n,function(o){return t.call(e,o,i++)&&n.next(o)}))})}function cm(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t=um(t),t.length===1?De(t[0]):new Ae(lm(t))}function lm(t){return function(e){for(var r=[],n=function(o){r.push(De(t[o]).subscribe(Oe(e,function(s){if(r){for(var a=0;a<r.length;a++)a!==o&&r[a].unsubscribe();r=null}e.next(s)})))},i=0;r&&!e.closed&&i<t.length;i++)n(i)}}function dm(t){return je(function(e,r){var n=[];return e.subscribe(Oe(r,function(i){return n.push(i)},function(){r.next(n),r.complete()})),De(t).subscribe(Oe(r,function(){var i=n;n=[],r.next(i)},_i)),function(){n=null}})}function fm(t,e){return e===void 0&&(e=rr),je(function(r,n){var i=null,o=null,s=null,a=function(){if(i){i.unsubscribe(),i=null;var c=o;o=null,n.next(c)}};function u(){var c=s+t,l=e.now();if(l<c){i=this.schedule(void 0,c-l),n.add(i);return}a()}r.subscribe(Oe(n,function(c){o=c,s=e.now(),i||(i=e.schedule(u,t),n.add(i))},function(){a(),n.complete()},void 0,function(){o=i=null}))})}function Ai(t){return t<=0?function(){return wi}:je(function(e,r){var n=0;e.subscribe(Oe(r,function(i){++n<=t&&(r.next(i),t<=n&&r.complete())}))})}function hm(t){return Ce(function(){return t})}function pm(t,e){return nr(function(r,n){return De(t(r,n)).pipe(Ai(1),hm(r))})}function gm(t,e){e===void 0&&(e=rr);var r=fu(t,e);return pm(function(){return r})}function vm(){return je(function(t,e){var r,n=!1;t.subscribe(Oe(e,function(i){var o=r;r=i,n&&e.next([o,i]),n=!0}))})}function It(t){t===void 0&&(t={});var e=t.connector,r=e===void 0?function(){return new Ga}:e,n=t.resetOnError,i=n===void 0?!0:n,o=t.resetOnComplete,s=o===void 0?!0:o,a=t.resetOnRefCountZero,u=a===void 0?!0:a;return function(c){var l,d,h,f=0,p=!1,g=!1,m=function(){d?.unsubscribe(),d=void 0},v=function(){m(),l=h=void 0,p=g=!1},b=function(){var E=l;v(),E?.unsubscribe()};return je(function(E,S){f++,!g&&!p&&m();var T=h=h??r();S.add(function(){f--,f===0&&!g&&!p&&(d=ki(b,u))}),T.subscribe(S),!l&&f>0&&(l=new tr({next:function(x){return T.next(x)},error:function(x){g=!0,m(),d=ki(v,i,x),T.error(x)},complete:function(){p=!0,m(),d=ki(v,s),T.complete()}}),De(E).subscribe(l))})(c)}}function ki(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(e===!0){t();return}if(e!==!1){var i=new tr({next:function(){i.unsubscribe(),t()}});return De(e.apply(void 0,ue([],ne(r)))).subscribe(i)}}function mm(t,e){return je(function(r,n){var i=null,o=0,s=!1,a=function(){return s&&!i&&n.complete()};r.subscribe(Oe(n,function(u){i?.unsubscribe();var c=0,l=o++;De(t(u,l)).subscribe(i=Oe(n,function(d){return n.next(e?e(u,d,l,c++):d)},function(){i=null,a()}))},function(){s=!0,a()}))})}function ym(t,e){return je(function(r,n){var i=e??{},o=i.leading,s=o===void 0?!0:o,a=i.trailing,u=a===void 0?!1:a,c=!1,l=null,d=null,h=!1,f=function(){d?.unsubscribe(),d=null,u&&(m(),h&&n.complete())},p=function(){d=null,h&&n.complete()},g=function(v){return d=De(t(v)).subscribe(Oe(n,f,p))},m=function(){if(c){c=!1;var v=l;l=null,n.next(v),!h&&g(v)}};r.subscribe(Oe(n,function(v){c=!0,l=v,!(d&&!d.closed)&&(s?m():g(v))},function(){h=!0,!(u&&c&&d&&!d.closed)&&n.complete()}))})}function _m(t,e,r){e===void 0&&(e=rr);var n=fu(t,e);return ym(function(){return n},r)}var bm=["input","select","textarea"],hu=function(t,e){var r,n=(r=window?.getComputedStyle)===null||r===void 0?void 0:r.call(window,t);return n?.getPropertyValue("cursor")==="pointer"&&e==="click"},ir=function(t,e,r){return r===void 0&&(r=!1),function(n,i){var o,s,a=t.pageUrlAllowlist,u=t.pageUrlExcludelist,c=t.shouldTrackEventResolver,l=(s=(o=i?.tagName)===null||o===void 0?void 0:o.toLowerCase)===null||s===void 0?void 0:s.call(o);if(!l)return!1;if(c)return c(n,i);if(!ii(window.location.href,a)||u&&u.length>0&&ii(window.location.href,u))return!1;var d=String(i?.getAttribute("type"))||"";if(typeof d=="string")switch(d.toLowerCase()){case"hidden":return!1;case"password":return!1}var h=hu(i,n);if(r&&h)return!0;if(e){var f=e.some(function(p){var g;return!!(!((g=i?.matches)===null||g===void 0)&&g.call(i,p))});if(!f)return!1}switch(l){case"input":case"select":case"textarea":return n==="change"||n==="click";default:return h?!0:n==="click"}}},Em=function(t){var e,r,n,i=(r=(e=t?.tagName)===null||e===void 0?void 0:e.toLowerCase)===null||r===void 0?void 0:r.call(e),o=t instanceof HTMLElement?((n=t.getAttribute("contenteditable"))===null||n===void 0?void 0:n.toLowerCase())==="true":!1;return!bm.includes(i)&&!o},wm=function(t){return t?t.split(",").map(function(e){return e.trim()}).filter(function(e){return e.length>0&&e!=="id"&&e!=="class"}):[]},Sm=function(t,e){return Object.entries(t).reduce(function(r,n){var i=ne(n,2),o=i[0],s=i[1];if(o.startsWith(e)){var a=o.replace(e,"");a&&(r[a]=s||"")}return r},{})},Tm=function(t){return t==null||typeof t=="object"&&Object.keys(t).length===0||typeof t=="string"&&t.trim().length===0},pu=function(t){return Object.keys(t).reduce(function(e,r){var n=t[r];return Tm(n)||(e[r]=n),e},{})},xi=function(t,e){return t?e.some(function(r){var n;return(n=t?.matches)===null||n===void 0?void 0:n.call(t,r)})?t:xi(t?.parentElement,e):null},Am=function(t){return new Promise(function(e,r){var n;try{var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.addEventListener("load",function(){e({status:!0})},{once:!0}),i.addEventListener("error",function(){r({status:!1,message:"Failed to load the script ".concat(t)})}),(n=document.head)===null||n===void 0||n.appendChild(i)}catch(o){r(o)}})};function km(){return"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))}var or=function(t){return!(t.event.target===null||!t.closestTrackedAncestor)};function xm(t){return t.type==="click"||t.type==="change"}var Im="1.12.2",Cm=new Set(["id","class","style","value","onclick","onchange","oninput","onblur","onsubmit","onfocus","onkeydown","onkeyup","onkeypress","data-reactid","data-react-checksum","data-reactroot",Ba,Zr]),Rm=["type"],Pm=["svg","path","g"],Om=["password","hidden"],Dm=128;function Lm(t,e){var r,n,i,o,s,a;if(t===null)return null;var u=String(t.tagName).toLowerCase(),c={tag:u},l=Array.from((o=(i=t.parentElement)===null||i===void 0?void 0:i.children)!==null&&o!==void 0?o:[]);l.length&&(c.index=l.indexOf(t),c.indexOfType=l.filter(function(T){return T.tagName===t.tagName}).indexOf(t));var d=(a=(s=t.previousElementSibling)===null||s===void 0?void 0:s.tagName)===null||a===void 0?void 0:a.toLowerCase();d&&(c.prevSib=String(d));var h=t.getAttribute("id");h&&(c.id=String(h));var f=Array.from(t.classList);f.length&&(c.classes=f);var p={},g=Array.from(t.attributes),m=g.filter(function(T){return!Cm.has(T.name)}),v=!Em(t);if(!Om.includes(String(t.getAttribute("type")))&&!Pm.includes(u))try{for(var b=ae(m),E=b.next();!E.done;E=b.next()){var S=E.value;if(!(v&&!Rm.includes(S.name))){if(e.has(S.name)){p[S.name]=xt;continue}p[S.name]=String(S.value).substring(0,Dm)}}}catch(T){r={error:T}}finally{try{E&&!E.done&&(n=b.return)&&n.call(b)}finally{if(r)throw r.error}}return Object.keys(p).length&&(c.attrs=p),c}function Nm(t){var e=[];if(!t)return e;e.push(t);for(var r=t.parentElement;r&&r.tagName!=="HTML";)e.push(r),r=r.parentElement;return e}var Mm=function(t,e){try{if(t.sourceType==="DOM_ELEMENT"){var r=document.documentElement;return t.scope&&e&&(r=e.closest(t.scope)),r&&t.selector?r.querySelector(t.selector):r}}catch{return}},Um=function(t,e,r){t.forEach(function(n){if(typeof n!="string"&&n.actionType==="ATTACH_EVENT_PROPERTY"){var i=r.extractDataFromDataSource(n.dataSource,e.closestTrackedAncestor);e.targetElementProperties[n.destinationKey]=i}})},Fm=/\b(?:\d[ -]*?){13,16}\b/,Bm=/(\d{3}-?\d{2}-?\d{4})/g,zm=/[^\s@]+@[^\s@.]+\.[^\s@]+/g,Ii=(function(){function t(e){var r,n,i=this,o;this.replaceSensitiveString=function(d){var h,f;if(typeof d!="string")return"";var p=d;p=p.replace(Fm,xt),p=p.replace(Bm,xt),p=p.replace(zm,xt);try{for(var g=ae(i.additionalMaskTextPatterns),m=g.next();!m.done;m=g.next()){var v=m.value;try{p=p.replace(v,xt)}catch{}}}catch(b){h={error:b}}finally{try{m&&!m.done&&(f=g.return)&&f.call(g)}finally{if(h)throw h.error}}return p},this.getHierarchy=function(d){var h,f,p,g=[];if(!d)return[];for(var m=Nm(d),v=new Map,b=m.length-1;b>=0;b--){var E=m[b];if(E){var S=wm(E.getAttribute(Ba)),T=b===m.length-1?[]:(p=v.get(m[b+1]))!==null&&p!==void 0?p:new Set,x=new Set(ue(ue([],ne(T),!1),ne(S),!1));v.set(E,x)}}g=m.map(function(j){var A;return Lm(j,(A=v.get(j))!==null&&A!==void 0?A:new Set)});var C=function(j){j?.attrs&&Object.entries(j.attrs).forEach(function(A){var D=ne(A,2),_=D[0],U=D[1];j.attrs&&(j.attrs[_]=i.replaceSensitiveString(U))})};try{for(var P=ae(g),I=P.next();!I.done;I=P.next()){var M=I.value;C(M)}}catch(j){h={error:j}}finally{try{I&&!I.done&&(f=P.return)&&f.call(P)}finally{if(h)throw h.error}}return g},this.getNearestLabel=function(d){var h=d.parentElement;if(!h)return"";var f;try{f=h.querySelector(":scope>span,h1,h2,h3,h4,h5,h6")}catch{f=null}return f?i.getText(f):i.getNearestLabel(h)},this.getEventProperties=function(d,h,f){var p,g,m,v,b=(m=(g=h?.tagName)===null||g===void 0?void 0:g.toLowerCase)===null||m===void 0?void 0:m.call(g),E=typeof h.getBoundingClientRect=="function"?h.getBoundingClientRect():{left:null,top:null},S=i.getHierarchy(h),T=(v=S[0])===null||v===void 0?void 0:v.attrs,x=i.getNearestLabel(h),C=Sm(T??{},f),P=(p={},p[Qg]=S,p[Ma]=b,p[Ua]=i.getText(h),p[tv]=E.left==null?null:Math.round(E.left),p[rv]=E.top==null?null:Math.round(E.top),p[iv]=C,p[ov]=x,p[Fa]=window.location.href.split("?")[0],p[sv]=typeof document<"u"&&i.replaceSensitiveString(document.title)||"",p[av]=window.innerHeight,p[uv]=window.innerWidth,p);return P[Xg]=h.getAttribute("id")||"",P[Jg]=h.getAttribute("class"),P[nv]=T?.["aria-label"],b==="a"&&d==="click"&&h instanceof HTMLAnchorElement&&(P[ev]=i.replaceSensitiveString(h.href)),pu(P)},this.addAdditionalEventProperties=function(d,h,f,p,g){g===void 0&&(g=!1);var m={event:d,timestamp:Date.now(),type:h};if(xm(m)&&m.event.target!==null){if(g){var v=hu(m.event.target,m.type);if(v)return m.closestTrackedAncestor=m.event.target,m.targetElementProperties=i.getEventProperties(m.type,m.closestTrackedAncestor,p),m}var b=xi(m.event.target,f);return b&&(m.closestTrackedAncestor=b,m.targetElementProperties=i.getEventProperties(m.type,b,p)),m}return m},this.extractDataFromDataSource=function(d,h){if(d.sourceType==="DOM_ELEMENT"){var f=Mm(d,h);return f?d.elementExtractType==="TEXT"?i.getText(f):d.elementExtractType==="ATTRIBUTE"&&d.attribute?f.getAttribute(d.attribute):void 0:void 0}},this.getText=function(d){var h=d.closest("[".concat(Zr,"]"))!==null;if(h)return xt;var f="";if(!d.querySelector("[".concat(Zr,"], [contenteditable]")))f=d.innerText||"";else{var p=d.cloneNode(!0);p.querySelectorAll("[".concat(Zr,"], [contenteditable]")).forEach(function(g){g.innerText=xt}),f=p.innerText||""}return i.replaceSensitiveString(f.substring(0,255)).replace(/\s+/g," ").trim()},this.getEventTagProps=function(d){var h,f,p;if(!d)return{};var g=(p=(f=d?.tagName)===null||f===void 0?void 0:f.toLowerCase)===null||p===void 0?void 0:p.call(f),m=(h={},h[Ma]=g,h[Ua]=i.getText(d),h[Fa]=window.location.href.split("?")[0],h);return pu(m)};var s=(o=e.maskTextRegex)!==null&&o!==void 0?o:[],a=[];try{for(var u=ae(s),c=u.next();!c.done;c=u.next()){var l=c.value;if(a.length>=pv)break;if(l instanceof RegExp)a.push(l);else if("pattern"in l&&typeof l.pattern=="string")try{a.push(new RegExp(l.pattern,"i"))}catch{}}}catch(d){r={error:d}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}this.additionalMaskTextPatterns=a}return t})(),jm=(function(){function t(e){var r=e===void 0?{}:e,n=r.origin,i=n===void 0?Yr:n,o=this;this.endpoint=Yr,this.requestCallbacks={},this.onSelect=function(s){o.notify({action:"element-selected",data:s})},this.onTrack=function(s,a){s==="selector-mode-changed"?o.notify({action:"track-selector-mode-changed",data:a}):s==="selector-moved"&&o.notify({action:"track-selector-moved",data:a})},this.endpoint=i}return t.prototype.notify=function(e){var r,n,i,o;(n=(r=this.logger)===null||r===void 0?void 0:r.debug)===null||n===void 0||n.call(r,"Message sent: ",JSON.stringify(e)),(o=(i=window.opener)===null||i===void 0?void 0:i.postMessage)===null||o===void 0||o.call(i,e,this.endpoint)},t.prototype.sendRequest=function(e,r,n){var i=this;n===void 0&&(n={timeout:15e3});var o=km(),s={id:o,action:e,args:r},a=new Promise(function(u,c){i.requestCallbacks[o]={resolve:u,reject:c},i.notify(s),n?.timeout>0&&setTimeout(function(){c(new Error("".concat(e," timed out (id: ").concat(o,")"))),delete i.requestCallbacks[o]},n.timeout)});return a},t.prototype.handleResponse=function(e){var r;if(!this.requestCallbacks[e.id]){(r=this.logger)===null||r===void 0||r.warn("No callback found for request id: ".concat(e.id));return}this.requestCallbacks[e.id].resolve(e.responseData),delete this.requestCallbacks[e.id]},t.prototype.setup=function(e){var r=this,n=e===void 0?{dataExtractor:new Ii({})}:e,i=n.logger,o=n.endpoint,s=n.isElementSelectable,a=n.cssSelectorAllowlist,u=n.actionClickAllowlist,c=n.dataExtractor;this.logger=i,o&&this.endpoint===Yr&&(this.endpoint=o);var l=null;window.addEventListener("message",function(d){var h,f,p,g,m;if((f=(h=r.logger)===null||h===void 0?void 0:h.debug)===null||f===void 0||f.call(h,"Message received: ",JSON.stringify(d)),r.endpoint===d.origin){var v=d?.data,b=v?.action;if(b)if("id"in v)(g=(p=r.logger)===null||p===void 0?void 0:p.debug)===null||g===void 0||g.call(p,"Received Response to previous request: ",JSON.stringify(d)),r.handleResponse(v);else if(b==="ping")r.notify({action:"pong"});else if(b==="initialize-visual-tagging-selector"){var E=v?.data;Am(fv).then(function(){var S;l=(S=window?.amplitudeVisualTaggingSelector)===null||S===void 0?void 0:S.call(window,{getEventTagProps:c.getEventTagProps,isElementSelectable:function(T){return s?s(E?.actionType||"click",T):!0},onTrack:r.onTrack,onSelect:r.onSelect,visualHighlightClass:hv,messenger:r,cssSelectorAllowlist:a,actionClickAllowlist:u,extractDataFromDataSource:c.extractDataFromDataSource,dataExtractor:c,diagnostics:{autocapture:{version:Im}}}),r.notify({action:"selector-loaded"})}).catch(function(){var S;(S=r.logger)===null||S===void 0||S.warn("Failed to initialize visual tagging selector")})}else b==="close-visual-tagging-selector"&&((m=l?.close)===null||m===void 0||m.call(l))}}),this.notify({action:"page-loaded"})},t})(),$m=5;function qm(t){var e=t.amplitude,r=t.allObservables,n=t.options,i=t.shouldTrackEvent,o=t.evaluateTriggers,s=r.clickObservable,a=s.pipe(vm(),Le(function(d){var h=ne(d,2),f=h[0],p=h[1],g=f.event.target!==p.event.target,m=Math.abs(p.event.screenX-f.event.screenX)<=20&&Math.abs(p.event.screenY-f.event.screenY)<=20;return g&&!m})),u=s.pipe(fm(n.debounceTime),Ce(function(){return"timeout"})),c=Ti(a,u),l=s.pipe(gm(0),Le(or),Le(function(d){return i("click",d.closestTrackedAncestor)}),Ce(function(d){return o(d)}),dm(c));return l.subscribe(function(d){var h,f,p=(d.length>=$m,vi);try{for(var g=ae(d),m=g.next();!m.done;m=g.next()){var v=m.value;e?.track(p,v.targetElementProperties)}}catch(b){h={error:b}}finally{try{m&&!m.done&&(f=g.return)&&f.call(g)}finally{if(h)throw h.error}}})}function Wm(t){var e=t.amplitude,r=t.allObservables,n=t.getEventProperties,i=t.shouldTrackEvent,o=t.evaluateTriggers,s=r.changeObservable,a=s.pipe(Le(or),Le(function(u){return i("change",u.closestTrackedAncestor)}),Ce(function(u){return o(u)}));return a.subscribe(function(u){e?.track(Zg,n("change",u.closestTrackedAncestor))})}function Hm(t){var e=t.amplitude,r=t.allObservables,n=t.options,i=t.getEventProperties,o=t.shouldTrackEvent,s=t.shouldTrackActionClick,a=r.clickObservable,u=r.mutationObservable,c=r.navigateObservable,l=a.pipe(Le(function(p){return!o("click",p.closestTrackedAncestor)}),Ce(function(p){var g=xi(p.event.target,n.actionClickAllowlist);return p.closestTrackedAncestor=g,p.closestTrackedAncestor!==null&&(p.targetElementProperties=i(p.type,p.closestTrackedAncestor)),p}),Le(or),Le(function(p){return s("click",p.closestTrackedAncestor)})),d=[u];c&&d.push(c);var h=Ti.apply(void 0,ue([],ne(d),!1)),f=l.pipe(mm(function(p){return h.pipe(Ai(1),Kv({first:500,with:function(){return wi}}),Ce(function(){return p}))}));return f.subscribe(function(p){e?.track(vi,i("click",p.closestTrackedAncestor))})}var gu=function(){return new Ae(function(t){var e=new MutationObserver(function(r){t.next(r)});return e.observe(document.body,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),function(){return e.disconnect()}})},vu=function(t){return t===void 0&&(t="click"),jt(document,t,{capture:!0})},Gm=function(t,e){try{if(e.subprop_key==="[Amplitude] Element Text")return e.subprop_op==="is"&&e.subprop_value.includes(t.targetElementProperties["[Amplitude] Element Text"]);if(e.subprop_key==="[Amplitude] Element Hierarchy")return e.subprop_op==="autotrack css match"&&!!t.closestTrackedAncestor.closest(e.subprop_value.toString())}catch(r){return console.error("Error matching event to filter",r),!1}return!1},Ci={"[Amplitude] Element Clicked":"click","[Amplitude] Element Changed":"change"},mu=function(t){var e,r,n,i,o=Object.values(Ci).reduce(function(f,p){return f[p]=new Set,f},{});if(!t)return o;try{for(var s=ae(t),a=s.next();!a.done;a=s.next()){var u=a.value;try{try{for(var c=(n=void 0,ae(u.definition)),l=c.next();!l.done;l=c.next()){var d=l.value,h=Ci[d.event_type];h&&o[h].add(u.id)}}catch(f){n={error:f}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}}catch(f){console.warn("Skipping Labeled Event due to malformed definition",u?.id,f)}}}catch(f){e={error:f}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return o},yu=function(t){var e,r,n,i,o=new Map;try{for(var s=ae(t),a=s.next();!a.done;a=s.next()){var u=a.value;try{for(var c=(n=void 0,ae(u.conditions)),l=c.next();!l.done;l=c.next()){var d=l.value;if(d.type==="LABELED_EVENT"){var h=d.match.eventId,f=o.get(h);f||(f=[],o.set(h,f)),f.push(u)}}}catch(p){n={error:p}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}}}catch(p){e={error:p}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(e)throw e.error}}return o},Vm=function(t,e){return e.filter(function(r){return r.definition.some(function(n){return Ci[n.event_type]===t.type&&n.filters.every(function(i){return Gm(t,i)})})})},Km=function(t,e){var r,n,i,o,s=new Set;try{for(var a=ae(t),u=a.next();!u.done;u=a.next()){var c=u.value,l=e.get(c.id);if(l)try{for(var d=(i=void 0,ae(l)),h=d.next();!h.done;h=d.next()){var f=h.value;s.add(f)}}catch(p){i={error:p}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}}}catch(p){r={error:p}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return Array.from(s)},Ym=(function(){function t(e,r,n,i){this.groupedLabeledEvents=e,this.labeledEventToTriggerMap=r,this.dataExtractor=n,this.options=i}return t.prototype.evaluate=function(e){var r,n,i=this.options.pageActions;if(!i)return e;var o=Vm(e,Array.from(this.groupedLabeledEvents[e.type]).map(function(l){return i.labeledEvents[l]})),s=Km(o,this.labeledEventToTriggerMap);try{for(var a=ae(s),u=a.next();!u.done;u=a.next()){var c=u.value;Um(c.actions,e,this.dataExtractor)}}catch(l){r={error:l}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return e},t.prototype.update=function(e,r,n){this.groupedLabeledEvents=e,this.labeledEventToTriggerMap=r,this.options=n},t})(),Zm=function(t,e,r,n){return new Ym(t,e,r,n)},Je;(function(t){t.ClickObservable="clickObservable",t.ChangeObservable="changeObservable",t.NavigateObservable="navigateObservable",t.MutationObservable="mutationObservable"})(Je||(Je={}));var Xm=function(t){var e,r,n,i,o,s,a,u;t===void 0&&(t={});var c=t.dataAttributePrefix,l=c===void 0?Hs:c,d=t.visualTaggingOptions,h=d===void 0?{enabled:!0,messenger:new jm}:d;t.cssSelectorAllowlist=(e=t.cssSelectorAllowlist)!==null&&e!==void 0?e:Ap,t.actionClickAllowlist=(r=t.actionClickAllowlist)!==null&&r!==void 0?r:kp,t.debounceTime=(n=t.debounceTime)!==null&&n!==void 0?n:0,t.pageUrlExcludelist=(i=t.pageUrlExcludelist)===null||i===void 0?void 0:i.reduce(function(I,M){if(typeof M=="string"&&I.push(M),M instanceof RegExp&&I.push(M),typeof M=="object"&&M!==null&&"pattern"in M)try{I.push(new RegExp(M.pattern))}catch(j){return console.warn("Invalid regex pattern: ".concat(M.pattern),j),I}return I},[]);var f=Vg,p="enrichment",g=[],m=new Ii(t),v=function(){var I,M=vu().pipe(Ce(function(_){return m.addAdditionalEventProperties(_,"click",t.cssSelectorAllowlist,l)}),It()),j=jt(document,"change",{capture:!0}).pipe(Ce(function(_){return m.addAdditionalEventProperties(_,"change",t.cssSelectorAllowlist,l)}),It()),A;window.navigation&&(A=jt(window.navigation,"navigate").pipe(Ce(function(_){return m.addAdditionalEventProperties(_,"navigate",t.cssSelectorAllowlist,l)}),It()));var D=gu().pipe(Ce(function(_){return m.addAdditionalEventProperties(_,"mutation",t.cssSelectorAllowlist,l)}),It());return I={},I[Je.ClickObservable]=M,I[Je.ChangeObservable]=j,I[Je.NavigateObservable]=A,I[Je.MutationObservable]=D,I},b=mu(Object.values((s=(o=t.pageActions)===null||o===void 0?void 0:o.labeledEvents)!==null&&s!==void 0?s:{})),E=yu((u=(a=t.pageActions)===null||a===void 0?void 0:a.triggers)!==null&&u!==void 0?u:[]),S=Zm(b,E,m,t),T=function(I){var M,j;I&&(t.pageActions=Z(Z({},t.pageActions),I),b=mu(Object.values((M=t.pageActions.labeledEvents)!==null&&M!==void 0?M:{})),E=yu((j=t.pageActions.triggers)!==null&&j!==void 0?j:[]),S.update(b,E,t))},x=function(I,M){return G(void 0,void 0,void 0,function(){var j,A,D,_,U,ee,z,te,q,re;return H(this,function(R){return typeof document>"u"?[2]:(I.fetchRemoteConfig&&Gg({localConfig:I,configKeys:["analyticsSDK.pageActions"]}).then(function(L){return G(void 0,void 0,void 0,function(){var J,X,K;return H(this,function(fe){switch(fe.label){case 0:return fe.trys.push([0,2,,3]),[4,L.getRemoteConfig("analyticsSDK","pageActions")];case 1:return J=fe.sent(),T(J),[3,3];case 2:return X=fe.sent(),(K=I?.loggerProvider)===null||K===void 0||K.error("Failed to fetch remote config: ".concat(String(X))),[3,3];case 3:return[2]}})})}).catch(function(L){var J;(J=I?.loggerProvider)===null||J===void 0||J.error("Failed to create remote config fetch: ".concat(String(L)))}),j=ir(t,t.cssSelectorAllowlist),A=ir(t,t.actionClickAllowlist),D=v(),_=qm({allObservables:D,options:t,amplitude:M,shouldTrackEvent:j,evaluateTriggers:S.evaluate.bind(S)}),g.push(_),U=Wm({allObservables:D,getEventProperties:function(){for(var L=[],J=0;J<arguments.length;J++)L[J]=arguments[J];return m.getEventProperties.apply(m,ue(ue([],ne(L),!1),[l],!1))},amplitude:M,shouldTrackEvent:j,evaluateTriggers:S.evaluate.bind(S)}),g.push(U),ee=Hm({allObservables:D,options:t,getEventProperties:function(){for(var L=[],J=0;J<arguments.length;J++)L[J]=arguments[J];return m.getEventProperties.apply(m,ue(ue([],ne(L),!1),[l],!1))},amplitude:M,shouldTrackEvent:j,shouldTrackActionClick:A}),g.push(ee),(q=I?.loggerProvider)===null||q===void 0||q.log("".concat(f," has been successfully added.")),window.opener&&h.enabled&&(z=t.cssSelectorAllowlist,te=t.actionClickAllowlist,(re=h.messenger)===null||re===void 0||re.setup(Z(Z({dataExtractor:m,logger:I?.loggerProvider},I?.serverZone&&{endpoint:dv[I.serverZone]}),{isElementSelectable:ir(t,ue(ue([],ne(z),!1),ne(te),!1)),cssSelectorAllowlist:z,actionClickAllowlist:te}))),[2])})})},C=function(I){return G(void 0,void 0,void 0,function(){return H(this,function(M){return[2,I]})})},P=function(){return G(void 0,void 0,void 0,function(){var I,M,j,A,D;return H(this,function(_){try{for(I=ae(g),M=I.next();!M.done;M=I.next())j=M.value,j.unsubscribe()}catch(U){A={error:U}}finally{try{M&&!M.done&&(D=I.return)&&D.call(I)}finally{if(A)throw A.error}}return[2]})})};return{name:f,type:p,setup:x,execute:C,teardown:P}},_u=3e3;function Jm(t){var e=t.amplitude,r=t.allObservables,n=t.getEventProperties,i=t.shouldTrackDeadClick,o=r.clickObservable,s=r.mutationObservable,a=r.navigateObservable,u=o.pipe(Le(or),Le(function(h){return i("click",h.closestTrackedAncestor)}),Le(function(h){var f=h.event.target;return f.closest('a[target="_blank"]')===null})),c=[s];a&&c.push(a);var l=Ti.apply(void 0,ue([],ne(c),!1)),d=u.pipe(nr(function(h){var f,p=new Ae(function(g){return f=setTimeout(function(){return g.next(h)},_u),function(){clearTimeout(f)}});return cm(p,l.pipe(Ai(1),Ce(function(){return null}))).pipe(Le(function(g){return g!==null}))}),_m(_u));return d.subscribe(function(h){var f={"[Amplitude] X":h.event.clientX,"[Amplitude] Y":h.event.clientY};e.track(Yg,Z(Z({},n("click",h.closestTrackedAncestor)),f),{time:h.timestamp})})}var Ri=Pp,bu=Rp,Eu=Op;function wu(t,e){var r,n,i,o,s=e.event,a=s.clientX,u=s.clientY;t.yMin=Math.min((r=t.yMin)!==null&&r!==void 0?r:u,u),t.yMax=Math.max((n=t.yMax)!==null&&n!==void 0?n:u,u),t.xMin=Math.min((i=t.xMin)!==null&&i!==void 0?i:a,a),t.xMax=Math.max((o=t.xMax)!==null&&o!==void 0?o:a,a),t.isOutOfBounds=t.yMax-t.yMin>Eu||t.xMax-t.xMin>Eu}function Su(t){var e=t[0],r=t[t.length-1],n=Z({"[Amplitude] Begin Time":new Date(e.timestamp).toISOString(),"[Amplitude] End Time":new Date(r.timestamp).toISOString(),"[Amplitude] Duration":r.timestamp-e.timestamp,"[Amplitude] Clicks":t.map(function(i){return{X:i.event.clientX,Y:i.event.clientY,Time:i.timestamp}}),"[Amplitude] Click Count":t.length},e.targetElementProperties);return{rageClickEvent:n,time:e.timestamp}}function Qm(t,e){var r=Math.max(0,t.length-Ri+1),n=t[r];return e.timestamp-n.timestamp>=bu}function ey(t,e){return t.length>0&&t[t.length-1].closestTrackedAncestor!==e.closestTrackedAncestor}function ty(t){var e=t.amplitude,r=t.allObservables,n=t.shouldTrackRageClick,i=r.clickObservable,o=[],s={},a;function u(c){o=[],s={},c&&(wu(s,c),o.push(c))}return i.pipe(Le(or),Le(function(c){return n("click",c.closestTrackedAncestor)}),Ce(function(c){if(a&&clearTimeout(a),wu(s,c),o.length===0)return o.push(c),null;if(ey(o,c)||Qm(o,c)||s.isOutOfBounds){var l=o.length>=Ri?Su(o):null;return u(c),l}return o.push(c),o.length>=Ri&&(a=setTimeout(function(){var d=Su(o),h=d.rageClickEvent,f=d.time;e.track(Na,h,{time:f}),u()},bu)),null}),Le(function(c){return c!==null})).subscribe(function(c){c!==null&&e.track(Na,c.rageClickEvent,{time:c.time})})}var ry=function(t){var e,r,n,i,o;t===void 0&&(t={});var s=Kg,a="enrichment",u=[],c=(r=(e=t.rageClicks)===null||e===void 0?void 0:e.cssSelectorAllowlist)!==null&&r!==void 0?r:Cp,l=(i=(n=t.deadClicks)===null||n===void 0?void 0:n.cssSelectorAllowlist)!==null&&i!==void 0?i:Ip,d=(o=t.dataAttributePrefix)!==null&&o!==void 0?o:Hs,h=new Ii(t),f=ue([],ne(new Set(ue(ue([],ne(c),!1),ne(l),!1))),!1),p=function(){var b,E=vu("pointerdown").pipe(Ce(function(x){return h.addAdditionalEventProperties(x,"click",f,d,!0)}),It()),S;window.navigation&&(S=jt(window.navigation,"navigate").pipe(Ce(function(x){return h.addAdditionalEventProperties(x,"navigate",f,d)}),It()));var T=gu().pipe(Ce(function(x){return h.addAdditionalEventProperties(x,"mutation",f,d)}),It());return b={},b[Je.ClickObservable]=E,b[Je.ChangeObservable]=new Ae,b[Je.NavigateObservable]=S,b[Je.MutationObservable]=T,b},g=function(b,E){return G(void 0,void 0,void 0,function(){var S,T,x,C,P,I;return H(this,function(M){return typeof document>"u"?[2]:(S=ir(t,c),T=ir(t,l),x=p(),C=ty({allObservables:x,amplitude:E,shouldTrackRageClick:S}),u.push(C),P=Jm({amplitude:E,allObservables:x,getEventProperties:function(j,A){return h.getEventProperties(j,A,d)},shouldTrackDeadClick:T}),u.push(P),(I=b?.loggerProvider)===null||I===void 0||I.log("".concat(s," has been successfully added.")),[2])})})},m=function(b){return G(void 0,void 0,void 0,function(){return H(this,function(E){return[2,b]})})},v=function(){return G(void 0,void 0,void 0,function(){var b,E,S,T,x;return H(this,function(C){try{for(b=ae(u),E=b.next();!E.done;E=b.next())S=E.value,S.unsubscribe()}catch(P){T={error:P}}finally{try{E&&!E.done&&(x=b.return)&&x.call(b)}finally{if(T)throw T.error}}return[2]})})};return{name:s,type:a,setup:g,execute:m,teardown:v}},ny="@amplitude/plugin-network-capture-browser",Tu="[Amplitude] Network Request",Au="500-599";function en(t,e){var r=e.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&"),n="^"+r.replace(/\*/g,".*")+"$",i=new RegExp(n);return i.test(t)}function ku(t,e){var r,n,i=e.split(",");try{for(var o=ae(i),s=o.next();!s.done;s=o.next()){var a=s.value,u=ne(a.split("-").map(Number),2),c=u[0],l=u[1];if(t===c&&l===void 0||t>=c&&t<=l)return!0}}catch(d){r={error:d}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return!1}function iy(t,e,r,n,i){if(!(t.hosts&&!t.hosts.find(function(s){return en(e,s)}))&&!(n&&t.urls&&!ii(n,t.urls))&&!(i&&t.methods&&!t.methods.find(function(s){return i.toLowerCase()===s.toLowerCase()||s==="*"}))){if(r||r===0){var o=t.statusCodeRange||Au;if(!ku(r,o))return!1}return!0}}function xu(t){var e;if(t)try{var r=(e=Ie())===null||e===void 0?void 0:e.location.href,n=new URL(t,r),i=n.searchParams.toString(),o=n.hash.replace("#",""),s=n.href,a=n.host;n.hash="",n.search="";var u=n.href;return{query:i,fragment:o,href:s,hrefWithoutQueryOrHash:u,host:a}}catch{return}}function oy(t,e){if(t.includes("amplitude.com"))try{var r=e.body;if(typeof r!="string")return!1;var n=JSON.parse(r),i=n.events;if(i.find(function(o){return o.event_type===Tu}))return!0}catch{}return!1}function Iu(t){if(typeof t!="object"||t===null){if(t)return ue([],ne(ri),!1);if(t===void 0){var e=void 0;return e}return}if(t.length!==0)return t}function Cu(t){var e,r;return!(!((e=t?.allowlist)===null||e===void 0)&&e.length)&&!(!((r=t?.blocklist)===null||r===void 0)&&r.length)}function sy(t,e){var r;e===void 0&&(e={});var n=xu(t.url);if(!n)return!1;var i=n.host;if(e.ignoreAmplitudeRequests!==!1&&(en(i,"*.amplitude.com")||en(i,"amplitude.com"))||!((r=e.ignoreHosts)===null||r===void 0)&&r.find(function(s){return en(i,s)})||!e.captureRules&&t.status!==void 0&&!ku(t.status,Au))return!1;if(e.captureRules){var o;if(ue([],ne(e.captureRules),!1).reverse().find(function(s){if(o=iy(s,i,t.status,t.url,t.method),o){var a=Iu(s.responseHeaders);if(t.responseWrapper&&a){var u=t.responseWrapper.headers(a);u&&(t.responseHeaders=u)}var c=Iu(s.requestHeaders);if(t.requestWrapper&&c){var l=t.requestWrapper.headers(c);l&&(t.requestHeaders=l)}t.responseWrapper&&s.responseBody&&!Cu(s.responseBody)&&(t.responseBodyJson=t.responseWrapper.json(s.responseBody.allowlist,s.responseBody.blocklist)),t.requestWrapper&&s.requestBody&&!Cu(s.requestBody)&&(t.requestBodyJson=t.requestWrapper.json(s.requestBody.allowlist,s.requestBody.blocklist))}return o!==void 0}),!o)return!1}return!(t.requestWrapper&&oy(i,t.requestWrapper))}function ay(t,e,r){return G(this,void 0,void 0,function(){var n,i,o;return H(this,function(s){switch(s.label){case 0:return e.requestBodyJson||e.responseBodyJson?[4,Promise.all([e.requestBodyJson,e.responseBodyJson])]:[3,2];case 1:n=ne.apply(void 0,[s.sent(),2]),i=n[0],o=n[1],i&&(t["[Amplitude] Request Body"]=i),o&&(t["[Amplitude] Response Body"]=o),s.label=2;case 2:return r?.track(Tu,t),[2]}})})}function uy(t){var e=t.allObservables,r=t.networkTrackingOptions,n=t.amplitude,i=e.networkObservable,o=i.pipe(Le(function(s){return sy(s.event,r)}));return o.subscribe(function(s){var a,u,c,l=s.event,d=xu(l.url);if(d){var h=(u=l.responseWrapper)===null||u===void 0?void 0:u.bodySize,f=(c=l.requestWrapper)===null||c===void 0?void 0:c.bodySize,p=(a={},a["[Amplitude] URL"]=d.hrefWithoutQueryOrHash,a["[Amplitude] URL Query"]=d.query,a["[Amplitude] URL Fragment"]=d.fragment,a["[Amplitude] Request Method"]=l.method,a["[Amplitude] Status Code"]=l.status,a["[Amplitude] Start Time"]=l.startTime,a["[Amplitude] Completion Time"]=l.endTime,a["[Amplitude] Duration"]=l.duration,a["[Amplitude] Request Body Size"]=f,a["[Amplitude] Response Body Size"]=h,a["[Amplitude] Request Type"]=l.type,a["[Amplitude] Request Headers"]=l.requestHeaders,a["[Amplitude] Response Headers"]=l.responseHeaders,a);ay(p,l,n)}})}var Pi;(function(t){t.NetworkObservable="networkObservable"})(Pi||(Pi={}));var cy=function(t){t===void 0&&(t={});var e=ny,r="enrichment",n,i=[],o=function(l,d){var h={event:l,timestamp:Date.now(),type:d};return h},s=function(){var l,d=new Ae(function(h){var f=new jp(function(p){var g=o(p,"network");h.next(g)});return Qs.subscribe(f,n),function(){Qs.unsubscribe(f)}});return l={},l[Pi.NetworkObservable]=d,l},a=function(l,d){return G(void 0,void 0,void 0,function(){var h,f;return H(this,function(p){return typeof document>"u"?[2]:(h=s(),f=uy({allObservables:h,networkTrackingOptions:t,amplitude:d}),i.push(f),n=l?.loggerProvider,n?.log("".concat(e," has been successfully added.")),[2])})})},u=function(l){return G(void 0,void 0,void 0,function(){return H(this,function(d){return[2,l]})})},c=function(){return G(void 0,void 0,void 0,function(){var l,d,h,f,p;return H(this,function(g){try{for(l=ae(i),d=l.next();!d.done;d=l.next())h=d.value,h.unsubscribe()}catch(m){f={error:m}}finally{try{d&&!d.done&&(p=l.return)&&p.call(l)}finally{if(f)throw f.error}}return[2]})})};return{name:e,type:r,setup:a,execute:u,teardown:c}},ly="web-vitals-browser",dy="[Amplitude] Web Vitals";let Ru=-1;const $t=t=>{addEventListener("pageshow",(e=>{e.persisted&&(Ru=e.timeStamp,t(e))}),!0)},Qe=(t,e,r,n)=>{let i,o;return s=>{e.value>=0&&(s||n)&&(o=e.value-(i??0),(o||i===void 0)&&(i=e.value,e.delta=o,e.rating=((a,u)=>a>u[1]?"poor":a>u[0]?"needs-improvement":"good")(e.value,r),t(e)))}},Oi=t=>{requestAnimationFrame((()=>requestAnimationFrame((()=>t()))))},Di=()=>{const t=performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},sr=()=>Di()?.activationStart??0,et=(t,e=-1)=>{const r=Di();let n="navigate";return Ru>=0?n="back-forward-cache":r&&(document.prerendering||sr()>0?n="prerender":document.wasDiscarded?n="restore":r.type&&(n=r.type.replace(/_/g,"-"))),{name:t,value:e,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:n}},Li=new WeakMap;function Ni(t,e){return Li.get(t)||Li.set(t,new e),Li.get(t)}class fy{t;i=0;o=[];h(e){if(e.hadRecentInput)return;const r=this.o[0],n=this.o.at(-1);this.i&&r&&n&&e.startTime-n.startTime<1e3&&e.startTime-r.startTime<5e3?(this.i+=e.value,this.o.push(e)):(this.i=e.value,this.o=[e]),this.t?.(e)}}const ar=(t,e,r={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const n=new PerformanceObserver((i=>{Promise.resolve().then((()=>{e(i.getEntries())}))}));return n.observe({type:t,buffered:!0,...r}),n}}catch{}},Mi=t=>{let e=!1;return()=>{e||(t(),e=!0)}};let qt=-1;const Pu=new Set,Ou=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,Ui=t=>{if(document.visibilityState==="hidden"){if(t.type==="visibilitychange")for(const e of Pu)e();isFinite(qt)||(qt=t.type==="visibilitychange"?t.timeStamp:0,removeEventListener("prerenderingchange",Ui,!0))}},tn=()=>{if(qt<0){const t=sr();qt=(document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter((r=>r.name==="hidden"&&r.startTime>t))[0]?.startTime)??Ou(),addEventListener("visibilitychange",Ui,!0),addEventListener("prerenderingchange",Ui,!0),$t((()=>{setTimeout((()=>{qt=Ou()}))}))}return{get firstHiddenTime(){return qt},onHidden(t){Pu.add(t)}}},rn=t=>{document.prerendering?addEventListener("prerenderingchange",(()=>t()),!0):t()},Du=[1800,3e3],Lu=(t,e={})=>{rn((()=>{const r=tn();let n,i=et("FCP");const o=ar("paint",(s=>{for(const a of s)a.name==="first-contentful-paint"&&(o.disconnect(),a.startTime<r.firstHiddenTime&&(i.value=Math.max(a.startTime-sr(),0),i.entries.push(a),n(!0)))}));o&&(n=Qe(t,i,Du,e.reportAllChanges),$t((s=>{i=et("FCP"),n=Qe(t,i,Du,e.reportAllChanges),Oi((()=>{i.value=performance.now()-s.timeStamp,n(!0)}))})))}))},Nu=[.1,.25],hy=(t,e={})=>{const r=tn();Lu(Mi((()=>{let n,i=et("CLS",0);const o=Ni(e,fy),s=u=>{for(const c of u)o.h(c);o.i>i.value&&(i.value=o.i,i.entries=o.o,n())},a=ar("layout-shift",s);a&&(n=Qe(t,i,Nu,e.reportAllChanges),r.onHidden((()=>{s(a.takeRecords()),n(!0)})),$t((()=>{o.i=0,i=et("CLS",0),n=Qe(t,i,Nu,e.reportAllChanges),Oi((()=>n()))})),setTimeout(n))})))};let Mu=0,Fi=1/0,nn=0;const py=t=>{for(const e of t)e.interactionId&&(Fi=Math.min(Fi,e.interactionId),nn=Math.max(nn,e.interactionId),Mu=nn?(nn-Fi)/7+1:0)};let Bi;const Uu=()=>Bi?Mu:performance.interactionCount??0,gy=()=>{"interactionCount"in performance||Bi||(Bi=ar("event",py,{type:"event",buffered:!0,durationThreshold:0}))};let Fu=0;class vy{u=[];l=new Map;m;p;v(){Fu=Uu(),this.u.length=0,this.l.clear()}L(){const e=Math.min(this.u.length-1,Math.floor((Uu()-Fu)/50));return this.u[e]}h(e){if(this.m?.(e),!e.interactionId&&e.entryType!=="first-input")return;const r=this.u.at(-1);let n=this.l.get(e.interactionId);if(n||this.u.length<10||e.duration>r.P){if(n?e.duration>n.P?(n.entries=[e],n.P=e.duration):e.duration===n.P&&e.startTime===n.entries[0].startTime&&n.entries.push(e):(n={id:e.interactionId,entries:[e],P:e.duration},this.l.set(n.id,n),this.u.push(n)),this.u.sort(((i,o)=>o.P-i.P)),this.u.length>10){const i=this.u.splice(10);for(const o of i)this.l.delete(o.id)}this.p?.(n)}}}const Bu=t=>{const e=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?t():(t=Mi(t),addEventListener("visibilitychange",t,{once:!0,capture:!0}),e((()=>{t(),removeEventListener("visibilitychange",t,{capture:!0})})))},zu=[200,500],my=(t,e={})=>{if(!globalThis.PerformanceEventTiming||!("interactionId"in PerformanceEventTiming.prototype))return;const r=tn();rn((()=>{gy();let n,i=et("INP");const o=Ni(e,vy),s=u=>{Bu((()=>{for(const l of u)o.h(l);const c=o.L();c&&c.P!==i.value&&(i.value=c.P,i.entries=c.entries,n())}))},a=ar("event",s,{durationThreshold:e.durationThreshold??40});n=Qe(t,i,zu,e.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),r.onHidden((()=>{s(a.takeRecords()),n(!0)})),$t((()=>{o.v(),i=et("INP"),n=Qe(t,i,zu,e.reportAllChanges)})))}))};class yy{m;h(e){this.m?.(e)}}const ju=[2500,4e3],_y=(t,e={})=>{rn((()=>{const r=tn();let n,i=et("LCP");const o=Ni(e,yy),s=u=>{e.reportAllChanges||(u=u.slice(-1));for(const c of u)o.h(c),c.startTime<r.firstHiddenTime&&(i.value=Math.max(c.startTime-sr(),0),i.entries=[c],n())},a=ar("largest-contentful-paint",s);if(a){n=Qe(t,i,ju,e.reportAllChanges);const u=Mi((()=>{s(a.takeRecords()),a.disconnect(),n(!0)})),c=l=>{l.isTrusted&&(Bu(u),removeEventListener(l.type,c,{capture:!0}))};for(const l of["keydown","click","visibilitychange"])addEventListener(l,c,{capture:!0});$t((l=>{i=et("LCP"),n=Qe(t,i,ju,e.reportAllChanges),Oi((()=>{i.value=performance.now()-l.timeStamp,n(!0)}))}))}}))},$u=[800,1800],zi=t=>{document.prerendering?rn((()=>zi(t))):document.readyState!=="complete"?addEventListener("load",(()=>zi(t)),!0):setTimeout(t)},by=(t,e={})=>{let r=et("TTFB"),n=Qe(t,r,$u,e.reportAllChanges);zi((()=>{const i=Di();i&&(r.value=Math.max(i.responseStart-sr(),0),r.entries=[i],n(!0),$t((()=>{r=et("TTFB",0),n=Qe(t,r,$u,e.reportAllChanges),n(!0)})))}))};function Ey(t){var e,r=((e=t.entries[0])===null||e===void 0?void 0:e.startTime)||0;return performance.timeOrigin+r}function ur(t){return{value:t.value,rating:t.rating,delta:t.delta,navigationType:t.navigationType,id:t.id,timestamp:Math.floor(Ey(t)),navigationStart:Math.floor(performance.timeOrigin)}}var wy=function(){var t=null,e=Ie(),r=e?.document,n=e?.location,i=function(a,u){return G(void 0,void 0,void 0,function(){var c,l,d;return H(this,function(h){return c=function(f){var p;if(!f)return"";var g=f;try{g=decodeURI(f)}catch(m){(p=a.loggerProvider)===null||p===void 0||p.error("Malformed URI sequence: ",m)}return g},r===void 0?[2]:(l=c(n?.href),d={"[Amplitude] Page Domain":n?.hostname||"","[Amplitude] Page Location":l,"[Amplitude] Page Path":c(n?.pathname),"[Amplitude] Page Title":typeof document<"u"&&document.title||"","[Amplitude] Page URL":l.split("?")[0]},_y(function(f){d["[Amplitude] LCP"]=ur(f)}),Lu(function(f){d["[Amplitude] FCP"]=ur(f)}),my(function(f){d["[Amplitude] INP"]=ur(f)}),hy(function(f){d["[Amplitude] CLS"]=ur(f)}),by(function(f){d["[Amplitude] TTFB"]=ur(f)}),t=function(){r.visibilityState==="hidden"&&t&&(u.track(dy,d),r.removeEventListener("visibilitychange",t),t=null)},r.addEventListener("visibilitychange",t),[2])})})},o=function(a){return G(void 0,void 0,void 0,function(){return H(this,function(u){return[2,a]})})},s=function(){return G(void 0,void 0,void 0,function(){return H(this,function(a){return t&&r?.removeEventListener("visibilitychange",t),[2]})})};return{name:ly,type:"enrichment",setup:i,execute:o,teardown:s}},qu=function(t){var e=t.split(".");return e.length<=2?t:e.slice(e.length-2,e.length).join(".")},Sy=function(t){return Object.values(t).every(function(e){return!e})},Ty=function(t,e,r,n,i){i===void 0&&(i=!0),t.referrer;var o=t.referring_domain,s=ei(t,["referrer","referring_domain"]),a=e||{};a.referrer;var u=a.referring_domain,c=ei(a,["referrer","referring_domain"]);if(Ay(r.excludeReferrers,t.referring_domain))return n.debug("This is not a new campaign because ".concat(t.referring_domain," is in the exclude referrer list.")),!1;if(!i&&Sy(t)&&e)return n.debug("This is not a new campaign because this is a direct traffic in the same session."),!1;var l=JSON.stringify(s)!==JSON.stringify(c),d=qu(o||"")!==qu(u||""),h=!e||l||d;return h?n.debug("This is a new campaign. An $identify event will be sent."):n.debug("This is not a new campaign because it's the same as the previous one."),h},Ay=function(t,e){return t===void 0&&(t=[]),e===void 0&&(e=""),t.some(function(r){return r instanceof RegExp?r.test(e):r===e})},ky=function(t,e){var r=Z(Z({},ti),t),n=Object.entries(r).reduce(function(i,o){var s,a=ne(o,2),u=a[0],c=a[1];return i.setOnce("initial_".concat(u),(s=c??e.initialEmptyValue)!==null&&s!==void 0?s:"EMPTY"),c?i.set(u,c):i.unset(u)},new Ur);return Ms(n)},xy=function(t){var e=t;return e?(e.startsWith(".")&&(e=e.substring(1)),[new RegExp("".concat(e.replace(".","\\."),"$"))]):[]},Iy=(function(){function t(e,r){var n;this.shouldTrackNewCampaign=!1,this.options=Z({initialEmptyValue:"EMPTY",resetSessionOnNewCampaign:!1,excludeReferrers:xy((n=r.cookieOptions)===null||n===void 0?void 0:n.domain)},e),this.storage=r.cookieStorage,this.storageKey=qs(r.apiKey,"MKTG"),this.webExpStorageKey=qs(r.apiKey,"MKTG_ORIGINAL"),this.currentCampaign=ti,this.sessionTimeout=r.sessionTimeout,this.lastEventTime=r.lastEventTime,this.logger=r.loggerProvider,r.loggerProvider.log("Installing web attribution tracking.")}return t.prototype.init=function(){return G(this,void 0,void 0,function(){var e,r;return H(this,function(n){switch(n.label){case 0:return[4,this.fetchCampaign()];case 1:return r=ne.apply(void 0,[n.sent(),2]),this.currentCampaign=r[0],this.previousCampaign=r[1],e=this.lastEventTime?zs(this.sessionTimeout,this.lastEventTime):!0,Ty(this.currentCampaign,this.previousCampaign,this.options,this.logger,e)?(this.shouldTrackNewCampaign=!0,[4,this.storage.set(this.storageKey,this.currentCampaign)]):[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}})})},t.prototype.fetchCampaign=function(){return G(this,void 0,void 0,function(){var e;return H(this,function(r){switch(r.label){case 0:return[4,this.storage.get(this.webExpStorageKey)];case 1:return e=r.sent(),e?[4,this.storage.remove(this.webExpStorageKey)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[4,Promise.all([e||new qp().parse(),this.storage.get(this.storageKey)])];case 4:return[2,r.sent()]}})})},t.prototype.generateCampaignEvent=function(e){this.shouldTrackNewCampaign=!1;var r=ky(this.currentCampaign,this.options);return e&&(r.event_id=e),r},t.prototype.shouldSetSessionIdOnNewCampaign=function(){return this.shouldTrackNewCampaign&&!!this.options.resetSessionOnNewCampaign},t})(),Cy=(function(t){Me(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.init=function(r,n,i){r===void 0&&(r="");var o,s;return arguments.length>2?(o=n,s=i):typeof n=="string"?(o=n,s=void 0):(o=n?.userId,s=n),Ue(this._init(Z(Z({},s),{userId:o,apiKey:r})))},e.prototype._init=function(r){var n,i,o;return G(this,void 0,void 0,function(){var s,a,u,c,l,d,h,f=this;return H(this,function(p){switch(p.label){case 0:return this.initializing?[2]:(this.initializing=!0,[4,vg(r.apiKey,r,this)]);case 1:return s=p.sent(),s.fetchRemoteConfig?(this.remoteConfigClient=new Jh(s.apiKey,s.loggerProvider,s.serverZone),[4,new Promise(function(g){var m;(m=f.remoteConfigClient)===null||m===void 0||m.subscribe("configs.analyticsSDK.browserSDK","all",function(v,b,E){s.loggerProvider.debug("Remote configuration received:",JSON.stringify({remoteConfig:v,source:b,lastFetch:E},null,2)),v&&Mg(v,s),g()})})]):[3,3];case 2:p.sent(),p.label=3;case 3:return[4,t.prototype._init.call(this,s)];case 4:return p.sent(),this.logBrowserOptions(s),ea(this.config.defaultTracking)?(a=Xp(this.config),this.webAttribution=new Iy(a,this.config),[4,this.webAttribution.init()]):[3,6];case 5:p.sent(),p.label=6;case 6:return u=qr(),c=u.ampTimestamp?Number(u.ampTimestamp):void 0,l=c?Date.now()<c:!0,d=l&&!Number.isNaN(Number(u.ampSessionId))?Number(u.ampSessionId):void 0,this.setSessionId((o=(i=(n=r.sessionId)!==null&&n!==void 0?n:d)!==null&&i!==void 0?i:this.config.sessionId)!==null&&o!==void 0?o:Date.now()),h=Xt(r.instanceName),h.identityStore.setIdentity({userId:this.config.userId,deviceId:this.config.deviceId}),this.config.offline===Tp?[3,8]:[4,this.add(Ng()).promise];case 7:p.sent(),p.label=8;case 8:return[4,this.add(new op).promise];case 9:return p.sent(),[4,this.add(new tg).promise];case 10:return p.sent(),[4,this.add(new vp).promise];case 11:return p.sent(),Lg(this.config),Wp(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding file download tracking plugin"),[4,this.add(Dg()).promise]):[3,13];case 12:p.sent(),p.label=13;case 13:return Hp(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding form interaction plugin"),[4,this.add(Og()).promise]):[3,15];case 14:p.sent(),p.label=15;case 15:return ta(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding page view tracking plugin"),[4,this.add(Ig(Zp(this.config))).promise]):[3,17];case 16:p.sent(),p.label=17;case 17:return ia(this.config.autocapture)?(this.config.loggerProvider.debug("Adding user interactions plugin (autocapture plugin)"),[4,this.add(Xm(Vp(this.config))).promise]):[3,19];case 18:p.sent(),p.label=19;case 19:return oa(this.config.autocapture)?(this.config.loggerProvider.debug("Adding frustration interactions plugin"),[4,this.add(ry(Kp(this.config))).promise]):[3,21];case 20:p.sent(),p.label=21;case 21:return na(this.config.autocapture)?(this.config.loggerProvider.debug("Adding network tracking plugin"),[4,this.add(cy(Yp(this.config))).promise]):[3,23];case 22:p.sent(),p.label=23;case 23:return Gp(this.config.autocapture)?(this.config.loggerProvider.debug("Adding web vitals plugin"),[4,this.add(wy()).promise]):[3,25];case 24:p.sent(),p.label=25;case 25:return this.initializing=!1,[4,this.runQueuedFunctions("dispatchQ")];case 26:return p.sent(),h.eventBridge.setEventReceiver(function(g){f.track(g.eventType,g.eventProperties)}),[2]}})})},e.prototype.getUserId=function(){var r;return(r=this.config)===null||r===void 0?void 0:r.userId},e.prototype.setUserId=function(r){if(!this.config){this.q.push(this.setUserId.bind(this,r));return}this.config.loggerProvider.debug("function setUserId: ",r),(r!==this.config.userId||r===void 0)&&(this.config.userId=r,this.timeline.onIdentityChanged({userId:r}),pp(r,this.config.instanceName))},e.prototype.getDeviceId=function(){var r;return(r=this.config)===null||r===void 0?void 0:r.deviceId},e.prototype.setDeviceId=function(r){if(!this.config){this.q.push(this.setDeviceId.bind(this,r));return}this.config.loggerProvider.debug("function setDeviceId: ",r),r!==this.config.deviceId&&(this.config.deviceId=r,this.timeline.onIdentityChanged({deviceId:r}),gp(r,this.config.instanceName))},e.prototype.reset=function(){this.setDeviceId(pt()),this.setUserId(void 0)},e.prototype.getIdentity=function(){var r,n;return{deviceId:(r=this.config)===null||r===void 0?void 0:r.deviceId,userId:(n=this.config)===null||n===void 0?void 0:n.userId,userProperties:this.userProperties}},e.prototype.getOptOut=function(){var r;return(r=this.config)===null||r===void 0?void 0:r.optOut},e.prototype.getSessionId=function(){var r;return(r=this.config)===null||r===void 0?void 0:r.sessionId},e.prototype.setSessionId=function(r){var n,i=[];if(!this.config)return this.q.push(this.setSessionId.bind(this,r)),Ue(Promise.resolve());if(r===this.config.sessionId)return Ue(Promise.resolve());this.config.loggerProvider.debug("function setSessionId: ",r);var o=this.getSessionId();o!==r&&this.timeline.onSessionIdChanged(r);var s=this.config.lastEventTime,a=(n=this.config.lastEventId)!==null&&n!==void 0?n:-1;this.config.sessionId=r,this.config.lastEventTime=void 0,this.config.pageCounter=0,ra(this.config.defaultTracking)&&(o&&s&&i.push(this.track(la,void 0,{device_id:this.previousSessionDeviceId,event_id:++a,session_id:o,time:s+1,user_id:this.previousSessionUserId}).promise),this.config.lastEventTime=this.config.sessionId);var u=this.trackCampaignEventIfNeeded(++a,i);return ra(this.config.defaultTracking)&&i.push(this.track(ca,void 0,{event_id:u?++a:a,session_id:this.config.sessionId,time:this.config.lastEventTime}).promise),this.previousSessionDeviceId=this.config.deviceId,this.previousSessionUserId=this.config.userId,Ue(Promise.all(i))},e.prototype.extendSession=function(){if(!this.config){this.q.push(this.extendSession.bind(this));return}this.config.lastEventTime=Date.now()},e.prototype.setTransport=function(r){if(!this.config){this.q.push(this.setTransport.bind(this,r));return}this.config.transportProvider=da(r)},e.prototype.identify=function(r,n){if(di(r)){var i=r._q;r._q=[],r=li(new Ur,i)}return n?.user_id&&this.setUserId(n.user_id),n?.device_id&&this.setDeviceId(n.device_id),t.prototype.identify.call(this,r,n)},e.prototype.groupIdentify=function(r,n,i,o){if(di(i)){var s=i._q;i._q=[],i=li(new Ur,s)}return t.prototype.groupIdentify.call(this,r,n,i,o)},e.prototype.revenue=function(r,n){if(di(r)){var i=r._q;r._q=[],r=li(new Qh,i)}return t.prototype.revenue.call(this,r,n)},e.prototype.trackCampaignEventIfNeeded=function(r,n){if(!this.webAttribution||!this.webAttribution.shouldTrackNewCampaign)return!1;var i=this.webAttribution.generateCampaignEvent(r);return n?n.push(this.track(i).promise):this.track(i),this.config.loggerProvider.log("Tracking attribution."),!0},e.prototype.process=function(r){return G(this,void 0,void 0,function(){var n,i,o;return H(this,function(s){return n=Date.now(),i=zs(this.config.sessionTimeout,this.config.lastEventTime),o=this.webAttribution&&this.webAttribution.shouldSetSessionIdOnNewCampaign(),r.event_type!==ca&&r.event_type!==la&&(!r.session_id||r.session_id===this.getSessionId())&&(i||o?(this.setSessionId(n),o&&this.config.loggerProvider.log("Created a new session for new campaign.")):i||this.trackCampaignEventIfNeeded()),r.event_type===ht.IDENTIFY&&r.user_properties&&(this.userProperties=this.getOperationAppliedUserProperties(r.user_properties)),[2,t.prototype.process.call(this,r)]})})},e.prototype.logBrowserOptions=function(r){try{var n=Z(Z({},r),{apiKey:r.apiKey.substring(0,10)+"********"});this.config.loggerProvider.debug("Initialized Amplitude with BrowserConfig:",JSON.stringify(n))}catch(i){this.config.loggerProvider.error("Error logging browser config",i)}},e})(Gh),Ry=function(){var t=new Cy;return{init:be(t.init.bind(t),"init",ye(t),_e(t,["config"])),add:be(t.add.bind(t),"add",ye(t),_e(t,["config.apiKey","timeline.plugins"])),remove:be(t.remove.bind(t),"remove",ye(t),_e(t,["config.apiKey","timeline.plugins"])),track:be(t.track.bind(t),"track",ye(t),_e(t,["config.apiKey","timeline.queue.length"])),logEvent:be(t.logEvent.bind(t),"logEvent",ye(t),_e(t,["config.apiKey","timeline.queue.length"])),identify:be(t.identify.bind(t),"identify",ye(t),_e(t,["config.apiKey","timeline.queue.length"])),groupIdentify:be(t.groupIdentify.bind(t),"groupIdentify",ye(t),_e(t,["config.apiKey","timeline.queue.length"])),setGroup:be(t.setGroup.bind(t),"setGroup",ye(t),_e(t,["config.apiKey","timeline.queue.length"])),revenue:be(t.revenue.bind(t),"revenue",ye(t),_e(t,["config.apiKey","timeline.queue.length"])),flush:be(t.flush.bind(t),"flush",ye(t),_e(t,["config.apiKey","timeline.queue.length"])),getUserId:be(t.getUserId.bind(t),"getUserId",ye(t),_e(t,["config","config.userId"])),setUserId:be(t.setUserId.bind(t),"setUserId",ye(t),_e(t,["config","config.userId"])),getDeviceId:be(t.getDeviceId.bind(t),"getDeviceId",ye(t),_e(t,["config","config.deviceId"])),setDeviceId:be(t.setDeviceId.bind(t),"setDeviceId",ye(t),_e(t,["config","config.deviceId"])),reset:be(t.reset.bind(t),"reset",ye(t),_e(t,["config","config.userId","config.deviceId"])),getSessionId:be(t.getSessionId.bind(t),"getSessionId",ye(t),_e(t,["config"])),setSessionId:be(t.setSessionId.bind(t),"setSessionId",ye(t),_e(t,["config"])),extendSession:be(t.extendSession.bind(t),"extendSession",ye(t),_e(t,["config"])),setOptOut:be(t.setOptOut.bind(t),"setOptOut",ye(t),_e(t,["config"])),setTransport:be(t.setTransport.bind(t),"setTransport",ye(t),_e(t,["config"])),getIdentity:be(t.getIdentity.bind(t),"getIdentity",ye(t),_e(t,["config"])),getOptOut:be(t.getOptOut.bind(t),"getOptOut",ye(t),_e(t,["config"]))}};const ji=Ry();var Py=ji.init,Oy=ji.setSessionId,Dy=ji.track;async function $i(t,e){await Ny(),t==="DownloadStarted"&&Oy(Date.now()),Dy(t,e)}let Wu=!1,Ly="7bdd84339e3b903b85daf6ac016e1f6f";async function Ny(){const t=Ly;if(!Wu){Wu=!0;const e=await Fy(),r=await By();Py(t,e,{autocapture:!1,identityStorage:"localStorage",deviceId:r,appVersion:My()}),await Uy(200)}}function My(){return chrome?chrome.runtime?chrome.runtime.getManifest().version:"NO_VER_RUNTIME":"NO_VER_CHROME"}async function Uy(t){return new Promise(e=>setTimeout(e,t))}async function Fy(){let e=(await chrome.storage.sync.get("clientId")).clientId;return e||(e=self.crypto.randomUUID(),await chrome.storage.sync.set({clientId:e})),e}async function By(){let e=(await chrome.storage.local.get("deviceId")).deviceId;return e||(e=self.crypto.randomUUID(),await chrome.storage.local.set({deviceId:e})),e}function on(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var qi={exports:{}};/*!

  JSZip v3.10.1 - A JavaScript class for generating and reading zip files
  <http://stuartk.com/jszip>

  (c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
  Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

  JSZip uses the library pako released under the MIT license :
  https://github.com/nodeca/pako/blob/main/LICENSE
  */var Hu;function zy(){return Hu||(Hu=1,(function(t,e){(function(r){t.exports=r()})(function(){return(function r(n,i,o){function s(c,l){if(!i[c]){if(!n[c]){var d=typeof on=="function"&&on;if(!l&&d)return d(c,!0);if(a)return a(c,!0);var h=new Error("Cannot find module '"+c+"'");throw h.code="MODULE_NOT_FOUND",h}var f=i[c]={exports:{}};n[c][0].call(f.exports,function(p){var g=n[c][1][p];return s(g||p)},f,f.exports,r,n,i,o)}return i[c].exports}for(var a=typeof on=="function"&&on,u=0;u<o.length;u++)s(o[u]);return s})({1:[function(r,n,i){var o=r("./utils"),s=r("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(u){for(var c,l,d,h,f,p,g,m=[],v=0,b=u.length,E=b,S=o.getTypeOf(u)!=="string";v<u.length;)E=b-v,d=S?(c=u[v++],l=v<b?u[v++]:0,v<b?u[v++]:0):(c=u.charCodeAt(v++),l=v<b?u.charCodeAt(v++):0,v<b?u.charCodeAt(v++):0),h=c>>2,f=(3&c)<<4|l>>4,p=1<E?(15&l)<<2|d>>6:64,g=2<E?63&d:64,m.push(a.charAt(h)+a.charAt(f)+a.charAt(p)+a.charAt(g));return m.join("")},i.decode=function(u){var c,l,d,h,f,p,g=0,m=0,v="data:";if(u.substr(0,v.length)===v)throw new Error("Invalid base64 input, it looks like a data url.");var b,E=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===a.charAt(64)&&E--,u.charAt(u.length-2)===a.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(b=s.uint8array?new Uint8Array(0|E):new Array(0|E);g<u.length;)c=a.indexOf(u.charAt(g++))<<2|(h=a.indexOf(u.charAt(g++)))>>4,l=(15&h)<<4|(f=a.indexOf(u.charAt(g++)))>>2,d=(3&f)<<6|(p=a.indexOf(u.charAt(g++))),b[m++]=c,f!==64&&(b[m++]=l),p!==64&&(b[m++]=d);return b}},{"./support":30,"./utils":32}],2:[function(r,n,i){var o=r("./external"),s=r("./stream/DataWorker"),a=r("./stream/Crc32Probe"),u=r("./stream/DataLengthProbe");function c(l,d,h,f,p){this.compressedSize=l,this.uncompressedSize=d,this.crc32=h,this.compression=f,this.compressedContent=p}c.prototype={getContentWorker:function(){var l=new s(o.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),d=this;return l.on("end",function(){if(this.streamInfo.data_length!==d.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),l},getCompressedWorker:function(){return new s(o.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(l,d,h){return l.pipe(new a).pipe(new u("uncompressedSize")).pipe(d.compressWorker(h)).pipe(new u("compressedSize")).withStreamInfo("compression",d)},n.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,n,i){var o=r("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new o("STORE compression")},uncompressWorker:function(){return new o("STORE decompression")}},i.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,n,i){var o=r("./utils"),s=(function(){for(var a,u=[],c=0;c<256;c++){a=c;for(var l=0;l<8;l++)a=1&a?3988292384^a>>>1:a>>>1;u[c]=a}return u})();n.exports=function(a,u){return a!==void 0&&a.length?o.getTypeOf(a)!=="string"?(function(c,l,d,h){var f=s,p=h+d;c^=-1;for(var g=h;g<p;g++)c=c>>>8^f[255&(c^l[g])];return-1^c})(0|u,a,a.length,0):(function(c,l,d,h){var f=s,p=h+d;c^=-1;for(var g=h;g<p;g++)c=c>>>8^f[255&(c^l.charCodeAt(g))];return-1^c})(0|u,a,a.length,0):0}},{"./utils":32}],5:[function(r,n,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(r,n,i){var o=null;o=typeof Promise<"u"?Promise:r("lie"),n.exports={Promise:o}},{lie:37}],7:[function(r,n,i){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",s=r("pako"),a=r("./utils"),u=r("./stream/GenericWorker"),c=o?"uint8array":"array";function l(d,h){u.call(this,"FlateWorker/"+d),this._pako=null,this._pakoAction=d,this._pakoOptions=h,this.meta={}}i.magic="\b\0",a.inherits(l,u),l.prototype.processChunk=function(d){this.meta=d.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(c,d.data),!1)},l.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new s[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var d=this;this._pako.onData=function(h){d.push({data:h,meta:d.meta})}},i.compressWorker=function(d){return new l("Deflate",d)},i.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,n,i){function o(f,p){var g,m="";for(g=0;g<p;g++)m+=String.fromCharCode(255&f),f>>>=8;return m}function s(f,p,g,m,v,b){var E,S,T=f.file,x=f.compression,C=b!==c.utf8encode,P=a.transformTo("string",b(T.name)),I=a.transformTo("string",c.utf8encode(T.name)),M=T.comment,j=a.transformTo("string",b(M)),A=a.transformTo("string",c.utf8encode(M)),D=I.length!==T.name.length,_=A.length!==M.length,U="",ee="",z="",te=T.dir,q=T.date,re={crc32:0,compressedSize:0,uncompressedSize:0};p&&!g||(re.crc32=f.crc32,re.compressedSize=f.compressedSize,re.uncompressedSize=f.uncompressedSize);var R=0;p&&(R|=8),C||!D&&!_||(R|=2048);var L=0,J=0;te&&(L|=16),v==="UNIX"?(J=798,L|=(function(K,fe){var Te=K;return K||(Te=fe?16893:33204),(65535&Te)<<16})(T.unixPermissions,te)):(J=20,L|=(function(K){return 63&(K||0)})(T.dosPermissions)),E=q.getUTCHours(),E<<=6,E|=q.getUTCMinutes(),E<<=5,E|=q.getUTCSeconds()/2,S=q.getUTCFullYear()-1980,S<<=4,S|=q.getUTCMonth()+1,S<<=5,S|=q.getUTCDate(),D&&(ee=o(1,1)+o(l(P),4)+I,U+="up"+o(ee.length,2)+ee),_&&(z=o(1,1)+o(l(j),4)+A,U+="uc"+o(z.length,2)+z);var X="";return X+=`
\0`,X+=o(R,2),X+=x.magic,X+=o(E,2),X+=o(S,2),X+=o(re.crc32,4),X+=o(re.compressedSize,4),X+=o(re.uncompressedSize,4),X+=o(P.length,2),X+=o(U.length,2),{fileRecord:d.LOCAL_FILE_HEADER+X+P+U,dirRecord:d.CENTRAL_FILE_HEADER+o(J,2)+X+o(j.length,2)+"\0\0\0\0"+o(L,4)+o(m,4)+P+U+j}}var a=r("../utils"),u=r("../stream/GenericWorker"),c=r("../utf8"),l=r("../crc32"),d=r("../signature");function h(f,p,g,m){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=g,this.encodeFileName=m,this.streamFiles=f,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(h,u),h.prototype.push=function(f){var p=f.meta.percent||0,g=this.entriesCount,m=this._sources.length;this.accumulate?this.contentBuffer.push(f):(this.bytesWritten+=f.data.length,u.prototype.push.call(this,{data:f.data,meta:{currentFile:this.currentFile,percent:g?(p+100*(g-m-1))/g:100}}))},h.prototype.openedSource=function(f){this.currentSourceOffset=this.bytesWritten,this.currentFile=f.file.name;var p=this.streamFiles&&!f.file.dir;if(p){var g=s(f,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(f){this.accumulate=!1;var p=this.streamFiles&&!f.file.dir,g=s(f,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),p)this.push({data:(function(m){return d.DATA_DESCRIPTOR+o(m.crc32,4)+o(m.compressedSize,4)+o(m.uncompressedSize,4)})(f),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var f=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var g=this.bytesWritten-f,m=(function(v,b,E,S,T){var x=a.transformTo("string",T(S));return d.CENTRAL_DIRECTORY_END+"\0\0\0\0"+o(v,2)+o(v,2)+o(b,4)+o(E,4)+o(x.length,2)+x})(this.dirRecords.length,g,f,this.zipComment,this.encodeFileName);this.push({data:m,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(f){this._sources.push(f);var p=this;return f.on("data",function(g){p.processChunk(g)}),f.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),f.on("error",function(g){p.error(g)}),this},h.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(f){var p=this._sources;if(!u.prototype.error.call(this,f))return!1;for(var g=0;g<p.length;g++)try{p[g].error(f)}catch{}return!0},h.prototype.lock=function(){u.prototype.lock.call(this);for(var f=this._sources,p=0;p<f.length;p++)f[p].lock()},n.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,n,i){var o=r("../compressions"),s=r("./ZipFileWorker");i.generateWorker=function(a,u,c){var l=new s(u.streamFiles,c,u.platform,u.encodeFileName),d=0;try{a.forEach(function(h,f){d++;var p=(function(b,E){var S=b||E,T=o[S];if(!T)throw new Error(S+" is not a valid compression method !");return T})(f.options.compression,u.compression),g=f.options.compressionOptions||u.compressionOptions||{},m=f.dir,v=f.date;f._compressWorker(p,g).withStreamInfo("file",{name:h,dir:m,date:v,comment:f.comment||"",unixPermissions:f.unixPermissions,dosPermissions:f.dosPermissions}).pipe(l)}),l.entriesCount=d}catch(h){l.error(h)}return l}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,n,i){function o(){if(!(this instanceof o))return new o;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var s=new o;for(var a in this)typeof this[a]!="function"&&(s[a]=this[a]);return s}}(o.prototype=r("./object")).loadAsync=r("./load"),o.support=r("./support"),o.defaults=r("./defaults"),o.version="3.10.1",o.loadAsync=function(s,a){return new o().loadAsync(s,a)},o.external=r("./external"),n.exports=o},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,n,i){var o=r("./utils"),s=r("./external"),a=r("./utf8"),u=r("./zipEntries"),c=r("./stream/Crc32Probe"),l=r("./nodejsUtils");function d(h){return new s.Promise(function(f,p){var g=h.decompressed.getContentWorker().pipe(new c);g.on("error",function(m){p(m)}).on("end",function(){g.streamInfo.crc32!==h.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):f()}).resume()})}n.exports=function(h,f){var p=this;return f=o.extend(f||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),l.isNode&&l.isStream(h)?s.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):o.prepareContent("the loaded zip file",h,!0,f.optimizedBinaryString,f.base64).then(function(g){var m=new u(f);return m.load(g),m}).then(function(g){var m=[s.Promise.resolve(g)],v=g.files;if(f.checkCRC32)for(var b=0;b<v.length;b++)m.push(d(v[b]));return s.Promise.all(m)}).then(function(g){for(var m=g.shift(),v=m.files,b=0;b<v.length;b++){var E=v[b],S=E.fileNameStr,T=o.resolve(E.fileNameStr);p.file(T,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:f.createFolders}),E.dir||(p.file(T).unsafeOriginalName=S)}return m.zipComment.length&&(p.comment=m.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,n,i){var o=r("../utils"),s=r("../stream/GenericWorker");function a(u,c){s.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(c)}o.inherits(a,s),a.prototype._bindStream=function(u){var c=this;(this._stream=u).pause(),u.on("data",function(l){c.push({data:l,meta:{percent:0}})}).on("error",function(l){c.isPaused?this.generatedError=l:c.error(l)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},a.prototype.pause=function(){return!!s.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,n,i){var o=r("readable-stream").Readable;function s(a,u,c){o.call(this,u),this._helper=a;var l=this;a.on("data",function(d,h){l.push(d)||l._helper.pause(),c&&c(h)}).on("error",function(d){l.emit("error",d)}).on("end",function(){l.push(null)})}r("../utils").inherits(s,o),s.prototype._read=function(){this._helper.resume()},n.exports=s},{"../utils":32,"readable-stream":16}],14:[function(r,n,i){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(o,s){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(o,s);if(typeof o=="number")throw new Error('The "data" argument must not be a number');return new Buffer(o,s)},allocBuffer:function(o){if(Buffer.alloc)return Buffer.alloc(o);var s=new Buffer(o);return s.fill(0),s},isBuffer:function(o){return Buffer.isBuffer(o)},isStream:function(o){return o&&typeof o.on=="function"&&typeof o.pause=="function"&&typeof o.resume=="function"}}},{}],15:[function(r,n,i){function o(T,x,C){var P,I=a.getTypeOf(x),M=a.extend(C||{},l);M.date=M.date||new Date,M.compression!==null&&(M.compression=M.compression.toUpperCase()),typeof M.unixPermissions=="string"&&(M.unixPermissions=parseInt(M.unixPermissions,8)),M.unixPermissions&&16384&M.unixPermissions&&(M.dir=!0),M.dosPermissions&&16&M.dosPermissions&&(M.dir=!0),M.dir&&(T=v(T)),M.createFolders&&(P=m(T))&&b.call(this,P,!0);var j=I==="string"&&M.binary===!1&&M.base64===!1;C&&C.binary!==void 0||(M.binary=!j),(x instanceof d&&x.uncompressedSize===0||M.dir||!x||x.length===0)&&(M.base64=!1,M.binary=!0,x="",M.compression="STORE",I="string");var A=null;A=x instanceof d||x instanceof u?x:p.isNode&&p.isStream(x)?new g(T,x):a.prepareContent(T,x,M.binary,M.optimizedBinaryString,M.base64);var D=new h(T,A,M);this.files[T]=D}var s=r("./utf8"),a=r("./utils"),u=r("./stream/GenericWorker"),c=r("./stream/StreamHelper"),l=r("./defaults"),d=r("./compressedObject"),h=r("./zipObject"),f=r("./generate"),p=r("./nodejsUtils"),g=r("./nodejs/NodejsStreamInputAdapter"),m=function(T){T.slice(-1)==="/"&&(T=T.substring(0,T.length-1));var x=T.lastIndexOf("/");return 0<x?T.substring(0,x):""},v=function(T){return T.slice(-1)!=="/"&&(T+="/"),T},b=function(T,x){return x=x!==void 0?x:l.createFolders,T=v(T),this.files[T]||o.call(this,T,null,{dir:!0,createFolders:x}),this.files[T]};function E(T){return Object.prototype.toString.call(T)==="[object RegExp]"}var S={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(T){var x,C,P;for(x in this.files)P=this.files[x],(C=x.slice(this.root.length,x.length))&&x.slice(0,this.root.length)===this.root&&T(C,P)},filter:function(T){var x=[];return this.forEach(function(C,P){T(C,P)&&x.push(P)}),x},file:function(T,x,C){if(arguments.length!==1)return T=this.root+T,o.call(this,T,x,C),this;if(E(T)){var P=T;return this.filter(function(M,j){return!j.dir&&P.test(M)})}var I=this.files[this.root+T];return I&&!I.dir?I:null},folder:function(T){if(!T)return this;if(E(T))return this.filter(function(I,M){return M.dir&&T.test(I)});var x=this.root+T,C=b.call(this,x),P=this.clone();return P.root=C.name,P},remove:function(T){T=this.root+T;var x=this.files[T];if(x||(T.slice(-1)!=="/"&&(T+="/"),x=this.files[T]),x&&!x.dir)delete this.files[T];else for(var C=this.filter(function(I,M){return M.name.slice(0,T.length)===T}),P=0;P<C.length;P++)delete this.files[C[P].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(T){var x,C={};try{if((C=a.extend(T||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode})).type=C.type.toLowerCase(),C.compression=C.compression.toUpperCase(),C.type==="binarystring"&&(C.type="string"),!C.type)throw new Error("No output type specified.");a.checkSupport(C.type),C.platform!=="darwin"&&C.platform!=="freebsd"&&C.platform!=="linux"&&C.platform!=="sunos"||(C.platform="UNIX"),C.platform==="win32"&&(C.platform="DOS");var P=C.comment||this.comment||"";x=f.generateWorker(this,C,P)}catch(I){(x=new u("error")).error(I)}return new c(x,C.type||"string",C.mimeType)},generateAsync:function(T,x){return this.generateInternalStream(T).accumulate(x)},generateNodeStream:function(T,x){return(T=T||{}).type||(T.type="nodebuffer"),this.generateInternalStream(T).toNodejsStream(x)}};n.exports=S},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,n,i){n.exports=r("stream")},{stream:void 0}],17:[function(r,n,i){var o=r("./DataReader");function s(a){o.call(this,a);for(var u=0;u<this.data.length;u++)a[u]=255&a[u]}r("../utils").inherits(s,o),s.prototype.byteAt=function(a){return this.data[this.zero+a]},s.prototype.lastIndexOfSignature=function(a){for(var u=a.charCodeAt(0),c=a.charCodeAt(1),l=a.charCodeAt(2),d=a.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===u&&this.data[h+1]===c&&this.data[h+2]===l&&this.data[h+3]===d)return h-this.zero;return-1},s.prototype.readAndCheckSignature=function(a){var u=a.charCodeAt(0),c=a.charCodeAt(1),l=a.charCodeAt(2),d=a.charCodeAt(3),h=this.readData(4);return u===h[0]&&c===h[1]&&l===h[2]&&d===h[3]},s.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},n.exports=s},{"../utils":32,"./DataReader":18}],18:[function(r,n,i){var o=r("../utils");function s(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}s.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var u,c=0;for(this.checkOffset(a),u=this.index+a-1;u>=this.index;u--)c=(c<<8)+this.byteAt(u);return this.index+=a,c},readString:function(a){return o.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},n.exports=s},{"../utils":32}],19:[function(r,n,i){var o=r("./Uint8ArrayReader");function s(a){o.call(this,a)}r("../utils").inherits(s,o),s.prototype.readData=function(a){this.checkOffset(a);var u=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},n.exports=s},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,n,i){var o=r("./DataReader");function s(a){o.call(this,a)}r("../utils").inherits(s,o),s.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},s.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},s.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},s.prototype.readData=function(a){this.checkOffset(a);var u=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},n.exports=s},{"../utils":32,"./DataReader":18}],21:[function(r,n,i){var o=r("./ArrayReader");function s(a){o.call(this,a)}r("../utils").inherits(s,o),s.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},n.exports=s},{"../utils":32,"./ArrayReader":17}],22:[function(r,n,i){var o=r("../utils"),s=r("../support"),a=r("./ArrayReader"),u=r("./StringReader"),c=r("./NodeBufferReader"),l=r("./Uint8ArrayReader");n.exports=function(d){var h=o.getTypeOf(d);return o.checkSupport(h),h!=="string"||s.uint8array?h==="nodebuffer"?new c(d):s.uint8array?new l(o.transformTo("uint8array",d)):new a(o.transformTo("array",d)):new u(d)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,n,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,n,i){var o=r("./GenericWorker"),s=r("../utils");function a(u){o.call(this,"ConvertWorker to "+u),this.destType=u}s.inherits(a,o),a.prototype.processChunk=function(u){this.push({data:s.transformTo(this.destType,u.data),meta:u.meta})},n.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(r,n,i){var o=r("./GenericWorker"),s=r("../crc32");function a(){o.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(a,o),a.prototype.processChunk=function(u){this.streamInfo.crc32=s(u.data,this.streamInfo.crc32||0),this.push(u)},n.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,n,i){var o=r("../utils"),s=r("./GenericWorker");function a(u){s.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}o.inherits(a,s),a.prototype.processChunk=function(u){if(u){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+u.data.length}s.prototype.processChunk.call(this,u)},n.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(r,n,i){var o=r("../utils"),s=r("./GenericWorker");function a(u){s.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(l){c.dataIsReady=!0,c.data=l,c.max=l&&l.length||0,c.type=o.getTypeOf(l),c.isPaused||c._tickAndRepeat()},function(l){c.error(l)})}o.inherits(a,s),a.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,o.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(o.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,c);break;case"uint8array":u=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":u=this.data.slice(this.index,c)}return this.index=c,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(r,n,i){function o(s){this.name=s||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o.prototype={push:function(s){this.emit("data",s)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(s){this.emit("error",s)}return!0},error:function(s){return!this.isFinished&&(this.isPaused?this.generatedError=s:(this.isFinished=!0,this.emit("error",s),this.previous&&this.previous.error(s),this.cleanUp()),!0)},on:function(s,a){return this._listeners[s].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(s,a){if(this._listeners[s])for(var u=0;u<this._listeners[s].length;u++)this._listeners[s][u].call(this,a)},pipe:function(s){return s.registerPrevious(this)},registerPrevious:function(s){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=s.streamInfo,this.mergeStreamInfo(),this.previous=s;var a=this;return s.on("data",function(u){a.processChunk(u)}),s.on("end",function(){a.end()}),s.on("error",function(u){a.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var s=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),s=!0),this.previous&&this.previous.resume(),!s},flush:function(){},processChunk:function(s){this.push(s)},withStreamInfo:function(s,a){return this.extraStreamInfo[s]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var s in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,s)&&(this.streamInfo[s]=this.extraStreamInfo[s])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var s="Worker "+this.name;return this.previous?this.previous+" -> "+s:s}},n.exports=o},{}],29:[function(r,n,i){var o=r("../utils"),s=r("./ConvertWorker"),a=r("./GenericWorker"),u=r("../base64"),c=r("../support"),l=r("../external"),d=null;if(c.nodestream)try{d=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(p,g){return new l.Promise(function(m,v){var b=[],E=p._internalType,S=p._outputType,T=p._mimeType;p.on("data",function(x,C){b.push(x),g&&g(C)}).on("error",function(x){b=[],v(x)}).on("end",function(){try{var x=(function(C,P,I){switch(C){case"blob":return o.newBlob(o.transformTo("arraybuffer",P),I);case"base64":return u.encode(P);default:return o.transformTo(C,P)}})(S,(function(C,P){var I,M=0,j=null,A=0;for(I=0;I<P.length;I++)A+=P[I].length;switch(C){case"string":return P.join("");case"array":return Array.prototype.concat.apply([],P);case"uint8array":for(j=new Uint8Array(A),I=0;I<P.length;I++)j.set(P[I],M),M+=P[I].length;return j;case"nodebuffer":return Buffer.concat(P);default:throw new Error("concat : unsupported type '"+C+"'")}})(E,b),T);m(x)}catch(C){v(C)}b=[]}).resume()})}function f(p,g,m){var v=g;switch(g){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string"}try{this._internalType=v,this._outputType=g,this._mimeType=m,o.checkSupport(v),this._worker=p.pipe(new s(v)),p.lock()}catch(b){this._worker=new a("error"),this._worker.error(b)}}f.prototype={accumulate:function(p){return h(this,p)},on:function(p,g){var m=this;return p==="data"?this._worker.on(p,function(v){g.call(m,v.data,v.meta)}):this._worker.on(p,function(){o.delay(g,arguments,m)}),this},resume:function(){return o.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(o.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new d(this,{objectMode:this._outputType!=="nodebuffer"},p)}},n.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,n,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var o=new ArrayBuffer(0);try{i.blob=new Blob([o],{type:"application/zip"}).size===0}catch{try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);s.append(o),i.blob=s.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!r("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(r,n,i){for(var o=r("./utils"),s=r("./support"),a=r("./nodejsUtils"),u=r("./stream/GenericWorker"),c=new Array(256),l=0;l<256;l++)c[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;c[254]=c[254]=1;function d(){u.call(this,"utf-8 decode"),this.leftOver=null}function h(){u.call(this,"utf-8 encode")}i.utf8encode=function(f){return s.nodebuffer?a.newBufferFrom(f,"utf-8"):(function(p){var g,m,v,b,E,S=p.length,T=0;for(b=0;b<S;b++)(64512&(m=p.charCodeAt(b)))==55296&&b+1<S&&(64512&(v=p.charCodeAt(b+1)))==56320&&(m=65536+(m-55296<<10)+(v-56320),b++),T+=m<128?1:m<2048?2:m<65536?3:4;for(g=s.uint8array?new Uint8Array(T):new Array(T),b=E=0;E<T;b++)(64512&(m=p.charCodeAt(b)))==55296&&b+1<S&&(64512&(v=p.charCodeAt(b+1)))==56320&&(m=65536+(m-55296<<10)+(v-56320),b++),m<128?g[E++]=m:(m<2048?g[E++]=192|m>>>6:(m<65536?g[E++]=224|m>>>12:(g[E++]=240|m>>>18,g[E++]=128|m>>>12&63),g[E++]=128|m>>>6&63),g[E++]=128|63&m);return g})(f)},i.utf8decode=function(f){return s.nodebuffer?o.transformTo("nodebuffer",f).toString("utf-8"):(function(p){var g,m,v,b,E=p.length,S=new Array(2*E);for(g=m=0;g<E;)if((v=p[g++])<128)S[m++]=v;else if(4<(b=c[v]))S[m++]=65533,g+=b-1;else{for(v&=b===2?31:b===3?15:7;1<b&&g<E;)v=v<<6|63&p[g++],b--;1<b?S[m++]=65533:v<65536?S[m++]=v:(v-=65536,S[m++]=55296|v>>10&1023,S[m++]=56320|1023&v)}return S.length!==m&&(S.subarray?S=S.subarray(0,m):S.length=m),o.applyFromCharCode(S)})(f=o.transformTo(s.uint8array?"uint8array":"array",f))},o.inherits(d,u),d.prototype.processChunk=function(f){var p=o.transformTo(s.uint8array?"uint8array":"array",f.data);if(this.leftOver&&this.leftOver.length){if(s.uint8array){var g=p;(p=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),p.set(g,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var m=(function(b,E){var S;for((E=E||b.length)>b.length&&(E=b.length),S=E-1;0<=S&&(192&b[S])==128;)S--;return S<0||S===0?E:S+c[b[S]]>E?S:E})(p),v=p;m!==p.length&&(s.uint8array?(v=p.subarray(0,m),this.leftOver=p.subarray(m,p.length)):(v=p.slice(0,m),this.leftOver=p.slice(m,p.length))),this.push({data:i.utf8decode(v),meta:f.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=d,o.inherits(h,u),h.prototype.processChunk=function(f){this.push({data:i.utf8encode(f.data),meta:f.meta})},i.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,n,i){var o=r("./support"),s=r("./base64"),a=r("./nodejsUtils"),u=r("./external");function c(g){return g}function l(g,m){for(var v=0;v<g.length;++v)m[v]=255&g.charCodeAt(v);return m}r("setimmediate"),i.newBlob=function(g,m){i.checkSupport("blob");try{return new Blob([g],{type:m})}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return v.append(g),v.getBlob(m)}catch{throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(g,m,v){var b=[],E=0,S=g.length;if(S<=v)return String.fromCharCode.apply(null,g);for(;E<S;)m==="array"||m==="nodebuffer"?b.push(String.fromCharCode.apply(null,g.slice(E,Math.min(E+v,S)))):b.push(String.fromCharCode.apply(null,g.subarray(E,Math.min(E+v,S)))),E+=v;return b.join("")},stringifyByChar:function(g){for(var m="",v=0;v<g.length;v++)m+=String.fromCharCode(g[v]);return m},applyCanBeUsed:{uint8array:(function(){try{return o.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return o.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}})()}};function h(g){var m=65536,v=i.getTypeOf(g),b=!0;if(v==="uint8array"?b=d.applyCanBeUsed.uint8array:v==="nodebuffer"&&(b=d.applyCanBeUsed.nodebuffer),b)for(;1<m;)try{return d.stringifyByChunk(g,v,m)}catch{m=Math.floor(m/2)}return d.stringifyByChar(g)}function f(g,m){for(var v=0;v<g.length;v++)m[v]=g[v];return m}i.applyFromCharCode=h;var p={};p.string={string:c,array:function(g){return l(g,new Array(g.length))},arraybuffer:function(g){return p.string.uint8array(g).buffer},uint8array:function(g){return l(g,new Uint8Array(g.length))},nodebuffer:function(g){return l(g,a.allocBuffer(g.length))}},p.array={string:h,array:c,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return a.newBufferFrom(g)}},p.arraybuffer={string:function(g){return h(new Uint8Array(g))},array:function(g){return f(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:c,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return a.newBufferFrom(new Uint8Array(g))}},p.uint8array={string:h,array:function(g){return f(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:c,nodebuffer:function(g){return a.newBufferFrom(g)}},p.nodebuffer={string:h,array:function(g){return f(g,new Array(g.length))},arraybuffer:function(g){return p.nodebuffer.uint8array(g).buffer},uint8array:function(g){return f(g,new Uint8Array(g.length))},nodebuffer:c},i.transformTo=function(g,m){if(m=m||"",!g)return m;i.checkSupport(g);var v=i.getTypeOf(m);return p[v][g](m)},i.resolve=function(g){for(var m=g.split("/"),v=[],b=0;b<m.length;b++){var E=m[b];E==="."||E===""&&b!==0&&b!==m.length-1||(E===".."?v.pop():v.push(E))}return v.join("/")},i.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":o.nodebuffer&&a.isBuffer(g)?"nodebuffer":o.uint8array&&g instanceof Uint8Array?"uint8array":o.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(g){if(!o[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(g){var m,v,b="";for(v=0;v<(g||"").length;v++)b+="\\x"+((m=g.charCodeAt(v))<16?"0":"")+m.toString(16).toUpperCase();return b},i.delay=function(g,m,v){setImmediate(function(){g.apply(v||null,m||[])})},i.inherits=function(g,m){function v(){}v.prototype=m.prototype,g.prototype=new v},i.extend=function(){var g,m,v={};for(g=0;g<arguments.length;g++)for(m in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],m)&&v[m]===void 0&&(v[m]=arguments[g][m]);return v},i.prepareContent=function(g,m,v,b,E){return u.Promise.resolve(m).then(function(S){return o.blob&&(S instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(S))!==-1)&&typeof FileReader<"u"?new u.Promise(function(T,x){var C=new FileReader;C.onload=function(P){T(P.target.result)},C.onerror=function(P){x(P.target.error)},C.readAsArrayBuffer(S)}):S}).then(function(S){var T=i.getTypeOf(S);return T?(T==="arraybuffer"?S=i.transformTo("uint8array",S):T==="string"&&(E?S=s.decode(S):v&&b!==!0&&(S=(function(x){return l(x,o.uint8array?new Uint8Array(x.length):new Array(x.length))})(S))),S):u.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,n,i){var o=r("./reader/readerFor"),s=r("./utils"),a=r("./signature"),u=r("./zipEntry"),c=r("./support");function l(d){this.files=[],this.loadOptions=d}l.prototype={checkSignature:function(d){if(!this.reader.readAndCheckSignature(d)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+s.pretty(h)+", expected "+s.pretty(d)+")")}},isSignature:function(d,h){var f=this.reader.index;this.reader.setIndex(d);var p=this.reader.readString(4)===h;return this.reader.setIndex(f),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var d=this.reader.readData(this.zipCommentLength),h=c.uint8array?"uint8array":"array",f=s.transformTo(h,d);this.zipComment=this.loadOptions.decodeFileName(f)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var d,h,f,p=this.zip64EndOfCentralSize-44;0<p;)d=this.reader.readInt(2),h=this.reader.readInt(4),f=this.reader.readData(h),this.zip64ExtensibleData[d]={id:d,length:h,value:f}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var d,h;for(d=0;d<this.files.length;d++)h=this.files[d],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var d;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(d=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(d);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var d=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(d<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(d);var h=d;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===s.MAX_VALUE_16BITS||this.diskWithCentralDirStart===s.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===s.MAX_VALUE_16BITS||this.centralDirRecords===s.MAX_VALUE_16BITS||this.centralDirSize===s.MAX_VALUE_32BITS||this.centralDirOffset===s.MAX_VALUE_32BITS){if(this.zip64=!0,(d=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(d),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var f=this.centralDirOffset+this.centralDirSize;this.zip64&&(f+=20,f+=12+this.zip64EndOfCentralSize);var p=h-f;if(0<p)this.isSignature(h,a.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(d){this.reader=o(d)},load:function(d){this.prepareReader(d),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,n,i){var o=r("./reader/readerFor"),s=r("./utils"),a=r("./compressedObject"),u=r("./crc32"),c=r("./utf8"),l=r("./compressions"),d=r("./support");function h(f,p){this.options=f,this.loadOptions=p}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(f){var p,g;if(f.skip(22),this.fileNameLength=f.readInt(2),g=f.readInt(2),this.fileName=f.readData(this.fileNameLength),f.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=(function(m){for(var v in l)if(Object.prototype.hasOwnProperty.call(l,v)&&l[v].magic===m)return l[v];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+s.pretty(this.compressionMethod)+" unknown (inner file : "+s.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,p,f.readData(this.compressedSize))},readCentralPart:function(f){this.versionMadeBy=f.readInt(2),f.skip(2),this.bitFlag=f.readInt(2),this.compressionMethod=f.readString(2),this.date=f.readDate(),this.crc32=f.readInt(4),this.compressedSize=f.readInt(4),this.uncompressedSize=f.readInt(4);var p=f.readInt(2);if(this.extraFieldsLength=f.readInt(2),this.fileCommentLength=f.readInt(2),this.diskNumberStart=f.readInt(2),this.internalFileAttributes=f.readInt(2),this.externalFileAttributes=f.readInt(4),this.localHeaderOffset=f.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");f.skip(p),this.readExtraFields(f),this.parseZIP64ExtraField(f),this.fileComment=f.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var f=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),f==0&&(this.dosPermissions=63&this.externalFileAttributes),f==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var f=o(this.extraFields[1].value);this.uncompressedSize===s.MAX_VALUE_32BITS&&(this.uncompressedSize=f.readInt(8)),this.compressedSize===s.MAX_VALUE_32BITS&&(this.compressedSize=f.readInt(8)),this.localHeaderOffset===s.MAX_VALUE_32BITS&&(this.localHeaderOffset=f.readInt(8)),this.diskNumberStart===s.MAX_VALUE_32BITS&&(this.diskNumberStart=f.readInt(4))}},readExtraFields:function(f){var p,g,m,v=f.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});f.index+4<v;)p=f.readInt(2),g=f.readInt(2),m=f.readData(g),this.extraFields[p]={id:p,length:g,value:m};f.setIndex(v)},handleUTF8:function(){var f=d.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var g=s.transformTo(f,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var m=this.findExtraFieldUnicodeComment();if(m!==null)this.fileCommentStr=m;else{var v=s.transformTo(f,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(v)}}},findExtraFieldUnicodePath:function(){var f=this.extraFields[28789];if(f){var p=o(f.value);return p.readInt(1)!==1||u(this.fileName)!==p.readInt(4)?null:c.utf8decode(p.readData(f.length-5))}return null},findExtraFieldUnicodeComment:function(){var f=this.extraFields[25461];if(f){var p=o(f.value);return p.readInt(1)!==1||u(this.fileComment)!==p.readInt(4)?null:c.utf8decode(p.readData(f.length-5))}return null}},n.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,n,i){function o(p,g,m){this.name=p,this.dir=m.dir,this.date=m.date,this.comment=m.comment,this.unixPermissions=m.unixPermissions,this.dosPermissions=m.dosPermissions,this._data=g,this._dataBinary=m.binary,this.options={compression:m.compression,compressionOptions:m.compressionOptions}}var s=r("./stream/StreamHelper"),a=r("./stream/DataWorker"),u=r("./utf8"),c=r("./compressedObject"),l=r("./stream/GenericWorker");o.prototype={internalStream:function(p){var g=null,m="string";try{if(!p)throw new Error("No output type specified.");var v=(m=p.toLowerCase())==="string"||m==="text";m!=="binarystring"&&m!=="text"||(m="string"),g=this._decompressWorker();var b=!this._dataBinary;b&&!v&&(g=g.pipe(new u.Utf8EncodeWorker)),!b&&v&&(g=g.pipe(new u.Utf8DecodeWorker))}catch(E){(g=new l("error")).error(E)}return new s(g,m,"")},async:function(p,g){return this.internalStream(p).accumulate(g)},nodeStream:function(p,g){return this.internalStream(p||"nodebuffer").toNodejsStream(g)},_compressWorker:function(p,g){if(this._data instanceof c&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var m=this._decompressWorker();return this._dataBinary||(m=m.pipe(new u.Utf8EncodeWorker)),c.createWorkerFrom(m,p,g)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof l?this._data:new a(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<d.length;f++)o.prototype[d[f]]=h;n.exports=o},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,n,i){(function(o){var s,a,u=o.MutationObserver||o.WebKitMutationObserver;if(u){var c=0,l=new u(p),d=o.document.createTextNode("");l.observe(d,{characterData:!0}),s=function(){d.data=c=++c%2}}else if(o.setImmediate||o.MessageChannel===void 0)s="document"in o&&"onreadystatechange"in o.document.createElement("script")?function(){var g=o.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},o.document.documentElement.appendChild(g)}:function(){setTimeout(p,0)};else{var h=new o.MessageChannel;h.port1.onmessage=p,s=function(){h.port2.postMessage(0)}}var f=[];function p(){var g,m;a=!0;for(var v=f.length;v;){for(m=f,f=[],g=-1;++g<v;)m[g]();v=f.length}a=!1}n.exports=function(g){f.push(g)!==1||a||s()}}).call(this,typeof Or<"u"?Or:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(r,n,i){var o=r("immediate");function s(){}var a={},u=["REJECTED"],c=["FULFILLED"],l=["PENDING"];function d(v){if(typeof v!="function")throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,v!==s&&g(this,v)}function h(v,b,E){this.promise=v,typeof b=="function"&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function f(v,b,E){o(function(){var S;try{S=b(E)}catch(T){return a.reject(v,T)}S===v?a.reject(v,new TypeError("Cannot resolve promise with itself")):a.resolve(v,S)})}function p(v){var b=v&&v.then;if(v&&(typeof v=="object"||typeof v=="function")&&typeof b=="function")return function(){b.apply(v,arguments)}}function g(v,b){var E=!1;function S(C){E||(E=!0,a.reject(v,C))}function T(C){E||(E=!0,a.resolve(v,C))}var x=m(function(){b(T,S)});x.status==="error"&&S(x.value)}function m(v,b){var E={};try{E.value=v(b),E.status="success"}catch(S){E.status="error",E.value=S}return E}(n.exports=d).prototype.finally=function(v){if(typeof v!="function")return this;var b=this.constructor;return this.then(function(E){return b.resolve(v()).then(function(){return E})},function(E){return b.resolve(v()).then(function(){throw E})})},d.prototype.catch=function(v){return this.then(null,v)},d.prototype.then=function(v,b){if(typeof v!="function"&&this.state===c||typeof b!="function"&&this.state===u)return this;var E=new this.constructor(s);return this.state!==l?f(E,this.state===c?v:b,this.outcome):this.queue.push(new h(E,v,b)),E},h.prototype.callFulfilled=function(v){a.resolve(this.promise,v)},h.prototype.otherCallFulfilled=function(v){f(this.promise,this.onFulfilled,v)},h.prototype.callRejected=function(v){a.reject(this.promise,v)},h.prototype.otherCallRejected=function(v){f(this.promise,this.onRejected,v)},a.resolve=function(v,b){var E=m(p,b);if(E.status==="error")return a.reject(v,E.value);var S=E.value;if(S)g(v,S);else{v.state=c,v.outcome=b;for(var T=-1,x=v.queue.length;++T<x;)v.queue[T].callFulfilled(b)}return v},a.reject=function(v,b){v.state=u,v.outcome=b;for(var E=-1,S=v.queue.length;++E<S;)v.queue[E].callRejected(b);return v},d.resolve=function(v){return v instanceof this?v:a.resolve(new this(s),v)},d.reject=function(v){var b=new this(s);return a.reject(b,v)},d.all=function(v){var b=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=v.length,S=!1;if(!E)return this.resolve([]);for(var T=new Array(E),x=0,C=-1,P=new this(s);++C<E;)I(v[C],C);return P;function I(M,j){b.resolve(M).then(function(A){T[j]=A,++x!==E||S||(S=!0,a.resolve(P,T))},function(A){S||(S=!0,a.reject(P,A))})}},d.race=function(v){var b=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=v.length,S=!1;if(!E)return this.resolve([]);for(var T=-1,x=new this(s);++T<E;)C=v[T],b.resolve(C).then(function(P){S||(S=!0,a.resolve(x,P))},function(P){S||(S=!0,a.reject(x,P))});var C;return x}},{immediate:36}],38:[function(r,n,i){var o={};(0,r("./lib/utils/common").assign)(o,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),n.exports=o},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,n,i){var o=r("./zlib/deflate"),s=r("./utils/common"),a=r("./utils/strings"),u=r("./zlib/messages"),c=r("./zlib/zstream"),l=Object.prototype.toString,d=0,h=-1,f=0,p=8;function g(v){if(!(this instanceof g))return new g(v);this.options=s.assign({level:h,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},v||{});var b=this.options;b.raw&&0<b.windowBits?b.windowBits=-b.windowBits:b.gzip&&0<b.windowBits&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var E=o.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(E!==d)throw new Error(u[E]);if(b.header&&o.deflateSetHeader(this.strm,b.header),b.dictionary){var S;if(S=typeof b.dictionary=="string"?a.string2buf(b.dictionary):l.call(b.dictionary)==="[object ArrayBuffer]"?new Uint8Array(b.dictionary):b.dictionary,(E=o.deflateSetDictionary(this.strm,S))!==d)throw new Error(u[E]);this._dict_set=!0}}function m(v,b){var E=new g(b);if(E.push(v,!0),E.err)throw E.msg||u[E.err];return E.result}g.prototype.push=function(v,b){var E,S,T=this.strm,x=this.options.chunkSize;if(this.ended)return!1;S=b===~~b?b:b===!0?4:0,typeof v=="string"?T.input=a.string2buf(v):l.call(v)==="[object ArrayBuffer]"?T.input=new Uint8Array(v):T.input=v,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new s.Buf8(x),T.next_out=0,T.avail_out=x),(E=o.deflate(T,S))!==1&&E!==d)return this.onEnd(E),!(this.ended=!0);T.avail_out!==0&&(T.avail_in!==0||S!==4&&S!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(s.shrinkBuf(T.output,T.next_out))):this.onData(s.shrinkBuf(T.output,T.next_out)))}while((0<T.avail_in||T.avail_out===0)&&E!==1);return S===4?(E=o.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===d):S!==2||(this.onEnd(d),!(T.avail_out=0))},g.prototype.onData=function(v){this.chunks.push(v)},g.prototype.onEnd=function(v){v===d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},i.Deflate=g,i.deflate=m,i.deflateRaw=function(v,b){return(b=b||{}).raw=!0,m(v,b)},i.gzip=function(v,b){return(b=b||{}).gzip=!0,m(v,b)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,n,i){var o=r("./zlib/inflate"),s=r("./utils/common"),a=r("./utils/strings"),u=r("./zlib/constants"),c=r("./zlib/messages"),l=r("./zlib/zstream"),d=r("./zlib/gzheader"),h=Object.prototype.toString;function f(g){if(!(this instanceof f))return new f(g);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},g||{});var m=this.options;m.raw&&0<=m.windowBits&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),!(0<=m.windowBits&&m.windowBits<16)||g&&g.windowBits||(m.windowBits+=32),15<m.windowBits&&m.windowBits<48&&(15&m.windowBits)==0&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var v=o.inflateInit2(this.strm,m.windowBits);if(v!==u.Z_OK)throw new Error(c[v]);this.header=new d,o.inflateGetHeader(this.strm,this.header)}function p(g,m){var v=new f(m);if(v.push(g,!0),v.err)throw v.msg||c[v.err];return v.result}f.prototype.push=function(g,m){var v,b,E,S,T,x,C=this.strm,P=this.options.chunkSize,I=this.options.dictionary,M=!1;if(this.ended)return!1;b=m===~~m?m:m===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof g=="string"?C.input=a.binstring2buf(g):h.call(g)==="[object ArrayBuffer]"?C.input=new Uint8Array(g):C.input=g,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new s.Buf8(P),C.next_out=0,C.avail_out=P),(v=o.inflate(C,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&I&&(x=typeof I=="string"?a.string2buf(I):h.call(I)==="[object ArrayBuffer]"?new Uint8Array(I):I,v=o.inflateSetDictionary(this.strm,x)),v===u.Z_BUF_ERROR&&M===!0&&(v=u.Z_OK,M=!1),v!==u.Z_STREAM_END&&v!==u.Z_OK)return this.onEnd(v),!(this.ended=!0);C.next_out&&(C.avail_out!==0&&v!==u.Z_STREAM_END&&(C.avail_in!==0||b!==u.Z_FINISH&&b!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=a.utf8border(C.output,C.next_out),S=C.next_out-E,T=a.buf2string(C.output,E),C.next_out=S,C.avail_out=P-S,S&&s.arraySet(C.output,C.output,E,S,0),this.onData(T)):this.onData(s.shrinkBuf(C.output,C.next_out)))),C.avail_in===0&&C.avail_out===0&&(M=!0)}while((0<C.avail_in||C.avail_out===0)&&v!==u.Z_STREAM_END);return v===u.Z_STREAM_END&&(b=u.Z_FINISH),b===u.Z_FINISH?(v=o.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===u.Z_OK):b!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(C.avail_out=0))},f.prototype.onData=function(g){this.chunks.push(g)},f.prototype.onEnd=function(g){g===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},i.Inflate=f,i.inflate=p,i.inflateRaw=function(g,m){return(m=m||{}).raw=!0,p(g,m)},i.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,n,i){var o=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(u){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var l=c.shift();if(l){if(typeof l!="object")throw new TypeError(l+"must be non-object");for(var d in l)l.hasOwnProperty(d)&&(u[d]=l[d])}}return u},i.shrinkBuf=function(u,c){return u.length===c?u:u.subarray?u.subarray(0,c):(u.length=c,u)};var s={arraySet:function(u,c,l,d,h){if(c.subarray&&u.subarray)u.set(c.subarray(l,l+d),h);else for(var f=0;f<d;f++)u[h+f]=c[l+f]},flattenChunks:function(u){var c,l,d,h,f,p;for(c=d=0,l=u.length;c<l;c++)d+=u[c].length;for(p=new Uint8Array(d),c=h=0,l=u.length;c<l;c++)f=u[c],p.set(f,h),h+=f.length;return p}},a={arraySet:function(u,c,l,d,h){for(var f=0;f<d;f++)u[h+f]=c[l+f]},flattenChunks:function(u){return[].concat.apply([],u)}};i.setTyped=function(u){u?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,s)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(o)},{}],42:[function(r,n,i){var o=r("./common"),s=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{s=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var u=new o.Buf8(256),c=0;c<256;c++)u[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function l(d,h){if(h<65537&&(d.subarray&&a||!d.subarray&&s))return String.fromCharCode.apply(null,o.shrinkBuf(d,h));for(var f="",p=0;p<h;p++)f+=String.fromCharCode(d[p]);return f}u[254]=u[254]=1,i.string2buf=function(d){var h,f,p,g,m,v=d.length,b=0;for(g=0;g<v;g++)(64512&(f=d.charCodeAt(g)))==55296&&g+1<v&&(64512&(p=d.charCodeAt(g+1)))==56320&&(f=65536+(f-55296<<10)+(p-56320),g++),b+=f<128?1:f<2048?2:f<65536?3:4;for(h=new o.Buf8(b),g=m=0;m<b;g++)(64512&(f=d.charCodeAt(g)))==55296&&g+1<v&&(64512&(p=d.charCodeAt(g+1)))==56320&&(f=65536+(f-55296<<10)+(p-56320),g++),f<128?h[m++]=f:(f<2048?h[m++]=192|f>>>6:(f<65536?h[m++]=224|f>>>12:(h[m++]=240|f>>>18,h[m++]=128|f>>>12&63),h[m++]=128|f>>>6&63),h[m++]=128|63&f);return h},i.buf2binstring=function(d){return l(d,d.length)},i.binstring2buf=function(d){for(var h=new o.Buf8(d.length),f=0,p=h.length;f<p;f++)h[f]=d.charCodeAt(f);return h},i.buf2string=function(d,h){var f,p,g,m,v=h||d.length,b=new Array(2*v);for(f=p=0;f<v;)if((g=d[f++])<128)b[p++]=g;else if(4<(m=u[g]))b[p++]=65533,f+=m-1;else{for(g&=m===2?31:m===3?15:7;1<m&&f<v;)g=g<<6|63&d[f++],m--;1<m?b[p++]=65533:g<65536?b[p++]=g:(g-=65536,b[p++]=55296|g>>10&1023,b[p++]=56320|1023&g)}return l(b,p)},i.utf8border=function(d,h){var f;for((h=h||d.length)>d.length&&(h=d.length),f=h-1;0<=f&&(192&d[f])==128;)f--;return f<0||f===0?h:f+u[d[f]]>h?f:h}},{"./common":41}],43:[function(r,n,i){n.exports=function(o,s,a,u){for(var c=65535&o|0,l=o>>>16&65535|0,d=0;a!==0;){for(a-=d=2e3<a?2e3:a;l=l+(c=c+s[u++]|0)|0,--d;);c%=65521,l%=65521}return c|l<<16|0}},{}],44:[function(r,n,i){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,n,i){var o=(function(){for(var s,a=[],u=0;u<256;u++){s=u;for(var c=0;c<8;c++)s=1&s?3988292384^s>>>1:s>>>1;a[u]=s}return a})();n.exports=function(s,a,u,c){var l=o,d=c+u;s^=-1;for(var h=c;h<d;h++)s=s>>>8^l[255&(s^a[h])];return-1^s}},{}],46:[function(r,n,i){var o,s=r("../utils/common"),a=r("./trees"),u=r("./adler32"),c=r("./crc32"),l=r("./messages"),d=0,h=4,f=0,p=-2,g=-1,m=4,v=2,b=8,E=9,S=286,T=30,x=19,C=2*S+1,P=15,I=3,M=258,j=M+I+1,A=42,D=113,_=1,U=2,ee=3,z=4;function te(y,B){return y.msg=l[B],B}function q(y){return(y<<1)-(4<y?9:0)}function re(y){for(var B=y.length;0<=--B;)y[B]=0}function R(y){var B=y.state,F=B.pending;F>y.avail_out&&(F=y.avail_out),F!==0&&(s.arraySet(y.output,B.pending_buf,B.pending_out,F,y.next_out),y.next_out+=F,B.pending_out+=F,y.total_out+=F,y.avail_out-=F,B.pending-=F,B.pending===0&&(B.pending_out=0))}function L(y,B){a._tr_flush_block(y,0<=y.block_start?y.block_start:-1,y.strstart-y.block_start,B),y.block_start=y.strstart,R(y.strm)}function J(y,B){y.pending_buf[y.pending++]=B}function X(y,B){y.pending_buf[y.pending++]=B>>>8&255,y.pending_buf[y.pending++]=255&B}function K(y,B){var F,k,w=y.max_chain_length,O=y.strstart,$=y.prev_length,W=y.nice_match,N=y.strstart>y.w_size-j?y.strstart-(y.w_size-j):0,V=y.window,Q=y.w_mask,Y=y.prev,ie=y.strstart+M,ve=V[O+$-1],le=V[O+$];y.prev_length>=y.good_match&&(w>>=2),W>y.lookahead&&(W=y.lookahead);do if(V[(F=B)+$]===le&&V[F+$-1]===ve&&V[F]===V[O]&&V[++F]===V[O+1]){O+=2,F++;do;while(V[++O]===V[++F]&&V[++O]===V[++F]&&V[++O]===V[++F]&&V[++O]===V[++F]&&V[++O]===V[++F]&&V[++O]===V[++F]&&V[++O]===V[++F]&&V[++O]===V[++F]&&O<ie);if(k=M-(ie-O),O=ie-M,$<k){if(y.match_start=B,W<=($=k))break;ve=V[O+$-1],le=V[O+$]}}while((B=Y[B&Q])>N&&--w!=0);return $<=y.lookahead?$:y.lookahead}function fe(y){var B,F,k,w,O,$,W,N,V,Q,Y=y.w_size;do{if(w=y.window_size-y.lookahead-y.strstart,y.strstart>=Y+(Y-j)){for(s.arraySet(y.window,y.window,Y,Y,0),y.match_start-=Y,y.strstart-=Y,y.block_start-=Y,B=F=y.hash_size;k=y.head[--B],y.head[B]=Y<=k?k-Y:0,--F;);for(B=F=Y;k=y.prev[--B],y.prev[B]=Y<=k?k-Y:0,--F;);w+=Y}if(y.strm.avail_in===0)break;if($=y.strm,W=y.window,N=y.strstart+y.lookahead,V=w,Q=void 0,Q=$.avail_in,V<Q&&(Q=V),F=Q===0?0:($.avail_in-=Q,s.arraySet(W,$.input,$.next_in,Q,N),$.state.wrap===1?$.adler=u($.adler,W,Q,N):$.state.wrap===2&&($.adler=c($.adler,W,Q,N)),$.next_in+=Q,$.total_in+=Q,Q),y.lookahead+=F,y.lookahead+y.insert>=I)for(O=y.strstart-y.insert,y.ins_h=y.window[O],y.ins_h=(y.ins_h<<y.hash_shift^y.window[O+1])&y.hash_mask;y.insert&&(y.ins_h=(y.ins_h<<y.hash_shift^y.window[O+I-1])&y.hash_mask,y.prev[O&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=O,O++,y.insert--,!(y.lookahead+y.insert<I)););}while(y.lookahead<j&&y.strm.avail_in!==0)}function Te(y,B){for(var F,k;;){if(y.lookahead<j){if(fe(y),y.lookahead<j&&B===d)return _;if(y.lookahead===0)break}if(F=0,y.lookahead>=I&&(y.ins_h=(y.ins_h<<y.hash_shift^y.window[y.strstart+I-1])&y.hash_mask,F=y.prev[y.strstart&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=y.strstart),F!==0&&y.strstart-F<=y.w_size-j&&(y.match_length=K(y,F)),y.match_length>=I)if(k=a._tr_tally(y,y.strstart-y.match_start,y.match_length-I),y.lookahead-=y.match_length,y.match_length<=y.max_lazy_match&&y.lookahead>=I){for(y.match_length--;y.strstart++,y.ins_h=(y.ins_h<<y.hash_shift^y.window[y.strstart+I-1])&y.hash_mask,F=y.prev[y.strstart&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=y.strstart,--y.match_length!=0;);y.strstart++}else y.strstart+=y.match_length,y.match_length=0,y.ins_h=y.window[y.strstart],y.ins_h=(y.ins_h<<y.hash_shift^y.window[y.strstart+1])&y.hash_mask;else k=a._tr_tally(y,0,y.window[y.strstart]),y.lookahead--,y.strstart++;if(k&&(L(y,!1),y.strm.avail_out===0))return _}return y.insert=y.strstart<I-1?y.strstart:I-1,B===h?(L(y,!0),y.strm.avail_out===0?ee:z):y.last_lit&&(L(y,!1),y.strm.avail_out===0)?_:U}function se(y,B){for(var F,k,w;;){if(y.lookahead<j){if(fe(y),y.lookahead<j&&B===d)return _;if(y.lookahead===0)break}if(F=0,y.lookahead>=I&&(y.ins_h=(y.ins_h<<y.hash_shift^y.window[y.strstart+I-1])&y.hash_mask,F=y.prev[y.strstart&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=y.strstart),y.prev_length=y.match_length,y.prev_match=y.match_start,y.match_length=I-1,F!==0&&y.prev_length<y.max_lazy_match&&y.strstart-F<=y.w_size-j&&(y.match_length=K(y,F),y.match_length<=5&&(y.strategy===1||y.match_length===I&&4096<y.strstart-y.match_start)&&(y.match_length=I-1)),y.prev_length>=I&&y.match_length<=y.prev_length){for(w=y.strstart+y.lookahead-I,k=a._tr_tally(y,y.strstart-1-y.prev_match,y.prev_length-I),y.lookahead-=y.prev_length-1,y.prev_length-=2;++y.strstart<=w&&(y.ins_h=(y.ins_h<<y.hash_shift^y.window[y.strstart+I-1])&y.hash_mask,F=y.prev[y.strstart&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=y.strstart),--y.prev_length!=0;);if(y.match_available=0,y.match_length=I-1,y.strstart++,k&&(L(y,!1),y.strm.avail_out===0))return _}else if(y.match_available){if((k=a._tr_tally(y,0,y.window[y.strstart-1]))&&L(y,!1),y.strstart++,y.lookahead--,y.strm.avail_out===0)return _}else y.match_available=1,y.strstart++,y.lookahead--}return y.match_available&&(k=a._tr_tally(y,0,y.window[y.strstart-1]),y.match_available=0),y.insert=y.strstart<I-1?y.strstart:I-1,B===h?(L(y,!0),y.strm.avail_out===0?ee:z):y.last_lit&&(L(y,!1),y.strm.avail_out===0)?_:U}function ce(y,B,F,k,w){this.good_length=y,this.max_lazy=B,this.nice_length=F,this.max_chain=k,this.func=w}function Ee(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=b,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(2*C),this.dyn_dtree=new s.Buf16(2*(2*T+1)),this.bl_tree=new s.Buf16(2*(2*x+1)),re(this.dyn_ltree),re(this.dyn_dtree),re(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(P+1),this.heap=new s.Buf16(2*S+1),re(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*S+1),re(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function me(y){var B;return y&&y.state?(y.total_in=y.total_out=0,y.data_type=v,(B=y.state).pending=0,B.pending_out=0,B.wrap<0&&(B.wrap=-B.wrap),B.status=B.wrap?A:D,y.adler=B.wrap===2?0:1,B.last_flush=d,a._tr_init(B),f):te(y,p)}function xe(y){var B=me(y);return B===f&&(function(F){F.window_size=2*F.w_size,re(F.head),F.max_lazy_match=o[F.level].max_lazy,F.good_match=o[F.level].good_length,F.nice_match=o[F.level].nice_length,F.max_chain_length=o[F.level].max_chain,F.strstart=0,F.block_start=0,F.lookahead=0,F.insert=0,F.match_length=F.prev_length=I-1,F.match_available=0,F.ins_h=0})(y.state),B}function Ze(y,B,F,k,w,O){if(!y)return p;var $=1;if(B===g&&(B=6),k<0?($=0,k=-k):15<k&&($=2,k-=16),w<1||E<w||F!==b||k<8||15<k||B<0||9<B||O<0||m<O)return te(y,p);k===8&&(k=9);var W=new Ee;return(y.state=W).strm=y,W.wrap=$,W.gzhead=null,W.w_bits=k,W.w_size=1<<W.w_bits,W.w_mask=W.w_size-1,W.hash_bits=w+7,W.hash_size=1<<W.hash_bits,W.hash_mask=W.hash_size-1,W.hash_shift=~~((W.hash_bits+I-1)/I),W.window=new s.Buf8(2*W.w_size),W.head=new s.Buf16(W.hash_size),W.prev=new s.Buf16(W.w_size),W.lit_bufsize=1<<w+6,W.pending_buf_size=4*W.lit_bufsize,W.pending_buf=new s.Buf8(W.pending_buf_size),W.d_buf=1*W.lit_bufsize,W.l_buf=3*W.lit_bufsize,W.level=B,W.strategy=O,W.method=F,xe(y)}o=[new ce(0,0,0,0,function(y,B){var F=65535;for(F>y.pending_buf_size-5&&(F=y.pending_buf_size-5);;){if(y.lookahead<=1){if(fe(y),y.lookahead===0&&B===d)return _;if(y.lookahead===0)break}y.strstart+=y.lookahead,y.lookahead=0;var k=y.block_start+F;if((y.strstart===0||y.strstart>=k)&&(y.lookahead=y.strstart-k,y.strstart=k,L(y,!1),y.strm.avail_out===0)||y.strstart-y.block_start>=y.w_size-j&&(L(y,!1),y.strm.avail_out===0))return _}return y.insert=0,B===h?(L(y,!0),y.strm.avail_out===0?ee:z):(y.strstart>y.block_start&&(L(y,!1),y.strm.avail_out),_)}),new ce(4,4,8,4,Te),new ce(4,5,16,8,Te),new ce(4,6,32,32,Te),new ce(4,4,16,16,se),new ce(8,16,32,32,se),new ce(8,16,128,128,se),new ce(8,32,128,256,se),new ce(32,128,258,1024,se),new ce(32,258,258,4096,se)],i.deflateInit=function(y,B){return Ze(y,B,b,15,8,0)},i.deflateInit2=Ze,i.deflateReset=xe,i.deflateResetKeep=me,i.deflateSetHeader=function(y,B){return y&&y.state?y.state.wrap!==2?p:(y.state.gzhead=B,f):p},i.deflate=function(y,B){var F,k,w,O;if(!y||!y.state||5<B||B<0)return y?te(y,p):p;if(k=y.state,!y.output||!y.input&&y.avail_in!==0||k.status===666&&B!==h)return te(y,y.avail_out===0?-5:p);if(k.strm=y,F=k.last_flush,k.last_flush=B,k.status===A)if(k.wrap===2)y.adler=0,J(k,31),J(k,139),J(k,8),k.gzhead?(J(k,(k.gzhead.text?1:0)+(k.gzhead.hcrc?2:0)+(k.gzhead.extra?4:0)+(k.gzhead.name?8:0)+(k.gzhead.comment?16:0)),J(k,255&k.gzhead.time),J(k,k.gzhead.time>>8&255),J(k,k.gzhead.time>>16&255),J(k,k.gzhead.time>>24&255),J(k,k.level===9?2:2<=k.strategy||k.level<2?4:0),J(k,255&k.gzhead.os),k.gzhead.extra&&k.gzhead.extra.length&&(J(k,255&k.gzhead.extra.length),J(k,k.gzhead.extra.length>>8&255)),k.gzhead.hcrc&&(y.adler=c(y.adler,k.pending_buf,k.pending,0)),k.gzindex=0,k.status=69):(J(k,0),J(k,0),J(k,0),J(k,0),J(k,0),J(k,k.level===9?2:2<=k.strategy||k.level<2?4:0),J(k,3),k.status=D);else{var $=b+(k.w_bits-8<<4)<<8;$|=(2<=k.strategy||k.level<2?0:k.level<6?1:k.level===6?2:3)<<6,k.strstart!==0&&($|=32),$+=31-$%31,k.status=D,X(k,$),k.strstart!==0&&(X(k,y.adler>>>16),X(k,65535&y.adler)),y.adler=1}if(k.status===69)if(k.gzhead.extra){for(w=k.pending;k.gzindex<(65535&k.gzhead.extra.length)&&(k.pending!==k.pending_buf_size||(k.gzhead.hcrc&&k.pending>w&&(y.adler=c(y.adler,k.pending_buf,k.pending-w,w)),R(y),w=k.pending,k.pending!==k.pending_buf_size));)J(k,255&k.gzhead.extra[k.gzindex]),k.gzindex++;k.gzhead.hcrc&&k.pending>w&&(y.adler=c(y.adler,k.pending_buf,k.pending-w,w)),k.gzindex===k.gzhead.extra.length&&(k.gzindex=0,k.status=73)}else k.status=73;if(k.status===73)if(k.gzhead.name){w=k.pending;do{if(k.pending===k.pending_buf_size&&(k.gzhead.hcrc&&k.pending>w&&(y.adler=c(y.adler,k.pending_buf,k.pending-w,w)),R(y),w=k.pending,k.pending===k.pending_buf_size)){O=1;break}O=k.gzindex<k.gzhead.name.length?255&k.gzhead.name.charCodeAt(k.gzindex++):0,J(k,O)}while(O!==0);k.gzhead.hcrc&&k.pending>w&&(y.adler=c(y.adler,k.pending_buf,k.pending-w,w)),O===0&&(k.gzindex=0,k.status=91)}else k.status=91;if(k.status===91)if(k.gzhead.comment){w=k.pending;do{if(k.pending===k.pending_buf_size&&(k.gzhead.hcrc&&k.pending>w&&(y.adler=c(y.adler,k.pending_buf,k.pending-w,w)),R(y),w=k.pending,k.pending===k.pending_buf_size)){O=1;break}O=k.gzindex<k.gzhead.comment.length?255&k.gzhead.comment.charCodeAt(k.gzindex++):0,J(k,O)}while(O!==0);k.gzhead.hcrc&&k.pending>w&&(y.adler=c(y.adler,k.pending_buf,k.pending-w,w)),O===0&&(k.status=103)}else k.status=103;if(k.status===103&&(k.gzhead.hcrc?(k.pending+2>k.pending_buf_size&&R(y),k.pending+2<=k.pending_buf_size&&(J(k,255&y.adler),J(k,y.adler>>8&255),y.adler=0,k.status=D)):k.status=D),k.pending!==0){if(R(y),y.avail_out===0)return k.last_flush=-1,f}else if(y.avail_in===0&&q(B)<=q(F)&&B!==h)return te(y,-5);if(k.status===666&&y.avail_in!==0)return te(y,-5);if(y.avail_in!==0||k.lookahead!==0||B!==d&&k.status!==666){var W=k.strategy===2?(function(N,V){for(var Q;;){if(N.lookahead===0&&(fe(N),N.lookahead===0)){if(V===d)return _;break}if(N.match_length=0,Q=a._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++,Q&&(L(N,!1),N.strm.avail_out===0))return _}return N.insert=0,V===h?(L(N,!0),N.strm.avail_out===0?ee:z):N.last_lit&&(L(N,!1),N.strm.avail_out===0)?_:U})(k,B):k.strategy===3?(function(N,V){for(var Q,Y,ie,ve,le=N.window;;){if(N.lookahead<=M){if(fe(N),N.lookahead<=M&&V===d)return _;if(N.lookahead===0)break}if(N.match_length=0,N.lookahead>=I&&0<N.strstart&&(Y=le[ie=N.strstart-1])===le[++ie]&&Y===le[++ie]&&Y===le[++ie]){ve=N.strstart+M;do;while(Y===le[++ie]&&Y===le[++ie]&&Y===le[++ie]&&Y===le[++ie]&&Y===le[++ie]&&Y===le[++ie]&&Y===le[++ie]&&Y===le[++ie]&&ie<ve);N.match_length=M-(ve-ie),N.match_length>N.lookahead&&(N.match_length=N.lookahead)}if(N.match_length>=I?(Q=a._tr_tally(N,1,N.match_length-I),N.lookahead-=N.match_length,N.strstart+=N.match_length,N.match_length=0):(Q=a._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++),Q&&(L(N,!1),N.strm.avail_out===0))return _}return N.insert=0,V===h?(L(N,!0),N.strm.avail_out===0?ee:z):N.last_lit&&(L(N,!1),N.strm.avail_out===0)?_:U})(k,B):o[k.level].func(k,B);if(W!==ee&&W!==z||(k.status=666),W===_||W===ee)return y.avail_out===0&&(k.last_flush=-1),f;if(W===U&&(B===1?a._tr_align(k):B!==5&&(a._tr_stored_block(k,0,0,!1),B===3&&(re(k.head),k.lookahead===0&&(k.strstart=0,k.block_start=0,k.insert=0))),R(y),y.avail_out===0))return k.last_flush=-1,f}return B!==h?f:k.wrap<=0?1:(k.wrap===2?(J(k,255&y.adler),J(k,y.adler>>8&255),J(k,y.adler>>16&255),J(k,y.adler>>24&255),J(k,255&y.total_in),J(k,y.total_in>>8&255),J(k,y.total_in>>16&255),J(k,y.total_in>>24&255)):(X(k,y.adler>>>16),X(k,65535&y.adler)),R(y),0<k.wrap&&(k.wrap=-k.wrap),k.pending!==0?f:1)},i.deflateEnd=function(y){var B;return y&&y.state?(B=y.state.status)!==A&&B!==69&&B!==73&&B!==91&&B!==103&&B!==D&&B!==666?te(y,p):(y.state=null,B===D?te(y,-3):f):p},i.deflateSetDictionary=function(y,B){var F,k,w,O,$,W,N,V,Q=B.length;if(!y||!y.state||(O=(F=y.state).wrap)===2||O===1&&F.status!==A||F.lookahead)return p;for(O===1&&(y.adler=u(y.adler,B,Q,0)),F.wrap=0,Q>=F.w_size&&(O===0&&(re(F.head),F.strstart=0,F.block_start=0,F.insert=0),V=new s.Buf8(F.w_size),s.arraySet(V,B,Q-F.w_size,F.w_size,0),B=V,Q=F.w_size),$=y.avail_in,W=y.next_in,N=y.input,y.avail_in=Q,y.next_in=0,y.input=B,fe(F);F.lookahead>=I;){for(k=F.strstart,w=F.lookahead-(I-1);F.ins_h=(F.ins_h<<F.hash_shift^F.window[k+I-1])&F.hash_mask,F.prev[k&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=k,k++,--w;);F.strstart=k,F.lookahead=I-1,fe(F)}return F.strstart+=F.lookahead,F.block_start=F.strstart,F.insert=F.lookahead,F.lookahead=0,F.match_length=F.prev_length=I-1,F.match_available=0,y.next_in=W,y.input=N,y.avail_in=$,F.wrap=O,f},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,n,i){n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,n,i){n.exports=function(o,s){var a,u,c,l,d,h,f,p,g,m,v,b,E,S,T,x,C,P,I,M,j,A,D,_,U;a=o.state,u=o.next_in,_=o.input,c=u+(o.avail_in-5),l=o.next_out,U=o.output,d=l-(s-o.avail_out),h=l+(o.avail_out-257),f=a.dmax,p=a.wsize,g=a.whave,m=a.wnext,v=a.window,b=a.hold,E=a.bits,S=a.lencode,T=a.distcode,x=(1<<a.lenbits)-1,C=(1<<a.distbits)-1;e:do{E<15&&(b+=_[u++]<<E,E+=8,b+=_[u++]<<E,E+=8),P=S[b&x];t:for(;;){if(b>>>=I=P>>>24,E-=I,(I=P>>>16&255)===0)U[l++]=65535&P;else{if(!(16&I)){if((64&I)==0){P=S[(65535&P)+(b&(1<<I)-1)];continue t}if(32&I){a.mode=12;break e}o.msg="invalid literal/length code",a.mode=30;break e}M=65535&P,(I&=15)&&(E<I&&(b+=_[u++]<<E,E+=8),M+=b&(1<<I)-1,b>>>=I,E-=I),E<15&&(b+=_[u++]<<E,E+=8,b+=_[u++]<<E,E+=8),P=T[b&C];r:for(;;){if(b>>>=I=P>>>24,E-=I,!(16&(I=P>>>16&255))){if((64&I)==0){P=T[(65535&P)+(b&(1<<I)-1)];continue r}o.msg="invalid distance code",a.mode=30;break e}if(j=65535&P,E<(I&=15)&&(b+=_[u++]<<E,(E+=8)<I&&(b+=_[u++]<<E,E+=8)),f<(j+=b&(1<<I)-1)){o.msg="invalid distance too far back",a.mode=30;break e}if(b>>>=I,E-=I,(I=l-d)<j){if(g<(I=j-I)&&a.sane){o.msg="invalid distance too far back",a.mode=30;break e}if(D=v,(A=0)===m){if(A+=p-I,I<M){for(M-=I;U[l++]=v[A++],--I;);A=l-j,D=U}}else if(m<I){if(A+=p+m-I,(I-=m)<M){for(M-=I;U[l++]=v[A++],--I;);if(A=0,m<M){for(M-=I=m;U[l++]=v[A++],--I;);A=l-j,D=U}}}else if(A+=m-I,I<M){for(M-=I;U[l++]=v[A++],--I;);A=l-j,D=U}for(;2<M;)U[l++]=D[A++],U[l++]=D[A++],U[l++]=D[A++],M-=3;M&&(U[l++]=D[A++],1<M&&(U[l++]=D[A++]))}else{for(A=l-j;U[l++]=U[A++],U[l++]=U[A++],U[l++]=U[A++],2<(M-=3););M&&(U[l++]=U[A++],1<M&&(U[l++]=U[A++]))}break}}break}}while(u<c&&l<h);u-=M=E>>3,b&=(1<<(E-=M<<3))-1,o.next_in=u,o.next_out=l,o.avail_in=u<c?c-u+5:5-(u-c),o.avail_out=l<h?h-l+257:257-(l-h),a.hold=b,a.bits=E}},{}],49:[function(r,n,i){var o=r("../utils/common"),s=r("./adler32"),a=r("./crc32"),u=r("./inffast"),c=r("./inftrees"),l=1,d=2,h=0,f=-2,p=1,g=852,m=592;function v(A){return(A>>>24&255)+(A>>>8&65280)+((65280&A)<<8)+((255&A)<<24)}function b(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new o.Buf16(320),this.work=new o.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(A){var D;return A&&A.state?(D=A.state,A.total_in=A.total_out=D.total=0,A.msg="",D.wrap&&(A.adler=1&D.wrap),D.mode=p,D.last=0,D.havedict=0,D.dmax=32768,D.head=null,D.hold=0,D.bits=0,D.lencode=D.lendyn=new o.Buf32(g),D.distcode=D.distdyn=new o.Buf32(m),D.sane=1,D.back=-1,h):f}function S(A){var D;return A&&A.state?((D=A.state).wsize=0,D.whave=0,D.wnext=0,E(A)):f}function T(A,D){var _,U;return A&&A.state?(U=A.state,D<0?(_=0,D=-D):(_=1+(D>>4),D<48&&(D&=15)),D&&(D<8||15<D)?f:(U.window!==null&&U.wbits!==D&&(U.window=null),U.wrap=_,U.wbits=D,S(A))):f}function x(A,D){var _,U;return A?(U=new b,(A.state=U).window=null,(_=T(A,D))!==h&&(A.state=null),_):f}var C,P,I=!0;function M(A){if(I){var D;for(C=new o.Buf32(512),P=new o.Buf32(32),D=0;D<144;)A.lens[D++]=8;for(;D<256;)A.lens[D++]=9;for(;D<280;)A.lens[D++]=7;for(;D<288;)A.lens[D++]=8;for(c(l,A.lens,0,288,C,0,A.work,{bits:9}),D=0;D<32;)A.lens[D++]=5;c(d,A.lens,0,32,P,0,A.work,{bits:5}),I=!1}A.lencode=C,A.lenbits=9,A.distcode=P,A.distbits=5}function j(A,D,_,U){var ee,z=A.state;return z.window===null&&(z.wsize=1<<z.wbits,z.wnext=0,z.whave=0,z.window=new o.Buf8(z.wsize)),U>=z.wsize?(o.arraySet(z.window,D,_-z.wsize,z.wsize,0),z.wnext=0,z.whave=z.wsize):(U<(ee=z.wsize-z.wnext)&&(ee=U),o.arraySet(z.window,D,_-U,ee,z.wnext),(U-=ee)?(o.arraySet(z.window,D,_-U,U,0),z.wnext=U,z.whave=z.wsize):(z.wnext+=ee,z.wnext===z.wsize&&(z.wnext=0),z.whave<z.wsize&&(z.whave+=ee))),0}i.inflateReset=S,i.inflateReset2=T,i.inflateResetKeep=E,i.inflateInit=function(A){return x(A,15)},i.inflateInit2=x,i.inflate=function(A,D){var _,U,ee,z,te,q,re,R,L,J,X,K,fe,Te,se,ce,Ee,me,xe,Ze,y,B,F,k,w=0,O=new o.Buf8(4),$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!A||!A.state||!A.output||!A.input&&A.avail_in!==0)return f;(_=A.state).mode===12&&(_.mode=13),te=A.next_out,ee=A.output,re=A.avail_out,z=A.next_in,U=A.input,q=A.avail_in,R=_.hold,L=_.bits,J=q,X=re,B=h;e:for(;;)switch(_.mode){case p:if(_.wrap===0){_.mode=13;break}for(;L<16;){if(q===0)break e;q--,R+=U[z++]<<L,L+=8}if(2&_.wrap&&R===35615){O[_.check=0]=255&R,O[1]=R>>>8&255,_.check=a(_.check,O,2,0),L=R=0,_.mode=2;break}if(_.flags=0,_.head&&(_.head.done=!1),!(1&_.wrap)||(((255&R)<<8)+(R>>8))%31){A.msg="incorrect header check",_.mode=30;break}if((15&R)!=8){A.msg="unknown compression method",_.mode=30;break}if(L-=4,y=8+(15&(R>>>=4)),_.wbits===0)_.wbits=y;else if(y>_.wbits){A.msg="invalid window size",_.mode=30;break}_.dmax=1<<y,A.adler=_.check=1,_.mode=512&R?10:12,L=R=0;break;case 2:for(;L<16;){if(q===0)break e;q--,R+=U[z++]<<L,L+=8}if(_.flags=R,(255&_.flags)!=8){A.msg="unknown compression method",_.mode=30;break}if(57344&_.flags){A.msg="unknown header flags set",_.mode=30;break}_.head&&(_.head.text=R>>8&1),512&_.flags&&(O[0]=255&R,O[1]=R>>>8&255,_.check=a(_.check,O,2,0)),L=R=0,_.mode=3;case 3:for(;L<32;){if(q===0)break e;q--,R+=U[z++]<<L,L+=8}_.head&&(_.head.time=R),512&_.flags&&(O[0]=255&R,O[1]=R>>>8&255,O[2]=R>>>16&255,O[3]=R>>>24&255,_.check=a(_.check,O,4,0)),L=R=0,_.mode=4;case 4:for(;L<16;){if(q===0)break e;q--,R+=U[z++]<<L,L+=8}_.head&&(_.head.xflags=255&R,_.head.os=R>>8),512&_.flags&&(O[0]=255&R,O[1]=R>>>8&255,_.check=a(_.check,O,2,0)),L=R=0,_.mode=5;case 5:if(1024&_.flags){for(;L<16;){if(q===0)break e;q--,R+=U[z++]<<L,L+=8}_.length=R,_.head&&(_.head.extra_len=R),512&_.flags&&(O[0]=255&R,O[1]=R>>>8&255,_.check=a(_.check,O,2,0)),L=R=0}else _.head&&(_.head.extra=null);_.mode=6;case 6:if(1024&_.flags&&(q<(K=_.length)&&(K=q),K&&(_.head&&(y=_.head.extra_len-_.length,_.head.extra||(_.head.extra=new Array(_.head.extra_len)),o.arraySet(_.head.extra,U,z,K,y)),512&_.flags&&(_.check=a(_.check,U,K,z)),q-=K,z+=K,_.length-=K),_.length))break e;_.length=0,_.mode=7;case 7:if(2048&_.flags){if(q===0)break e;for(K=0;y=U[z+K++],_.head&&y&&_.length<65536&&(_.head.name+=String.fromCharCode(y)),y&&K<q;);if(512&_.flags&&(_.check=a(_.check,U,K,z)),q-=K,z+=K,y)break e}else _.head&&(_.head.name=null);_.length=0,_.mode=8;case 8:if(4096&_.flags){if(q===0)break e;for(K=0;y=U[z+K++],_.head&&y&&_.length<65536&&(_.head.comment+=String.fromCharCode(y)),y&&K<q;);if(512&_.flags&&(_.check=a(_.check,U,K,z)),q-=K,z+=K,y)break e}else _.head&&(_.head.comment=null);_.mode=9;case 9:if(512&_.flags){for(;L<16;){if(q===0)break e;q--,R+=U[z++]<<L,L+=8}if(R!==(65535&_.check)){A.msg="header crc mismatch",_.mode=30;break}L=R=0}_.head&&(_.head.hcrc=_.flags>>9&1,_.head.done=!0),A.adler=_.check=0,_.mode=12;break;case 10:for(;L<32;){if(q===0)break e;q--,R+=U[z++]<<L,L+=8}A.adler=_.check=v(R),L=R=0,_.mode=11;case 11:if(_.havedict===0)return A.next_out=te,A.avail_out=re,A.next_in=z,A.avail_in=q,_.hold=R,_.bits=L,2;A.adler=_.check=1,_.mode=12;case 12:if(D===5||D===6)break e;case 13:if(_.last){R>>>=7&L,L-=7&L,_.mode=27;break}for(;L<3;){if(q===0)break e;q--,R+=U[z++]<<L,L+=8}switch(_.last=1&R,L-=1,3&(R>>>=1)){case 0:_.mode=14;break;case 1:if(M(_),_.mode=20,D!==6)break;R>>>=2,L-=2;break e;case 2:_.mode=17;break;case 3:A.msg="invalid block type",_.mode=30}R>>>=2,L-=2;break;case 14:for(R>>>=7&L,L-=7&L;L<32;){if(q===0)break e;q--,R+=U[z++]<<L,L+=8}if((65535&R)!=(R>>>16^65535)){A.msg="invalid stored block lengths",_.mode=30;break}if(_.length=65535&R,L=R=0,_.mode=15,D===6)break e;case 15:_.mode=16;case 16:if(K=_.length){if(q<K&&(K=q),re<K&&(K=re),K===0)break e;o.arraySet(ee,U,z,K,te),q-=K,z+=K,re-=K,te+=K,_.length-=K;break}_.mode=12;break;case 17:for(;L<14;){if(q===0)break e;q--,R+=U[z++]<<L,L+=8}if(_.nlen=257+(31&R),R>>>=5,L-=5,_.ndist=1+(31&R),R>>>=5,L-=5,_.ncode=4+(15&R),R>>>=4,L-=4,286<_.nlen||30<_.ndist){A.msg="too many length or distance symbols",_.mode=30;break}_.have=0,_.mode=18;case 18:for(;_.have<_.ncode;){for(;L<3;){if(q===0)break e;q--,R+=U[z++]<<L,L+=8}_.lens[$[_.have++]]=7&R,R>>>=3,L-=3}for(;_.have<19;)_.lens[$[_.have++]]=0;if(_.lencode=_.lendyn,_.lenbits=7,F={bits:_.lenbits},B=c(0,_.lens,0,19,_.lencode,0,_.work,F),_.lenbits=F.bits,B){A.msg="invalid code lengths set",_.mode=30;break}_.have=0,_.mode=19;case 19:for(;_.have<_.nlen+_.ndist;){for(;ce=(w=_.lencode[R&(1<<_.lenbits)-1])>>>16&255,Ee=65535&w,!((se=w>>>24)<=L);){if(q===0)break e;q--,R+=U[z++]<<L,L+=8}if(Ee<16)R>>>=se,L-=se,_.lens[_.have++]=Ee;else{if(Ee===16){for(k=se+2;L<k;){if(q===0)break e;q--,R+=U[z++]<<L,L+=8}if(R>>>=se,L-=se,_.have===0){A.msg="invalid bit length repeat",_.mode=30;break}y=_.lens[_.have-1],K=3+(3&R),R>>>=2,L-=2}else if(Ee===17){for(k=se+3;L<k;){if(q===0)break e;q--,R+=U[z++]<<L,L+=8}L-=se,y=0,K=3+(7&(R>>>=se)),R>>>=3,L-=3}else{for(k=se+7;L<k;){if(q===0)break e;q--,R+=U[z++]<<L,L+=8}L-=se,y=0,K=11+(127&(R>>>=se)),R>>>=7,L-=7}if(_.have+K>_.nlen+_.ndist){A.msg="invalid bit length repeat",_.mode=30;break}for(;K--;)_.lens[_.have++]=y}}if(_.mode===30)break;if(_.lens[256]===0){A.msg="invalid code -- missing end-of-block",_.mode=30;break}if(_.lenbits=9,F={bits:_.lenbits},B=c(l,_.lens,0,_.nlen,_.lencode,0,_.work,F),_.lenbits=F.bits,B){A.msg="invalid literal/lengths set",_.mode=30;break}if(_.distbits=6,_.distcode=_.distdyn,F={bits:_.distbits},B=c(d,_.lens,_.nlen,_.ndist,_.distcode,0,_.work,F),_.distbits=F.bits,B){A.msg="invalid distances set",_.mode=30;break}if(_.mode=20,D===6)break e;case 20:_.mode=21;case 21:if(6<=q&&258<=re){A.next_out=te,A.avail_out=re,A.next_in=z,A.avail_in=q,_.hold=R,_.bits=L,u(A,X),te=A.next_out,ee=A.output,re=A.avail_out,z=A.next_in,U=A.input,q=A.avail_in,R=_.hold,L=_.bits,_.mode===12&&(_.back=-1);break}for(_.back=0;ce=(w=_.lencode[R&(1<<_.lenbits)-1])>>>16&255,Ee=65535&w,!((se=w>>>24)<=L);){if(q===0)break e;q--,R+=U[z++]<<L,L+=8}if(ce&&(240&ce)==0){for(me=se,xe=ce,Ze=Ee;ce=(w=_.lencode[Ze+((R&(1<<me+xe)-1)>>me)])>>>16&255,Ee=65535&w,!(me+(se=w>>>24)<=L);){if(q===0)break e;q--,R+=U[z++]<<L,L+=8}R>>>=me,L-=me,_.back+=me}if(R>>>=se,L-=se,_.back+=se,_.length=Ee,ce===0){_.mode=26;break}if(32&ce){_.back=-1,_.mode=12;break}if(64&ce){A.msg="invalid literal/length code",_.mode=30;break}_.extra=15&ce,_.mode=22;case 22:if(_.extra){for(k=_.extra;L<k;){if(q===0)break e;q--,R+=U[z++]<<L,L+=8}_.length+=R&(1<<_.extra)-1,R>>>=_.extra,L-=_.extra,_.back+=_.extra}_.was=_.length,_.mode=23;case 23:for(;ce=(w=_.distcode[R&(1<<_.distbits)-1])>>>16&255,Ee=65535&w,!((se=w>>>24)<=L);){if(q===0)break e;q--,R+=U[z++]<<L,L+=8}if((240&ce)==0){for(me=se,xe=ce,Ze=Ee;ce=(w=_.distcode[Ze+((R&(1<<me+xe)-1)>>me)])>>>16&255,Ee=65535&w,!(me+(se=w>>>24)<=L);){if(q===0)break e;q--,R+=U[z++]<<L,L+=8}R>>>=me,L-=me,_.back+=me}if(R>>>=se,L-=se,_.back+=se,64&ce){A.msg="invalid distance code",_.mode=30;break}_.offset=Ee,_.extra=15&ce,_.mode=24;case 24:if(_.extra){for(k=_.extra;L<k;){if(q===0)break e;q--,R+=U[z++]<<L,L+=8}_.offset+=R&(1<<_.extra)-1,R>>>=_.extra,L-=_.extra,_.back+=_.extra}if(_.offset>_.dmax){A.msg="invalid distance too far back",_.mode=30;break}_.mode=25;case 25:if(re===0)break e;if(K=X-re,_.offset>K){if((K=_.offset-K)>_.whave&&_.sane){A.msg="invalid distance too far back",_.mode=30;break}fe=K>_.wnext?(K-=_.wnext,_.wsize-K):_.wnext-K,K>_.length&&(K=_.length),Te=_.window}else Te=ee,fe=te-_.offset,K=_.length;for(re<K&&(K=re),re-=K,_.length-=K;ee[te++]=Te[fe++],--K;);_.length===0&&(_.mode=21);break;case 26:if(re===0)break e;ee[te++]=_.length,re--,_.mode=21;break;case 27:if(_.wrap){for(;L<32;){if(q===0)break e;q--,R|=U[z++]<<L,L+=8}if(X-=re,A.total_out+=X,_.total+=X,X&&(A.adler=_.check=_.flags?a(_.check,ee,X,te-X):s(_.check,ee,X,te-X)),X=re,(_.flags?R:v(R))!==_.check){A.msg="incorrect data check",_.mode=30;break}L=R=0}_.mode=28;case 28:if(_.wrap&&_.flags){for(;L<32;){if(q===0)break e;q--,R+=U[z++]<<L,L+=8}if(R!==(4294967295&_.total)){A.msg="incorrect length check",_.mode=30;break}L=R=0}_.mode=29;case 29:B=1;break e;case 30:B=-3;break e;case 31:return-4;case 32:default:return f}return A.next_out=te,A.avail_out=re,A.next_in=z,A.avail_in=q,_.hold=R,_.bits=L,(_.wsize||X!==A.avail_out&&_.mode<30&&(_.mode<27||D!==4))&&j(A,A.output,A.next_out,X-A.avail_out)?(_.mode=31,-4):(J-=A.avail_in,X-=A.avail_out,A.total_in+=J,A.total_out+=X,_.total+=X,_.wrap&&X&&(A.adler=_.check=_.flags?a(_.check,ee,X,A.next_out-X):s(_.check,ee,X,A.next_out-X)),A.data_type=_.bits+(_.last?64:0)+(_.mode===12?128:0)+(_.mode===20||_.mode===15?256:0),(J==0&&X===0||D===4)&&B===h&&(B=-5),B)},i.inflateEnd=function(A){if(!A||!A.state)return f;var D=A.state;return D.window&&(D.window=null),A.state=null,h},i.inflateGetHeader=function(A,D){var _;return A&&A.state?(2&(_=A.state).wrap)==0?f:((_.head=D).done=!1,h):f},i.inflateSetDictionary=function(A,D){var _,U=D.length;return A&&A.state?(_=A.state).wrap!==0&&_.mode!==11?f:_.mode===11&&s(1,D,U,0)!==_.check?-3:j(A,D,U,U)?(_.mode=31,-4):(_.havedict=1,h):f},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,n,i){var o=r("../utils/common"),s=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(l,d,h,f,p,g,m,v){var b,E,S,T,x,C,P,I,M,j=v.bits,A=0,D=0,_=0,U=0,ee=0,z=0,te=0,q=0,re=0,R=0,L=null,J=0,X=new o.Buf16(16),K=new o.Buf16(16),fe=null,Te=0;for(A=0;A<=15;A++)X[A]=0;for(D=0;D<f;D++)X[d[h+D]]++;for(ee=j,U=15;1<=U&&X[U]===0;U--);if(U<ee&&(ee=U),U===0)return p[g++]=20971520,p[g++]=20971520,v.bits=1,0;for(_=1;_<U&&X[_]===0;_++);for(ee<_&&(ee=_),A=q=1;A<=15;A++)if(q<<=1,(q-=X[A])<0)return-1;if(0<q&&(l===0||U!==1))return-1;for(K[1]=0,A=1;A<15;A++)K[A+1]=K[A]+X[A];for(D=0;D<f;D++)d[h+D]!==0&&(m[K[d[h+D]]++]=D);if(C=l===0?(L=fe=m,19):l===1?(L=s,J-=257,fe=a,Te-=257,256):(L=u,fe=c,-1),A=_,x=g,te=D=R=0,S=-1,T=(re=1<<(z=ee))-1,l===1&&852<re||l===2&&592<re)return 1;for(;;){for(P=A-te,M=m[D]<C?(I=0,m[D]):m[D]>C?(I=fe[Te+m[D]],L[J+m[D]]):(I=96,0),b=1<<A-te,_=E=1<<z;p[x+(R>>te)+(E-=b)]=P<<24|I<<16|M|0,E!==0;);for(b=1<<A-1;R&b;)b>>=1;if(b!==0?(R&=b-1,R+=b):R=0,D++,--X[A]==0){if(A===U)break;A=d[h+m[D]]}if(ee<A&&(R&T)!==S){for(te===0&&(te=ee),x+=_,q=1<<(z=A-te);z+te<U&&!((q-=X[z+te])<=0);)z++,q<<=1;if(re+=1<<z,l===1&&852<re||l===2&&592<re)return 1;p[S=R&T]=ee<<24|z<<16|x-g|0}}return R!==0&&(p[x+R]=A-te<<24|64<<16|0),v.bits=ee,0}},{"../utils/common":41}],51:[function(r,n,i){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,n,i){var o=r("../utils/common"),s=0,a=1;function u(w){for(var O=w.length;0<=--O;)w[O]=0}var c=0,l=29,d=256,h=d+1+l,f=30,p=19,g=2*h+1,m=15,v=16,b=7,E=256,S=16,T=17,x=18,C=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],P=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],j=new Array(2*(h+2));u(j);var A=new Array(2*f);u(A);var D=new Array(512);u(D);var _=new Array(256);u(_);var U=new Array(l);u(U);var ee,z,te,q=new Array(f);function re(w,O,$,W,N){this.static_tree=w,this.extra_bits=O,this.extra_base=$,this.elems=W,this.max_length=N,this.has_stree=w&&w.length}function R(w,O){this.dyn_tree=w,this.max_code=0,this.stat_desc=O}function L(w){return w<256?D[w]:D[256+(w>>>7)]}function J(w,O){w.pending_buf[w.pending++]=255&O,w.pending_buf[w.pending++]=O>>>8&255}function X(w,O,$){w.bi_valid>v-$?(w.bi_buf|=O<<w.bi_valid&65535,J(w,w.bi_buf),w.bi_buf=O>>v-w.bi_valid,w.bi_valid+=$-v):(w.bi_buf|=O<<w.bi_valid&65535,w.bi_valid+=$)}function K(w,O,$){X(w,$[2*O],$[2*O+1])}function fe(w,O){for(var $=0;$|=1&w,w>>>=1,$<<=1,0<--O;);return $>>>1}function Te(w,O,$){var W,N,V=new Array(m+1),Q=0;for(W=1;W<=m;W++)V[W]=Q=Q+$[W-1]<<1;for(N=0;N<=O;N++){var Y=w[2*N+1];Y!==0&&(w[2*N]=fe(V[Y]++,Y))}}function se(w){var O;for(O=0;O<h;O++)w.dyn_ltree[2*O]=0;for(O=0;O<f;O++)w.dyn_dtree[2*O]=0;for(O=0;O<p;O++)w.bl_tree[2*O]=0;w.dyn_ltree[2*E]=1,w.opt_len=w.static_len=0,w.last_lit=w.matches=0}function ce(w){8<w.bi_valid?J(w,w.bi_buf):0<w.bi_valid&&(w.pending_buf[w.pending++]=w.bi_buf),w.bi_buf=0,w.bi_valid=0}function Ee(w,O,$,W){var N=2*O,V=2*$;return w[N]<w[V]||w[N]===w[V]&&W[O]<=W[$]}function me(w,O,$){for(var W=w.heap[$],N=$<<1;N<=w.heap_len&&(N<w.heap_len&&Ee(O,w.heap[N+1],w.heap[N],w.depth)&&N++,!Ee(O,W,w.heap[N],w.depth));)w.heap[$]=w.heap[N],$=N,N<<=1;w.heap[$]=W}function xe(w,O,$){var W,N,V,Q,Y=0;if(w.last_lit!==0)for(;W=w.pending_buf[w.d_buf+2*Y]<<8|w.pending_buf[w.d_buf+2*Y+1],N=w.pending_buf[w.l_buf+Y],Y++,W===0?K(w,N,O):(K(w,(V=_[N])+d+1,O),(Q=C[V])!==0&&X(w,N-=U[V],Q),K(w,V=L(--W),$),(Q=P[V])!==0&&X(w,W-=q[V],Q)),Y<w.last_lit;);K(w,E,O)}function Ze(w,O){var $,W,N,V=O.dyn_tree,Q=O.stat_desc.static_tree,Y=O.stat_desc.has_stree,ie=O.stat_desc.elems,ve=-1;for(w.heap_len=0,w.heap_max=g,$=0;$<ie;$++)V[2*$]!==0?(w.heap[++w.heap_len]=ve=$,w.depth[$]=0):V[2*$+1]=0;for(;w.heap_len<2;)V[2*(N=w.heap[++w.heap_len]=ve<2?++ve:0)]=1,w.depth[N]=0,w.opt_len--,Y&&(w.static_len-=Q[2*N+1]);for(O.max_code=ve,$=w.heap_len>>1;1<=$;$--)me(w,V,$);for(N=ie;$=w.heap[1],w.heap[1]=w.heap[w.heap_len--],me(w,V,1),W=w.heap[1],w.heap[--w.heap_max]=$,w.heap[--w.heap_max]=W,V[2*N]=V[2*$]+V[2*W],w.depth[N]=(w.depth[$]>=w.depth[W]?w.depth[$]:w.depth[W])+1,V[2*$+1]=V[2*W+1]=N,w.heap[1]=N++,me(w,V,1),2<=w.heap_len;);w.heap[--w.heap_max]=w.heap[1],(function(le,Ge){var cr,rt,lr,we,hn,Zi,ut=Ge.dyn_tree,Zu=Ge.max_code,g0=Ge.stat_desc.static_tree,v0=Ge.stat_desc.has_stree,m0=Ge.stat_desc.extra_bits,Xu=Ge.stat_desc.extra_base,dr=Ge.stat_desc.max_length,pn=0;for(we=0;we<=m;we++)le.bl_count[we]=0;for(ut[2*le.heap[le.heap_max]+1]=0,cr=le.heap_max+1;cr<g;cr++)dr<(we=ut[2*ut[2*(rt=le.heap[cr])+1]+1]+1)&&(we=dr,pn++),ut[2*rt+1]=we,Zu<rt||(le.bl_count[we]++,hn=0,Xu<=rt&&(hn=m0[rt-Xu]),Zi=ut[2*rt],le.opt_len+=Zi*(we+hn),v0&&(le.static_len+=Zi*(g0[2*rt+1]+hn)));if(pn!==0){do{for(we=dr-1;le.bl_count[we]===0;)we--;le.bl_count[we]--,le.bl_count[we+1]+=2,le.bl_count[dr]--,pn-=2}while(0<pn);for(we=dr;we!==0;we--)for(rt=le.bl_count[we];rt!==0;)Zu<(lr=le.heap[--cr])||(ut[2*lr+1]!==we&&(le.opt_len+=(we-ut[2*lr+1])*ut[2*lr],ut[2*lr+1]=we),rt--)}})(w,O),Te(V,ve,w.bl_count)}function y(w,O,$){var W,N,V=-1,Q=O[1],Y=0,ie=7,ve=4;for(Q===0&&(ie=138,ve=3),O[2*($+1)+1]=65535,W=0;W<=$;W++)N=Q,Q=O[2*(W+1)+1],++Y<ie&&N===Q||(Y<ve?w.bl_tree[2*N]+=Y:N!==0?(N!==V&&w.bl_tree[2*N]++,w.bl_tree[2*S]++):Y<=10?w.bl_tree[2*T]++:w.bl_tree[2*x]++,V=N,ve=(Y=0)===Q?(ie=138,3):N===Q?(ie=6,3):(ie=7,4))}function B(w,O,$){var W,N,V=-1,Q=O[1],Y=0,ie=7,ve=4;for(Q===0&&(ie=138,ve=3),W=0;W<=$;W++)if(N=Q,Q=O[2*(W+1)+1],!(++Y<ie&&N===Q)){if(Y<ve)for(;K(w,N,w.bl_tree),--Y!=0;);else N!==0?(N!==V&&(K(w,N,w.bl_tree),Y--),K(w,S,w.bl_tree),X(w,Y-3,2)):Y<=10?(K(w,T,w.bl_tree),X(w,Y-3,3)):(K(w,x,w.bl_tree),X(w,Y-11,7));V=N,ve=(Y=0)===Q?(ie=138,3):N===Q?(ie=6,3):(ie=7,4)}}u(q);var F=!1;function k(w,O,$,W){X(w,(c<<1)+(W?1:0),3),(function(N,V,Q,Y){ce(N),J(N,Q),J(N,~Q),o.arraySet(N.pending_buf,N.window,V,Q,N.pending),N.pending+=Q})(w,O,$)}i._tr_init=function(w){F||((function(){var O,$,W,N,V,Q=new Array(m+1);for(N=W=0;N<l-1;N++)for(U[N]=W,O=0;O<1<<C[N];O++)_[W++]=N;for(_[W-1]=N,N=V=0;N<16;N++)for(q[N]=V,O=0;O<1<<P[N];O++)D[V++]=N;for(V>>=7;N<f;N++)for(q[N]=V<<7,O=0;O<1<<P[N]-7;O++)D[256+V++]=N;for($=0;$<=m;$++)Q[$]=0;for(O=0;O<=143;)j[2*O+1]=8,O++,Q[8]++;for(;O<=255;)j[2*O+1]=9,O++,Q[9]++;for(;O<=279;)j[2*O+1]=7,O++,Q[7]++;for(;O<=287;)j[2*O+1]=8,O++,Q[8]++;for(Te(j,h+1,Q),O=0;O<f;O++)A[2*O+1]=5,A[2*O]=fe(O,5);ee=new re(j,C,d+1,h,m),z=new re(A,P,0,f,m),te=new re(new Array(0),I,0,p,b)})(),F=!0),w.l_desc=new R(w.dyn_ltree,ee),w.d_desc=new R(w.dyn_dtree,z),w.bl_desc=new R(w.bl_tree,te),w.bi_buf=0,w.bi_valid=0,se(w)},i._tr_stored_block=k,i._tr_flush_block=function(w,O,$,W){var N,V,Q=0;0<w.level?(w.strm.data_type===2&&(w.strm.data_type=(function(Y){var ie,ve=4093624447;for(ie=0;ie<=31;ie++,ve>>>=1)if(1&ve&&Y.dyn_ltree[2*ie]!==0)return s;if(Y.dyn_ltree[18]!==0||Y.dyn_ltree[20]!==0||Y.dyn_ltree[26]!==0)return a;for(ie=32;ie<d;ie++)if(Y.dyn_ltree[2*ie]!==0)return a;return s})(w)),Ze(w,w.l_desc),Ze(w,w.d_desc),Q=(function(Y){var ie;for(y(Y,Y.dyn_ltree,Y.l_desc.max_code),y(Y,Y.dyn_dtree,Y.d_desc.max_code),Ze(Y,Y.bl_desc),ie=p-1;3<=ie&&Y.bl_tree[2*M[ie]+1]===0;ie--);return Y.opt_len+=3*(ie+1)+5+5+4,ie})(w),N=w.opt_len+3+7>>>3,(V=w.static_len+3+7>>>3)<=N&&(N=V)):N=V=$+5,$+4<=N&&O!==-1?k(w,O,$,W):w.strategy===4||V===N?(X(w,2+(W?1:0),3),xe(w,j,A)):(X(w,4+(W?1:0),3),(function(Y,ie,ve,le){var Ge;for(X(Y,ie-257,5),X(Y,ve-1,5),X(Y,le-4,4),Ge=0;Ge<le;Ge++)X(Y,Y.bl_tree[2*M[Ge]+1],3);B(Y,Y.dyn_ltree,ie-1),B(Y,Y.dyn_dtree,ve-1)})(w,w.l_desc.max_code+1,w.d_desc.max_code+1,Q+1),xe(w,w.dyn_ltree,w.dyn_dtree)),se(w),W&&ce(w)},i._tr_tally=function(w,O,$){return w.pending_buf[w.d_buf+2*w.last_lit]=O>>>8&255,w.pending_buf[w.d_buf+2*w.last_lit+1]=255&O,w.pending_buf[w.l_buf+w.last_lit]=255&$,w.last_lit++,O===0?w.dyn_ltree[2*$]++:(w.matches++,O--,w.dyn_ltree[2*(_[$]+d+1)]++,w.dyn_dtree[2*L(O)]++),w.last_lit===w.lit_bufsize-1},i._tr_align=function(w){X(w,2,3),K(w,E,j),(function(O){O.bi_valid===16?(J(O,O.bi_buf),O.bi_buf=0,O.bi_valid=0):8<=O.bi_valid&&(O.pending_buf[O.pending++]=255&O.bi_buf,O.bi_buf>>=8,O.bi_valid-=8)})(w)}},{"../utils/common":41}],53:[function(r,n,i){n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,n,i){(function(o){(function(s,a){if(!s.setImmediate){var u,c,l,d,h=1,f={},p=!1,g=s.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(s);m=m&&m.setTimeout?m:s,u={}.toString.call(s.process)==="[object process]"?function(S){process.nextTick(function(){b(S)})}:(function(){if(s.postMessage&&!s.importScripts){var S=!0,T=s.onmessage;return s.onmessage=function(){S=!1},s.postMessage("","*"),s.onmessage=T,S}})()?(d="setImmediate$"+Math.random()+"$",s.addEventListener?s.addEventListener("message",E,!1):s.attachEvent("onmessage",E),function(S){s.postMessage(d+S,"*")}):s.MessageChannel?((l=new MessageChannel).port1.onmessage=function(S){b(S.data)},function(S){l.port2.postMessage(S)}):g&&"onreadystatechange"in g.createElement("script")?(c=g.documentElement,function(S){var T=g.createElement("script");T.onreadystatechange=function(){b(S),T.onreadystatechange=null,c.removeChild(T),T=null},c.appendChild(T)}):function(S){setTimeout(b,0,S)},m.setImmediate=function(S){typeof S!="function"&&(S=new Function(""+S));for(var T=new Array(arguments.length-1),x=0;x<T.length;x++)T[x]=arguments[x+1];var C={callback:S,args:T};return f[h]=C,u(h),h++},m.clearImmediate=v}function v(S){delete f[S]}function b(S){if(p)setTimeout(b,0,S);else{var T=f[S];if(T){p=!0;try{(function(x){var C=x.callback,P=x.args;switch(P.length){case 0:C();break;case 1:C(P[0]);break;case 2:C(P[0],P[1]);break;case 3:C(P[0],P[1],P[2]);break;default:C.apply(a,P)}})(T)}finally{v(S),p=!1}}}}function E(S){S.source===s&&typeof S.data=="string"&&S.data.indexOf(d)===0&&b(+S.data.slice(d.length))}})(typeof self>"u"?o===void 0?this:o:self)}).call(this,typeof Or<"u"?Or:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(qi)),qi.exports}var jy=zy();const $y=ms(jy),qy=ls();function tt(t,e,r){try{return e?new URL(t,e):new URL(t)}catch(n){const i=`Failed to construct URL in ${r||"unknown context"}:
  URL: "${String(t)}" (type: ${typeof t})
  Base: "${e?String(e):"undefined"}" (type: ${typeof e})
  Original error: ${n instanceof Error?n.message:String(n)}`,o=new Error(i);throw o.name="URLConstructionError",o}}function Wy(t){var e=t.indexOf("_max");switch(e!=-1&&(t=t.substring(0,e)),t){case"image":return 1e4;case"font":return 1e3;case"js":return 260;case"css":return 260;default:return 0}}const sn=["image","font","js","css","others"],Gu=["image","font","script","css","stream"];function Hy(){for(var t={},e=0,r=sn.length;e<r;e++)t[sn[e]+"_max"]=Wy(sn[e]);return t.emdate=!1,t.emsrc=!1,t.showsave=!1,t.dltype=Wt.All,t.timeout=60,t.noscript=!1,t.loadlazy=!0,t}const Wt={All:0,KeepStyle:1,Minimal:2};let $e=Hy(),an=new Map;class at{id;url;dltype;html;elemcount;xhrs;now;cancelled=!1;currentDepth;isMultiPage;maxDepth;params;sharedData;static disposeExistingAndCreate(e){return at.dispose(e.id),new at(e)}static create(e){return new at(e)}static async runChain(e){e.sharedData={chain:[e],processedLinks:new Map,cancelled:!1,linksCollected:0,linksDownloaded:0,someLinksNotDownloaded:!1},console.log("Start chain");const r=[];for(;e.sharedData.chain.length>0&&!e.sharedData.cancelled;){const n=e.sharedData.chain.shift();if(n){if(n.sharedData.linksDownloaded+=1,await o0(n.sharedData.linksCollected,n.url,n.sharedData.linksDownloaded),an.set(n.id,n),n.currentDepth<=n.maxDepth){console.log("New task");const i=await n.convert();i?r.push(i):await $i("NoDownloadableInfo")}}else await $i("MissingCurrentTask")}if(an.delete(e.id),!e.cancelled&&!e.sharedData.cancelled){const n=await Zy(r,e.url,e.now,e.sharedData.processedLinks,e.isMultiPage,e.maxDepth,e.sharedData.someLinksNotDownloaded);await Nr("dataPrepared",{downloadableInfo:n,url:e.url})}at.dispose(e.id)}static dispose(e){const r=an.get(e);r&&(r.close(),r.sharedData.chain=[],r.sharedData.cancelled=!0,an.delete(e))}putNewTask(e){this.sharedData.chain.push(e),e.sharedData=this.sharedData}constructor(e){this.id=e.id,this.url=e.url,this.dltype=e.dltype,this.elemcount=0,this.xhrs=[],this.now=new Date,this.currentDepth=e.currentDepth,this.isMultiPage=e.isMultiPage,this.maxDepth=e.maxDepth,this.params=e.params,this.html=e.html}setupBaseTag(e,r){const n=e.querySelector("base");if(n){const i=n.getAttribute("href");if(i)try{new URL(i)}catch{const s=Wi(r);if(s){const a=tt(i,s,"setupBaseTag-resolveRelative").href;n.href=a}else n.href=r}else n.href=r}else{const i=e.createElement("base");i.href=r,e.head.appendChild(i)}}close(){const e=this;for(var r=0,n=e.xhrs.length;r<n;r++){var i=e.xhrs[r];i&&i.readyState!==XMLHttpRequest.DONE&&i.abort()}e.cancelled=!0,e.xhrs=[]}removeMeta(e){for(var r=e.getElementsByTagName("meta"),n=0,i=r.length;n<i;n++){var o=r[n],s=o.getAttribute("charset");if(s){o.parentNode?.removeChild(o);break}else if(s=o.getAttribute("content"),s&&s.toLowerCase().indexOf("charset")!=-1){o.parentNode?.removeChild(o);break}}}removeTags(e){if(this.dltype!=Wt.All){var r,n,i;if($e.noscript==!0)for(n=e.getElementsByTagName("noscript");n.length>0;){var o=n[0],s=o.parentNode,a=o.innerHTML.replaceAll("&lt;","<").replaceAll("&gt;",">").trim();o.insertAdjacentHTML("afterend",a),s?.removeChild(o)}r=["meta","script","iframe","link","style"];for(var u=0,c=r.length;u<c;u++)if(!(u==4&&this.dltype==Wt.KeepStyle)){var l=u==3&&this.dltype==Wt.KeepStyle;for(n=e.getElementsByTagName(r[u]),E=n.length-1;E>=0;E--)i=n[E],!(l==!0&&i.getAttribute("rel")=="stylesheet")&&i.parentNode?.removeChild(i)}n=e.getElementsByTagName("a");for(var u=n.length-1;u>=0;u--){i=n[u];var d=i.children;if(d.length==1){var h=d[0],f=h.tagName;if(!f||f.toLowerCase()!="img")continue;var s=i.parentNode;h.removeAttribute("width"),h.removeAttribute("height"),s?.insertBefore(h,i),s?.removeChild(i)}}var p;r=["div","span","p"];do{p=!1;for(var g=0,m=r.length;g<m;g++){n=e.getElementsByTagName(r[g]);for(var u=n.length-1;u>=0;u--)i=n[u],i.innerHTML||(i.parentNode?.removeChild(i),p=!0)}}while(p==!0);var v=function(T){for(var x=T.childNodes.length-1;x>=0;x--)i=T.childNodes[x],i.nodeType===Node.COMMENT_NODE?i.parentNode.removeChild(i):v(i)};v(e),n=e.getElementsByTagName("*");for(var u=0,b=n.length;u<b;u++){i=n[u];for(var E=i.attributes.length-1;E>=0;E--){var S=i.attributes[E].name.toLowerCase();(this.dltype!=Wt.KeepStyle&&(S=="class"||S=="style")||this.dltype==Wt.Minimal&&S=="id"||S.substr(0,2)=="on")&&i.removeAttribute(S)}}}}convertPre(e){var r,n;r=e.getElementsByTagName("pre");for(var i=0,o=r.length;i<o;i++){n=r[i];for(var s=n.getElementsByTagName("br"),a=s.length-1;a>=0;a--){var u=e.createTextNode(`
`);s[a].parentNode?.replaceChild(u,s[a])}}}appendProp(e){if(!(!$e.emsrc&&!$e.emdate)){var r=e.createElement("div");r.setAttribute("style","position:fixed;z-index:999999;text-align:center;width:100%;bottom:0;");var n=e.createElement("div");if(n.setAttribute("style","display:inline;padding:0.5em;background-color:rgba(255,255,255,0.9);color:black;"),$e.emdate){var i=e.createElement("span");i.textContent=this.now.toLocaleString(),n.appendChild(i)}if($e.emsrc){var o=e.createElement("a");o.href=this.url,o.textContent=Gy("showsrc"),$e.emdate&&o.setAttribute("style","margin-left:1em;"),n.appendChild(o)}r.appendChild(n),e.body.appendChild(e.createComment("Single HTML Downloader info")),e.body.appendChild(r)}}checkFinish(e,r){const n=this;if(!this.cancelled&&!this.sharedData.cancelled)return console.log("Create downloadable file"),Vy(e,n.url,r)}getScheme(e){var r=e.indexOf("://");return r!=-1?e.substring(0,r):""}getExactlyUrl(e,r){r||(r=this.url);var i=tt(e,r,"getExactlyUrl");return i.href}checkDownloadSize(e,r){var n=e.getResponseHeader("content-type");if(typeof n=="string"){for(var i=n.toLowerCase(),o=0,s=Gu.length;o<s;o++)if(i.indexOf(Gu[o])!=-1){var a=sn[o]+"_max";return r<=$e[a]*1024}}return r<=$e.others_max*1024}async downloadContent(e,r,n){return this.downloadContentFetch(e,r,n)}async downloadContentXhr(e,r,n){return new Promise((i,o)=>{let s=new XMLHttpRequest;var a=!1;this.xhrs.push(s),e?(s.responseType="text",s.overrideMimeType("text/css; charset=utf-8")):s.responseType="arraybuffer",$e.timeout>0&&(s.timeout=$e.timeout*1e3),s.open("GET",r,!0),s.ontimeout=u=>{i({success:!1,index:n,errmsg:"Timeout. skipped."})},s.onprogress=u=>{a==!1&&u.total>0&&(this.checkDownloadSize(s,u.total)==!1?(i({success:!1,index:n,errmsg:"file size exceeds the value. Skipped."}),s.abort()):a=!0)},s.onload=function(){var u=this.response;if(e==!1){for(var c=s.getResponseHeader("content-type"),l=new Uint8Array(u),d=l.length,h="",f=0;f<d;f++)h+=String.fromCharCode(l[f]);u="data:"+c+";base64,"+btoa(h)}i({success:!0,data:u,index:n})},s.onerror=function(u){i({success:!1,errmsg:u.message,index:n})};try{s.send()}catch(u){i({success:!1,errmsg:u.message,index:n})}})}async downloadContentFetch(e,r,n){const i=new AbortController,o=$e.timeout>0?$e.timeout*1e3:0;let s=null;try{o>0&&(s=setTimeout(()=>i.abort(),o));const a=await fetch(r,{method:"GET",redirect:"manual",signal:i.signal});if(a.type==="opaqueredirect")return{success:!1,index:n,errmsg:"Opaque redirect. Skipped."};if(!a.ok)return{success:!1,index:n,errmsg:`HTTP ${a.status}`};const u=a.headers.get("content-length");if(u){const c=parseInt(u,10),l={getResponseHeader:d=>a.headers.get(d)};if(this.checkDownloadSize(l,c)===!1){try{i.abort()}catch{}return{success:!1,index:n,errmsg:"file size exceeds the value. Skipped."}}}if(e)return{success:!0,data:await a.text(),index:n};{const c=new Uint8Array(await a.arrayBuffer()),l=a.headers.get("content-type")||"application/octet-stream";let d="";for(let p=0,g=c.length;p<g;p++)d+=String.fromCharCode(c[p]);const h=btoa(d);return{success:!0,data:"data:"+l+";base64,"+h,index:n}}}catch(a){return a&&(a.name==="AbortError"||a.message==="The user aborted a request.")?{success:!1,index:n,errmsg:"Timeout. skipped."}:{success:!1,index:n,errmsg:a?.message||"Failed to fetch"}}finally{s&&clearTimeout(s)}}async downloadText(e,r){return await this.downloadContent(!0,e,r)}async downloadImage(e,r){return await this.downloadContent(!1,e,r)}async convertCssUrl(e,r){for(var n=[],i,o=/url\((['"]?)(.+?)\1\)/ig;(i=o.exec(r))!==null;)n.push({start:i.index,fulllen:i[0].length,url:i[i.length-1],data:""});var s=n.length,a=async function(){if(s--,s<=0){for(var l="",d=0,h=0,f=n.length;h<f;h++)l+=r.substring(d,n[h].start),l+='url("'+n[h].data+'")',d=n[h].start+n[h].fulllen;return l+=r.substr(d),l}};if(s==0){const l=await a();return l?[l]:[]}const u=[];for(let l=0,d=n.length;l<d;l++){let h=n[l].url;if(h.substr(0,4)=="data"){n[l].data=h;const f=a();u.push(f)}else{h=this.getExactlyUrl(h,e);const f=await this.downloadImage(h,l);f.success&&(n[f.index].data=f.data);const p=a();u.push(p)}}return(await Promise.all(u)).filter(l=>l!==void 0)}async getSubFiles(e,r){const n=this;var i,o,s,a=[],u,c;i=["img","script","link"];for(var l=0,d=i.length;l<d;l++){o=e.getElementsByTagName(i[l]);for(var h=0,f=o.length;h<f;h++){switch(s=o[h],u=!1,l){case 0:const b=s;c=b.currentSrc!=""?b.currentSrc:b.src,u=c.substring(0,4)=="http";break;case 1:const E=s;u=E.src!==void 0&&E.src!="";break;case 2:const S=s;if(S.href){var p=S.rel.toLowerCase();u=p=="stylesheet"||p=="shortcut icon"||p=="preload"}break}u==!0&&a.push(s)}}if(n.elemcount=a.length,n.elemcount==0)return n.checkFinish(r,e);const g=[];for(var l=0,m=n.elemcount;l<m;l++){var v=a[l].tagName.toLowerCase();if(v=="img"||v=="link"&&a[l].rel.toLowerCase()!="stylesheet"){var c;$e.loadlazy==!0&&v=="img"&&a[l].hasAttribute("data-src")?c=a[l].getAttribute("data-src"):c=v=="img"?a[l].src:a[l].href;const S=n.downloadImage(c,l).then(T=>{if(T.success){let x=T.index;a[x].src?a[x].src=T.data:a[x].href=T.data,a[x].removeAttribute("srcset"),a[x].removeAttribute("data-srcset"),a[x].removeAttribute("data-src")}});g.push(S)}else if(v=="script"){const E=n.downloadText(a[l].src,l).then(S=>{if(S.success==!0){let T=S.index,x=a[T];x.removeAttribute("src"),x.textContent=S.data.replace(/<(\/*)script>/gi,"\\x3c$1script\\x3e")}});g.push(E)}else{const E=n.downloadText(a[l].href,l).then(async S=>{if(S.success){let T=S.index,x=a[T],C=x.parentNode;(await n.convertCssUrl(x.href,S.data)).forEach(I=>{if(I!==null){var M=e.createElement("style"),j=x.getAttribute("media");j&&M.setAttribute("media",j),M.textContent=I,C.insertBefore(M,x),C.removeChild(x)}})}});g.push(E)}}return await Promise.all(g),n.checkFinish(r,e)}async processLinks(e){const r=this;if(r.currentDepth>=r.maxDepth||r.cancelled||r.sharedData.cancelled)return;const n=Wi(r.url);let i=e.getElementsByTagName("a");const o=Array.from(i).map(s=>s.href).filter(s=>s!==null&&s!=="").filter(s=>Wi(s)===n).map(s=>Hi(s)).filter(s=>!this.sharedData.processedLinks.has(s));this.sharedData.linksCollected+=o.length;for(let s=0,a=o.length;s<a;s++){if(this.cancelled||this.sharedData.cancelled)return;await this.fetchNewTask(o[s])}}async fetchNewTask(e){console.log("Loading new task:"+e,"depth: "+this.currentDepth);const r=at.create({dltype:0,html:{url:e},url:e,id:this.id,currentDepth:this.currentDepth+1,isMultiPage:this.isMultiPage,maxDepth:this.maxDepth,params:this.params});this.putNewTask(r)}async convert(){if(this.sharedData.processedLinks.has(this.url)){await $i("LinkAlreadyProcessed",{url:this.url});return}this.sharedData.processedLinks.set(this.url,void 0);const e=this;var r=new DOMParser,n=typeof this.html=="string"?this.html:await i0(this.html);if(n==null){this.sharedData.someLinksNotDownloaded=!0;return}const i=r.parseFromString(n,"text/html"),o=this.params?.title||i.title||"PAGE";if(e.url==="https://extensiontechnologies-332ae.web.app/website_downloader"){console.log("Download welcome page");const s=chrome.runtime.getURL("data/Extension-Technologies.html"),u=await(await fetch(s)).text();return{url:e.url,filename:"Extension-Technologies.html",doc:u}}else return e.setupBaseTag(i,e.url),e.removeMeta(i),e.removeTags(i),e.convertPre(i),e.appendProp(i),this.isMultiPage&&await e.processLinks(i),await e.getSubFiles(i,o)}}function Gy(t){var e=chrome.i18n.getMessage(t);return e||'("'+t+'" is not defined)'}function Vy(t,e,r){let n=t.replace(/[\r\n]/g,"").replace(/[\\/:*?"<>|~.]/g,"_").trim();n.length>45&&(n=n.substring(0,50)),n||(n="webpage");const i=n+".html";return{url:e,filename:i,doc:r}}function un(t){return t.endsWith(".html")?t.slice(0,-5).replace(/[\r\n]/g,"").replace(/[\\/:*?"<>|~.]/g,"_").trim()+".html":t.replace(/[\r\n]/g,"").replace(/[\\/:*?"<>|~.]/g,"_").trim()}function Wi(t){try{const e=tt(t,void 0,"getRootDomain");return`${e.protocol}//${e.host}`}catch{return console.error("Invalid URL:",t),null}}function Ky(t){try{return`${tt(t,void 0,"getHost").host}`}catch{return console.error("Invalid URL:",t),null}}function Hi(t){try{const e=tt(t,void 0,"cleanUrl");return`${e.origin}${e.pathname}`}catch{return t}}function Yy(t){let e=t.replace(/[\u0000-\u001F\u007F]/g,"");return e=e.replace(/[^a-zA-Z0-9._-]/g,"_"),e=e.replace(/_+/g,"_"),e=e.replace(/^[._\s]+|[._\s]+$/g,""),e||"website"}function cn(t){try{return decodeURIComponent(t)}catch{}const e=[];for(let i=0;i<t.length;i++){if(t.charAt(i)==="%"&&i+2<t.length){const a=t.substr(i+1,2);if(/^[0-9a-fA-F]{2}$/.test(a)){e.push(parseInt(a,16)),i+=2;continue}}const s=t.charCodeAt(i);e.push(s&255)}const r=new Uint8Array(e),n=["shift_jis","euc-jp","windows-1252"];for(const i of n)try{const s=new TextDecoder(i).decode(r);if(s&&s.indexOf("")===-1)return s}catch{}return t}async function Zy(t,e,r,n,i,o,s){if(console.log("Amount of data received: "+t.length),t.length===1){let a=t[0];const u=Vu(a.doc,r),c=new Blob([u],{type:"text/html"}),l=URL.createObjectURL(c);return{options:{filename:a.filename,url:l,saveAs:!1},isMultiPage:i,maxDepth:o,someLinksNotDownloaded:s}}else if(t.length>1){const a=Ky(e)||"website",u=Yy(a),c=new $y,l=c.folder(Gi(u))||c;e0(t,n);const d=t.length;for(let p=0;p<t.length;p++){const g=t[p],m=Xy(g.url),v=Jy(g.url),b=Vu(g.doc,r);m.length>0?(l.folder(m)||l).file(v,b):l.file(v,b),await s0(d,g.url,p+1)}const h=await c.generateAsync({type:"blob"}),f=URL.createObjectURL(h);return{options:{filename:`${u}.zip`,url:f,saveAs:!1},isMultiPage:i,maxDepth:o,someLinksNotDownloaded:s}}}function Gi(t){return t.endsWith(".app")?t.slice(0,-4)+"_app":t}function Xy(t){try{const e=tt(t,void 0,"urlToFolderPath"),r=e.pathname.split("/").filter(Boolean).map(cn);return e.pathname.endsWith("/")||r.pop(),r.map(Gi).join("/")}catch{return""}}function Jy(t){try{const r=tt(t,void 0,"urlToFilename").pathname;if(r.endsWith("/")||!r||r==="/")return"index.html";const n=r.split("/").pop()||"",i=cn(n);return i.endsWith(".html")?un(i):`${un(i)}.html`}catch(e){return console.error("Invalid URL:",e),"index.html"}}function Vu(t,e){return t instanceof Document?Qy(t,e):t}function Qy(t,e){let r='<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="download_date" content="'+e.toISOString()+'"/>';return r+=t.documentElement.innerHTML.substring(t.documentElement.innerHTML.indexOf(">")+1),r}function e0(t,e){t.forEach(function(r){r.doc instanceof Document&&t0(r.doc,e)})}function t0(t,e){const r=t.querySelectorAll("base");if(r.length===0)return;let n=null;for(const c of r){const l=c.getAttribute("href");if(l){n=l;break}}if(!n)return;r.forEach(c=>c.remove());const i=n.endsWith("/")?n+"index.html":n,o=c=>{if(!c)return null;if(c.startsWith("data:"))return c;try{let l=c.startsWith("http")?c:tt(c,n,"inlineRelativeLinks-resolveUrl").href;if(l=Hi(l),l===Hi(n))return".";if(e.has(l)||l.endsWith("/")&&e.has(l+"index.html")||l.endsWith("/index.html")&&e.has(l.slice(0,-10))){if(l.endsWith("/")||l.endsWith("/index.html")){const p=l.endsWith("/index.html")?l:l+"index.html",g=s(p,i);return g||"index.html"}const f=s(l,i);return f===""?"index.html":f.endsWith(".html")?f:f+".html"}return l}catch(l){return console.error("Error resolving URL:",l),qy.captureException(l,{data:{context:"inlineRelativeLinks-resolveUrl",relativeUrl:c,baseUrl:n}}),null}},s=(c,l)=>{const d=tt(c,void 0,"makeRelativePath-absolute").pathname,h=tt(l,void 0,"makeRelativePath-base").pathname,f=d.split("/").filter(E=>E!=="").map(cn),p=h.split("/").filter(E=>E!=="").map(cn);let g=0;for(;g<f.length&&g<p.length&&f[g]===p[g];)g++;const m=p.length-g-1,v=f.slice(g),b=v.map((E,S)=>(S===v.length-1&&E.endsWith(".html"),un(E)));return(m>=0?"../".repeat(m):"")+b.join("/")},a=(c,l)=>{const d=c.getAttribute(l),h=o(d);console.log("Updating attribute",l,"from",d,"to",h),h&&c.setAttribute(l,h)},u=[["a","href"],["link","href"],["script","src"],["img","src"],["iframe","src"],["source","src"],["video","src"],["audio","src"],["form","action"]];for(const[c,l]of u)t.querySelectorAll(c).forEach(d=>{a(d,l)})}function r0(t){if(!t)return null;const e=/<meta[^>]*charset\s*=\s*["']?\s*([a-zA-Z0-9._:\-]+)\s*["']?/i.exec(t);if(e&&e[1])return e[1];const r=/<meta[^>]*http-equiv\s*=\s*["']content-type["'][^>]*content\s*=\s*["'][^"']*charset\s*=\s*([a-zA-Z0-9._:\-]+)[^"']*["']/i.exec(t);return r&&r[1]?r[1]:null}function n0(t){let e=(t||"").trim().toLowerCase().replace(/^["']|["']$/g,"");const r={utf8:"utf-8","us-ascii":"utf-8",ascii:"utf-8",latin1:"windows-1252","iso-8859-1":"windows-1252","iso8859-1":"windows-1252","x-user-defined":"windows-1252",gb2312:"gbk","x-gbk":"gbk","ansi_x3.4-1968":"utf-8",sjis:"shift_jis"};return r[e]?r[e]:["utf-8","utf-16le","utf-16be","windows-1250","windows-1251","windows-1252","windows-1253","windows-1254","windows-1255","windows-1256","windows-1257","windows-1258","iso-8859-2","iso-8859-3","iso-8859-4","iso-8859-5","iso-8859-6","iso-8859-7","iso-8859-8","iso-8859-10","iso-8859-13","iso-8859-14","iso-8859-15","iso-8859-16","koi8-r","koi8-u","gbk","gb18030","big5","euc-kr","euc-jp","shift_jis"].indexOf(e)!==-1?e:"utf-8"}async function i0(t){try{const e=await fetch(t.url);if(!e.ok)return null;const r=await e.arrayBuffer();let n="";try{n=new TextDecoder("utf-8").decode(r)}catch{n=""}let i=r0(n);i=i?n0(i):"utf-8";let o;if(i==="utf-8")o=n||await e.text();else try{o=new TextDecoder(i).decode(r)}catch{o=n||await e.text()}return o}catch(e){if(e instanceof TypeError&&e.message==="Failed to fetch")return null;throw e}}function Ku(t){return t.length>30?`${t.slice(0,10)}...${t.slice(-20)}`:t}async function o0(t,e,r){let n="";t>0&&(n="Collected "+r+"/"+(t+1)+" links. "),await Nr("infoMessage","<strong>Do not close the page.</strong><br>"+n+"Loading "+Ku(e))}async function s0(t,e,r){let n="";t>0&&(n="Zipping "+r+"/"+t+" pages. "),await Nr("infoMessage","<strong>Do not close the page.</strong><br>"+n+"Processing "+Ku(e))}const a0={matches:["http://*/*","https://*/*"],main(){l0()}};let Fe=null,mt=null;function u0(){const t=document.createElement("div");t.id="website-downloader-indicator",t.style.cssText=`
        position: fixed;
        top: 0;
        left: 50%;
        transform: translateX(-50%) translateY(-100%);
        z-index: 999999;
        background: linear-gradient(135deg, #007bff, #0056b3);
        color: white;
        padding: 8px 16px;
        border-radius: 0 0 8px 8px;
        font-family: Arial, sans-serif;
        font-size: 14px;
        font-weight: 500;
        box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3);
        display: flex;
        align-items: center;
        gap: 8px;
        min-width: 200px;
        transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        backdrop-filter: blur(10px);
    `;const e=document.createElement("div");e.style.cssText=`
        width: 16px;
        height: 16px;
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-top: 2px solid white;
        border-radius: 50%;
        animation: downloadingSpin 1s linear infinite;
    `;const r=document.createElement("span");if(r.textContent="Downloading website...",t.appendChild(e),t.appendChild(r),!document.getElementById("website-downloader-styles")){const n=document.createElement("style");n.id="website-downloader-styles",n.textContent=`
            @keyframes downloadingSpin {
                0% { transform: rotate(0deg); }
                100% { transform: rotate(360deg); }
            }
            
            .downloading-show {
                transform: translateX(-50%) translateY(0) !important;
            }
            
            .downloading-hide {
                transform: translateX(-50%) translateY(-100%) !important;
            }
        `,document.head.appendChild(n)}return t}function c0(){mt&&(clearTimeout(mt),mt=null),!Fe&&(mt=setTimeout(()=>{mt=null,Fe===null&&(Fe=u0(),document.body.appendChild(Fe),setTimeout(()=>{Fe&&Fe.classList.add("downloading-show")},10))},500))}function Vi(){mt&&(clearTimeout(mt),mt=null),Fe&&(Fe.classList.remove("downloading-show"),Fe.classList.add("downloading-hide"),setTimeout(()=>{Fe&&Fe.parentNode&&Fe.parentNode.removeChild(Fe),Fe=null},400))}function l0(){let t=ls();_s("collectHtml",async e=>{c0(),await Zf(t,void 0,async()=>{const{linkDepth:r}=await chrome.storage.sync.get({linkDepth:1}),n=at.disposeExistingAndCreate({id:e.data.tabId,url:document.URL,dltype:0,html:document.documentElement.innerHTML,currentDepth:0,isMultiPage:e.data.isMultiPage,maxDepth:r,params:{title:document.title}});await at.runChain(n),Vi()},async()=>{Vi(),await Nr("cancel",e.data.tabId)})}),_s("cancelLoadingLink",async e=>{console.log("Downloading cancelled"),Vi(),at.dispose(e.data)}),d0()}function d0(){chrome.storage.sync.get(["onPageDownload"],function(e){e.onPageDownload?(console.log("onPageDownload is enabled"),t()):console.log("Feature is disabled")});function t(){const e=document.createElement("div");e.style.position="fixed",e.style.right="0",e.style.zIndex="10000",e.style.display="flex",e.style.flexDirection="column",e.style.alignItems="end";const r=window.location.hostname,n=localStorage.getItem("buttonPositionY");n?e.style.top=`${n}px`:e.style.top="50%";const i=document.createElement("button");i.id="on_page_download_button",i.style.backgroundImage=`url(${chrome.runtime.getURL("/icon/16.png")})`,i.style.backgroundSize="70% 70%",i.style.backgroundRepeat="no-repeat",i.style.backgroundPosition="center",i.style.height="30px",i.style.width="30px",i.style.padding="10px",i.style.marginBottom="2px",i.style.opacity="0.5",i.style.paddingRight="24px",i.style.color="#ffffff50",i.style.border="none",i.style.borderRadius="5px 0 0 5px",i.style.cursor="pointer";const o=document.createElement("button");o.innerText="X",o.style.fontSize="8px",o.style.height="11px",o.style.width="15px",o.style.paddingRight="2px",o.style.paddingLeft="2px",o.style.backgroundColor="#ff000050",o.style.color="#ffffff50",o.style.border="none",o.style.borderRadius="5px 5px 5px 5px",o.style.cursor="pointer";const s=document.createElement("button");s.innerText="",s.style.paddingLeft="4px",s.style.height="30px",s.style.width="10px",s.style.backgroundColor="#007bff50",s.style.color="#ffffff50",s.style.border="none",s.style.borderRadius="5px 0 0 5px",s.style.cursor="pointer",s.style.display="none",e.appendChild(i),e.appendChild(o),e.appendChild(s),document.body.appendChild(e),localStorage.getItem(`buttonHidden_${r}`)==="true"&&(i.style.display="none",o.style.display="none",s.style.display="block");let a=!1;const u=c=>{c.preventDefault();const l=c.clientY-e.getBoundingClientRect().top;document.onmousemove=d=>{a=!0;let h=d.clientY-l;h<0&&(h=0),h>window.innerHeight-e.offsetHeight&&(h=window.innerHeight-e.offsetHeight),e.style.top=`${h}px`,localStorage.setItem("buttonPositionY",h.toString())},document.onmouseup=()=>{document.onmousemove=null,document.onmouseup=null,setTimeout(()=>a=!1,0)}};e.onmousedown=c=>{(c.target===i||c.target===o||c.target===s)&&u(c)},i.addEventListener("click",async c=>{if(a)return c.preventDefault(),c.stopImmediatePropagation(),!1;await chrome.runtime.sendMessage({msg:Qf.TriggerAction})}),o.addEventListener("click",c=>{if(a)return c.preventDefault(),c.stopImmediatePropagation(),!1;i.style.display="none",o.style.display="none",s.style.display="block",localStorage.setItem(`buttonHidden_${r}`,"true")}),s.addEventListener("click",c=>{if(a)return c.preventDefault(),c.stopImmediatePropagation(),!1;i.style.display="block",o.style.display="block",s.style.display="none",localStorage.setItem(`buttonHidden_${r}`,"false")})}}const Yu=globalThis.browser?.runtime?.id?globalThis.browser:globalThis.chrome;function ln(t,...e){}const f0={debug:(...t)=>ln(console.debug,...t),log:(...t)=>ln(console.log,...t),warn:(...t)=>ln(console.warn,...t),error:(...t)=>ln(console.error,...t)};class Ki extends Event{constructor(e,r){super(Ki.EVENT_NAME,{}),this.newUrl=e,this.oldUrl=r}static EVENT_NAME=Yi("wxt:locationchange")}function Yi(t){return`${Yu?.runtime?.id}:content:${t}`}function h0(t){let e,r;return{run(){e==null&&(r=new URL(location.href),e=t.setInterval(()=>{let n=new URL(location.href);n.href!==r.href&&(window.dispatchEvent(new Ki(n,r)),r=n)},1e3))}}}class dn{constructor(e,r){this.contentScriptName=e,this.options=r,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}static SCRIPT_STARTED_MESSAGE_TYPE=Yi("wxt:content-script-started");isTopFrame=window.self===window.top;abortController;locationWatcher=h0(this);receivedMessageIds=new Set;get signal(){return this.abortController.signal}abort(e){return this.abortController.abort(e)}get isInvalid(){return Yu.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(e){return this.signal.addEventListener("abort",e),()=>this.signal.removeEventListener("abort",e)}block(){return new Promise(()=>{})}setInterval(e,r){const n=setInterval(()=>{this.isValid&&e()},r);return this.onInvalidated(()=>clearInterval(n)),n}setTimeout(e,r){const n=setTimeout(()=>{this.isValid&&e()},r);return this.onInvalidated(()=>clearTimeout(n)),n}requestAnimationFrame(e){const r=requestAnimationFrame((...n)=>{this.isValid&&e(...n)});return this.onInvalidated(()=>cancelAnimationFrame(r)),r}requestIdleCallback(e,r){const n=requestIdleCallback((...i)=>{this.signal.aborted||e(...i)},r);return this.onInvalidated(()=>cancelIdleCallback(n)),n}addEventListener(e,r,n,i){r==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),e.addEventListener?.(r.startsWith("wxt:")?Yi(r):r,n,{...i,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),f0.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:dn.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(e){const r=e.data?.type===dn.SCRIPT_STARTED_MESSAGE_TYPE,n=e.data?.contentScriptName===this.contentScriptName,i=!this.receivedMessageIds.has(e.data?.messageId);return r&&n&&i}listenForNewerScripts(e){let r=!0;const n=i=>{if(this.verifyScriptStartedEvent(i)){this.receivedMessageIds.add(i.data.messageId);const o=r;if(r=!1,o&&e?.ignoreFirstEvent)return;this.notifyInvalidated()}};addEventListener("message",n),this.onInvalidated(()=>removeEventListener("message",n))}}function O0(){}function fn(t,...e){}const p0={debug:(...t)=>fn(console.debug,...t),log:(...t)=>fn(console.log,...t),warn:(...t)=>fn(console.warn,...t),error:(...t)=>fn(console.error,...t)};return(async()=>{try{const{main:t,...e}=a0,r=new dn("content",e);return await t(r)}catch(t){throw p0.error('The content script "content" crashed on startup!',t),t}})()})();
//# sourceMappingURL=content.js.map
content;